"use strict";exports.id=74,exports.ids=[74],exports.modules={3462:(t,r,n)=>{var a,o,i=Object.create,s=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,c=Object.getPrototypeOf,d=Object.prototype.hasOwnProperty,__copyProps=(t,r,n,a)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let o of u(r))d.call(t,o)||o===n||s(t,o,{get:()=>r[o],enumerable:!(a=l(r,o))||a.enumerable});return t},__toESM=(t,r,n)=>(n=null!=t?i(c(t)):{},__copyProps(!r&&t&&t.__esModule?n:s(n,"default",{value:t,enumerable:!0}),t)),h={};((t,r)=>{for(var n in r)s(t,n,{get:r[n],enumerable:!0})})(h,{AllowlistIdentifier:()=>em,AuthStatus:()=>eW,Clerk:()=>Clerk,Client:()=>eb,DeletedObject:()=>ev,Email:()=>eS,EmailAddress:()=>eA,ExternalAccount:()=>eE,IdentificationLink:()=>eC,Invitation:()=>eP,OauthAccessToken:()=>e_,ObjectType:()=>ek,Organization:()=>eB,OrganizationInvitation:()=>eR,OrganizationMembership:()=>eT,OrganizationMembershipPublicUserData:()=>eO,PhoneNumber:()=>ex,RedirectUrl:()=>eI,SMSMessage:()=>eU,Session:()=>eg,SignInToken:()=>eK,Token:()=>eN,User:()=>ej,Verification:()=>ew,buildRequestUrl:()=>buildRequestUrl,constants:()=>ey,createAuthenticateRequest:()=>createAuthenticateRequest,createIsomorphicRequest:()=>createIsomorphicRequest,debugRequestState:()=>debugRequestState,decodeJwt:()=>decodeJwt,deserialize:()=>deserialize,hasValidSignature:()=>hasValidSignature,loadInterstitialFromLocal:()=>loadInterstitialFromLocal,makeAuthObjectSerializable:()=>makeAuthObjectSerializable,prunePrivateMetadata:()=>prunePrivateMetadata,redirect:()=>redirect,sanitizeAuthObject:()=>sanitizeAuthObject,signJwt:()=>signJwt,signedInAuthObject:()=>signedInAuthObject,signedOutAuthObject:()=>signedOutAuthObject,verifyJwt:()=>verifyJwt,verifyToken:()=>verifyToken}),t.exports=__copyProps(s({},"__esModule",{value:!0}),h);var p=n(1555),y=class{constructor(t){this.request=t}requireId(t){if(!t)throw Error("A valid resource ID is required.")}},m=RegExp("(?<!:)/{1,}","g");function joinPaths(...t){return t.filter(t=>t).join("/").replace(m,"/")}var g="/allowlist_identifiers",b=class extends y{async getAllowlistIdentifierList(){return this.request({method:"GET",path:g})}async createAllowlistIdentifier(t){return this.request({method:"POST",path:g,bodyParams:t})}async deleteAllowlistIdentifier(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(g,t)})}},v="/clients",S=class extends y{async getClientList(){return this.request({method:"GET",path:v})}async getClient(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(v,t)})}verifyClient(t){return this.request({method:"POST",path:joinPaths(v,"verify"),bodyParams:{token:t}})}},C=class extends y{async deleteDomain(t){return this.request({method:"DELETE",path:joinPaths("/domains",t)})}},w="/email_addresses",A=class extends y{async getEmailAddress(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(w,t)})}async createEmailAddress(t){return this.request({method:"POST",path:w,bodyParams:t})}async updateEmailAddress(t,r={}){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(w,t),bodyParams:r})}async deleteEmailAddress(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(w,t)})}},E=n(1555),P=class extends y{async createEmail(t){return(0,E.deprecated)("EmailAPI.createEmail","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/emails",bodyParams:t})}},k=n(9804),_=n(8850),B=n(8905),R=n(1555),T=n(335),O=n(8905),I=(0,T.buildErrorThrower)({packageName:"@clerk/backend"}),{isDevOrStagingUrl:K}=(0,O.createDevOrStagingUrlCache)(),U=class extends y{async getInterstitial(){return(0,R.deprecated)("getInterstitial()",'Switch to `Clerk(...).localInterstitial(...)` from `import { Clerk } from "@clerk/backend"`.'),this.request({path:"internal/interstitial",method:"GET",headerParams:{"Content-Type":"text/html"}})}},N="/invitations",L=class extends y{async getInvitationList(t={}){return this.request({method:"GET",path:N,queryParams:t})}async createInvitation(t){return this.request({method:"POST",path:N,bodyParams:t})}async revokeInvitation(t){return this.requireId(t),this.request({method:"POST",path:joinPaths(N,t,"revoke")})}},j=n(1555),D=__toESM(n(5742)),{RuntimeFetch:q,RuntimeAbortController:M,RuntimeBlob:W,RuntimeFormData:H,RuntimeHeaders:z,RuntimeRequest:F,RuntimeResponse:V}=__toESM(n(6749)),$=q.bind(globalThis),J={crypto:D.default,fetch:$,AbortController:M,Blob:W,FormData:H,Headers:z,Request:F,Response:V},G="/organizations",Y=class extends y{async getOrganizationList(t){return this.request({method:"GET",path:G,queryParams:t})}async createOrganization(t){return this.request({method:"POST",path:G,bodyParams:t})}async getOrganization(t){let r="organizationId"in t?t.organizationId:t.slug;return this.requireId(r),this.request({method:"GET",path:joinPaths(G,r)})}async updateOrganization(t,r){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(G,t),bodyParams:r})}async updateOrganizationLogo(t,r){this.requireId(t);let n=new J.FormData;return n.append("file",r?.file),n.append("uploader_user_id",r?.uploaderUserId),this.request({method:"PUT",path:joinPaths(G,t,"logo"),formData:n})}async deleteOrganizationLogo(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(G,t,"logo")})}async updateOrganizationMetadata(t,r){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(G,t,"metadata"),bodyParams:r})}async deleteOrganization(t){return this.request({method:"DELETE",path:joinPaths(G,t)})}async getOrganizationMembershipList(t){let{organizationId:r,limit:n,offset:a}=t;return this.requireId(r),this.request({method:"GET",path:joinPaths(G,r,"memberships"),queryParams:{limit:n,offset:a}})}async createOrganizationMembership(t){let{organizationId:r,userId:n,role:a}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(G,r,"memberships"),bodyParams:{userId:n,role:a}})}async updateOrganizationMembership(t){let{organizationId:r,userId:n,role:a}=t;return this.requireId(r),this.request({method:"PATCH",path:joinPaths(G,r,"memberships",n),bodyParams:{role:a}})}async updateOrganizationMembershipMetadata(t){let{organizationId:r,userId:n,publicMetadata:a,privateMetadata:o}=t;return this.request({method:"PATCH",path:joinPaths(G,r,"memberships",n,"metadata"),bodyParams:{publicMetadata:a,privateMetadata:o}})}async deleteOrganizationMembership(t){let{organizationId:r,userId:n}=t;return this.requireId(r),this.request({method:"DELETE",path:joinPaths(G,r,"memberships",n)})}async getOrganizationInvitationList(t){let{organizationId:r,status:n,limit:a,offset:o}=t;return this.requireId(r),this.request({method:"GET",path:joinPaths(G,r,"invitations"),queryParams:{status:n,limit:a,offset:o}})}async getPendingOrganizationInvitationList(t){(0,j.deprecated)("getPendingOrganizationInvitationList","Use `getOrganizationInvitationList` instead.");let{organizationId:r,limit:n,offset:a}=t;return this.requireId(r),this.request({method:"GET",path:joinPaths(G,r,"invitations","pending"),queryParams:{limit:n,offset:a}})}async createOrganizationInvitation(t){let{organizationId:r,...n}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(G,r,"invitations"),bodyParams:{...n}})}async getOrganizationInvitation(t){let{organizationId:r,invitationId:n}=t;return this.requireId(r),this.requireId(n),this.request({method:"GET",path:joinPaths(G,r,"invitations",n)})}async revokeOrganizationInvitation(t){let{organizationId:r,invitationId:n,requestingUserId:a}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(G,r,"invitations",n,"revoke"),bodyParams:{requestingUserId:a}})}},Q="/phone_numbers",X=class extends y{async getPhoneNumber(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(Q,t)})}async createPhoneNumber(t){return this.request({method:"POST",path:Q,bodyParams:t})}async updatePhoneNumber(t,r={}){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(Q,t),bodyParams:r})}async deletePhoneNumber(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(Q,t)})}},Z="/redirect_urls",ee=class extends y{async getRedirectUrlList(){return this.request({method:"GET",path:Z})}async getRedirectUrl(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(Z,t)})}async createRedirectUrl(t){return this.request({method:"POST",path:Z,bodyParams:t})}async deleteRedirectUrl(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(Z,t)})}},et="/sessions",er=class extends y{async getSessionList(t){return this.request({method:"GET",path:et,queryParams:t})}async getSession(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(et,t)})}async revokeSession(t){return this.requireId(t),this.request({method:"POST",path:joinPaths(et,t,"revoke")})}async verifySession(t,r){return this.requireId(t),this.request({method:"POST",path:joinPaths(et,t,"verify"),bodyParams:{token:r}})}async getToken(t,r){return this.requireId(t),(await this.request({method:"POST",path:joinPaths(et,t,"tokens",r||"")})).jwt}},en="/sign_in_tokens",ea=class extends y{async createSignInToken(t){return this.request({method:"POST",path:en,bodyParams:t})}async revokeSignInToken(t){return this.requireId(t),this.request({method:"POST",path:joinPaths(en,t,"revoke")})}},eo=n(1555),ei=class extends y{async createSMSMessage(t){return(0,eo.deprecated)("SMSMessageAPI.createSMSMessage","This endpoint is no longer available and the function will be removed in the next major version."),this.request({method:"POST",path:"/sms_messages",bodyParams:t})}},es="/users",el=class extends y{async getUserList(t={}){return this.request({method:"GET",path:es,queryParams:t})}async getUser(t){return this.requireId(t),this.request({method:"GET",path:joinPaths(es,t)})}async createUser(t){return this.request({method:"POST",path:es,bodyParams:t})}async updateUser(t,r={}){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(es,t),bodyParams:r})}async updateUserProfileImage(t,r){this.requireId(t);let n=new J.FormData;return n.append("file",r?.file),this.request({method:"POST",path:joinPaths(es,t,"profile_image"),formData:n})}async updateUserMetadata(t,r){return this.requireId(t),this.request({method:"PATCH",path:joinPaths(es,t,"metadata"),bodyParams:r})}async deleteUser(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(es,t)})}async getCount(t={}){return this.request({method:"GET",path:joinPaths(es,"count"),queryParams:t})}async getUserOauthAccessToken(t,r){return this.requireId(t),this.request({method:"GET",path:joinPaths(es,t,"oauth_access_tokens",r)})}async disableUserMFA(t){return this.requireId(t),this.request({method:"DELETE",path:joinPaths(es,t,"mfa")})}async getOrganizationMembershipList(t){let{userId:r,limit:n,offset:a}=t;return this.requireId(r),this.request({method:"GET",path:joinPaths(es,r,"organization_memberships"),queryParams:{limit:n,offset:a}})}async verifyPassword(t){let{userId:r,password:n}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(es,r,"verify_password"),bodyParams:{password:n}})}async verifyTOTP(t){let{userId:r,code:n}=t;return this.requireId(r),this.request({method:"POST",path:joinPaths(es,r,"verify_totp"),bodyParams:{code:n}})}},eu=n(335),ec=__toESM(n(1175)),ed=__toESM(n(8903)),eh="https://api.clerk.dev",ef="@clerk/backend@0.38.12",ep={AuthToken:"x-clerk-auth-token",AuthStatus:"x-clerk-auth-status",AuthReason:"x-clerk-auth-reason",AuthMessage:"x-clerk-auth-message",EnableDebug:"x-clerk-debug",ClerkRedirectTo:"x-clerk-redirect-to",CloudFrontForwardedProto:"cloudfront-forwarded-proto",Authorization:"authorization",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",ForwardedHost:"x-forwarded-host",Referrer:"referer",UserAgent:"user-agent",Origin:"origin",Host:"host",ContentType:"content-type"},ey={Attributes:{AuthToken:"__clerkAuthToken",AuthStatus:"__clerkAuthStatus",AuthReason:"__clerkAuthReason",AuthMessage:"__clerkAuthMessage"},Cookies:{Session:"__session",ClientUat:"__client_uat"},Headers:ep,SearchParams:{AuthStatus:ep.AuthStatus,AuthToken:ep.AuthToken},ContentTypes:{Json:"application/json"}};function assertValidSecretKey(t){if(!t||"string"!=typeof t)throw Error("Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var em=class _AllowlistIdentifier{constructor(t,r,n,a,o){this.id=t,this.identifier=r,this.createdAt=n,this.updatedAt=a,this.invitationId=o}static fromJSON(t){return new _AllowlistIdentifier(t.id,t.identifier,t.created_at,t.updated_at,t.invitation_id)}},eg=class _Session{constructor(t,r,n,a,o,i,s,l,u){this.id=t,this.clientId=r,this.userId=n,this.status=a,this.lastActiveAt=o,this.expireAt=i,this.abandonAt=s,this.createdAt=l,this.updatedAt=u}static fromJSON(t){return new _Session(t.id,t.client_id,t.user_id,t.status,t.last_active_at,t.expire_at,t.abandon_at,t.created_at,t.updated_at)}},eb=class _Client{constructor(t,r,n,a,o,i,s,l){this.id=t,this.sessionIds=r,this.sessions=n,this.signInId=a,this.signUpId=o,this.lastActiveSessionId=i,this.createdAt=s,this.updatedAt=l}static fromJSON(t){return new _Client(t.id,t.session_ids,t.sessions.map(t=>eg.fromJSON(t)),t.sign_in_id,t.sign_up_id,t.last_active_session_id,t.created_at,t.updated_at)}},ev=class _DeletedObject{constructor(t,r,n,a){this.object=t,this.id=r,this.slug=n,this.deleted=a}static fromJSON(t){return new _DeletedObject(t.object,t.id||null,t.slug||null,t.deleted)}},eS=class _Email{constructor(t,r,n,a,o,i,s,l,u,c,d){this.id=t,this.fromEmailName=r,this.emailAddressId=n,this.toEmailAddress=a,this.subject=o,this.body=i,this.bodyPlain=s,this.status=l,this.slug=u,this.data=c,this.deliveredByClerk=d}static fromJSON(t){return new _Email(t.id,t.from_email_name,t.email_address_id,t.to_email_address,t.subject,t.body,t.body_plain,t.status,t.slug,t.data,t.delivered_by_clerk)}},eC=class _IdentificationLink{constructor(t,r){this.id=t,this.type=r}static fromJSON(t){return new _IdentificationLink(t.id,t.type)}},ew=class _Verification{constructor(t,r,n=null,a=null,o=null,i=null){this.status=t,this.strategy=r,this.externalVerificationRedirectURL=n,this.attempts=a,this.expireAt=o,this.nonce=i}static fromJSON(t){return new _Verification(t.status,t.strategy,t.external_verification_redirect_url?new URL(t.external_verification_redirect_url):null,t.attempts,t.expire_at,t.nonce)}},eA=class _EmailAddress{constructor(t,r,n,a){this.id=t,this.emailAddress=r,this.verification=n,this.linkedTo=a}static fromJSON(t){return new _EmailAddress(t.id,t.email_address,t.verification&&ew.fromJSON(t.verification),t.linked_to.map(t=>eC.fromJSON(t)))}},eE=class _ExternalAccount{constructor(t,r,n,a,o,i,s,l,u,c,d,h={},p,y){this.id=t,this.provider=r,this.identificationId=n,this.externalId=a,this.approvedScopes=o,this.emailAddress=i,this.firstName=s,this.lastName=l,this.picture=u,this.imageUrl=c,this.username=d,this.publicMetadata=h,this.label=p,this.verification=y}static fromJSON(t){return new _ExternalAccount(t.id,t.provider,t.identification_id,t.provider_user_id,t.approved_scopes,t.email_address,t.first_name,t.last_name,t.avatar_url,t.image_url,t.username,t.public_metadata,t.label,t.verification&&ew.fromJSON(t.verification))}};(0,R.deprecatedProperty)(eE,"picture","Use `imageUrl` instead.");var eP=class _Invitation{constructor(t,r,n,a,o,i,s){this.id=t,this.emailAddress=r,this.publicMetadata=n,this.createdAt=a,this.updatedAt=o,this.status=i,this.revoked=s}static fromJSON(t){return new _Invitation(t.id,t.email_address,t.public_metadata,t.created_at,t.updated_at,t.status,t.revoked)}},ek=((a=ek||{}).AllowlistIdentifier="allowlist_identifier",a.Client="client",a.Email="email",a.EmailAddress="email_address",a.ExternalAccount="external_account",a.FacebookAccount="facebook_account",a.GoogleAccount="google_account",a.Invitation="invitation",a.OauthAccessToken="oauth_access_token",a.Organization="organization",a.OrganizationInvitation="organization_invitation",a.OrganizationMembership="organization_membership",a.PhoneNumber="phone_number",a.RedirectUrl="redirect_url",a.Session="session",a.SignInAttempt="sign_in_attempt",a.SignInToken="sign_in_token",a.SignUpAttempt="sign_up_attempt",a.SmsMessage="sms_message",a.User="user",a.Web3Wallet="web3_wallet",a.Token="token",a.TotalCount="total_count",a),e_=class _OauthAccessToken{constructor(t,r,n={},a,o,i){this.provider=t,this.token=r,this.publicMetadata=n,this.label=a,this.scopes=o,this.tokenSecret=i}static fromJSON(t){return new _OauthAccessToken(t.provider,t.token,t.public_metadata,t.label,t.scopes,t.token_secret)}},eB=class _Organization{constructor(t,r,n,a,o,i,s,l,u,c={},d={},h,p,y,m){this.id=t,this.name=r,this.slug=n,this.logoUrl=a,this.imageUrl=o,this.hasImage=i,this.createdBy=s,this.createdAt=l,this.updatedAt=u,this.publicMetadata=c,this.privateMetadata=d,this.maxAllowedMemberships=h,this.adminDeleteEnabled=p,this.members_count=y,this.membersCount=m}static fromJSON(t){return new _Organization(t.id,t.name,t.slug,t.logo_url,t.image_url,t.has_image,t.created_by,t.created_at,t.updated_at,t.public_metadata,t.private_metadata,t.max_allowed_memberships,t.admin_delete_enabled,t.members_count,t.members_count)}};(0,R.deprecatedProperty)(eB,"logoUrl","Use `imageUrl` instead."),(0,R.deprecatedProperty)(eB,"members_count","Use `membersCount` instead.");var eR=class _OrganizationInvitation{constructor(t,r,n,a,o,i,s,l={},u={}){this.id=t,this.emailAddress=r,this.role=n,this.organizationId=a,this.createdAt=o,this.updatedAt=i,this.status=s,this.publicMetadata=l,this.privateMetadata=u}static fromJSON(t){return new _OrganizationInvitation(t.id,t.email_address,t.role,t.organization_id,t.created_at,t.updated_at,t.status,t.public_metadata,t.private_metadata)}},eT=class _OrganizationMembership{constructor(t,r,n={},a={},o,i,s,l){this.id=t,this.role=r,this.publicMetadata=n,this.privateMetadata=a,this.createdAt=o,this.updatedAt=i,this.organization=s,this.publicUserData=l}static fromJSON(t){return new _OrganizationMembership(t.id,t.role,t.public_metadata,t.private_metadata,t.created_at,t.updated_at,eB.fromJSON(t.organization),eO.fromJSON(t.public_user_data))}},eO=class _OrganizationMembershipPublicUserData{constructor(t,r,n,a,o,i,s){this.identifier=t,this.firstName=r,this.lastName=n,this.profileImageUrl=a,this.imageUrl=o,this.hasImage=i,this.userId=s}static fromJSON(t){return new _OrganizationMembershipPublicUserData(t.identifier,t.first_name,t.last_name,t.profile_image_url,t.image_url,t.has_image,t.user_id)}};(0,R.deprecatedProperty)(eO,"profileImageUrl","Use `imageUrl` instead.");var ex=class _PhoneNumber{constructor(t,r,n,a,o,i){this.id=t,this.phoneNumber=r,this.reservedForSecondFactor=n,this.defaultSecondFactor=a,this.verification=o,this.linkedTo=i}static fromJSON(t){return new _PhoneNumber(t.id,t.phone_number,t.reserved_for_second_factor,t.default_second_factor,t.verification&&ew.fromJSON(t.verification),t.linked_to.map(t=>eC.fromJSON(t)))}},eI=class _RedirectUrl{constructor(t,r,n,a){this.id=t,this.url=r,this.createdAt=n,this.updatedAt=a}static fromJSON(t){return new _RedirectUrl(t.id,t.url,t.created_at,t.updated_at)}},eK=class _SignInToken{constructor(t,r,n,a,o,i,s){this.id=t,this.userId=r,this.token=n,this.status=a,this.url=o,this.createdAt=i,this.updatedAt=s}static fromJSON(t){return new _SignInToken(t.id,t.user_id,t.token,t.status,t.url,t.created_at,t.updated_at)}},eU=class _SMSMessage{constructor(t,r,n,a,o,i,s){this.id=t,this.fromPhoneNumber=r,this.toPhoneNumber=n,this.message=a,this.status=o,this.phoneNumberId=i,this.data=s}static fromJSON(t){return new _SMSMessage(t.id,t.from_phone_number,t.to_phone_number,t.message,t.status,t.phone_number_id,t.data)}},eN=class _Token{constructor(t){this.jwt=t}static fromJSON(t){return new _Token(t.jwt)}},eL=class _Web3Wallet{constructor(t,r,n){this.id=t,this.web3Wallet=r,this.verification=n}static fromJSON(t){return new _Web3Wallet(t.id,t.web3_wallet,t.verification&&ew.fromJSON(t.verification))}},ej=class _User{constructor(t,r,n,a,o,i,s,l,u,c,d,h,p,y,m,g,b,v,S,C,w,A={},E={},P={},k=[],_=[],B=[],R=[],T){this.id=t,this.passwordEnabled=r,this.totpEnabled=n,this.backupCodeEnabled=a,this.twoFactorEnabled=o,this.banned=i,this.createdAt=s,this.updatedAt=l,this.profileImageUrl=u,this.imageUrl=c,this.hasImage=d,this.gender=h,this.birthday=p,this.primaryEmailAddressId=y,this.primaryPhoneNumberId=m,this.primaryWeb3WalletId=g,this.lastSignInAt=b,this.externalId=v,this.username=S,this.firstName=C,this.lastName=w,this.publicMetadata=A,this.privateMetadata=E,this.unsafeMetadata=P,this.emailAddresses=k,this.phoneNumbers=_,this.web3Wallets=B,this.externalAccounts=R,this.createOrganizationEnabled=T}static fromJSON(t){return new _User(t.id,t.password_enabled,t.totp_enabled,t.backup_code_enabled,t.two_factor_enabled,t.banned,t.created_at,t.updated_at,t.profile_image_url,t.image_url,t.has_image,t.gender,t.birthday,t.primary_email_address_id,t.primary_phone_number_id,t.primary_web3_wallet_id,t.last_sign_in_at,t.external_id,t.username,t.first_name,t.last_name,t.public_metadata,t.private_metadata,t.unsafe_metadata,(t.email_addresses||[]).map(t=>eA.fromJSON(t)),(t.phone_numbers||[]).map(t=>ex.fromJSON(t)),(t.web3_wallets||[]).map(t=>eL.fromJSON(t)),(t.external_accounts||[]).map(t=>eE.fromJSON(t)),t.create_organization_enabled)}};function deserialize(t){return Array.isArray(t)?t.map(t=>jsonToObject(t)):Array.isArray(t.data)&&void 0!==t.data?t.data.map(t=>jsonToObject(t)):jsonToObject(t)}function jsonToObject(t){if("string"!=typeof t&&"object"in t&&"deleted"in t)return ev.fromJSON(t);switch(t.object){case"allowlist_identifier":return em.fromJSON(t);case"client":return eb.fromJSON(t);case"email_address":return eA.fromJSON(t);case"email":return eS.fromJSON(t);case"invitation":return eP.fromJSON(t);case"oauth_access_token":return e_.fromJSON(t);case"organization":return eB.fromJSON(t);case"organization_invitation":return eR.fromJSON(t);case"organization_membership":return eT.fromJSON(t);case"phone_number":return ex.fromJSON(t);case"redirect_url":return eI.fromJSON(t);case"sign_in_token":return eK.fromJSON(t);case"session":return eg.fromJSON(t);case"sms_message":return eU.fromJSON(t);case"token":return eN.fromJSON(t);case"total_count":return t.total_count;case"user":return ej.fromJSON(t);default:return t}}(0,R.deprecatedProperty)(ej,"profileImageUrl","Use `imageUrl` instead.");var withLegacyReturn=t=>async(...r)=>{let n=await t(...r);if(null===n.errors)return n.data;{let{errors:t,clerkTraceId:r}=n,{status:a,statusText:o}=n,i=new eu.ClerkAPIResponseError(o||"",{data:[],status:a||"",clerkTraceId:r});throw i.errors=t,i}};function getTraceId(t,r){if(t&&"object"==typeof t&&"clerk_trace_id"in t&&"string"==typeof t.clerk_trace_id)return t.clerk_trace_id;let n=r?.get("cf-ray");return n||""}function parseError(t){return{code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:t?.meta?.param_name,sessionId:t?.meta?.session_id}}}function createBackendApiClient(t){let r=function(t){let request=async r=>{let n;let{apiKey:a,secretKey:o,httpOptions:i,apiUrl:s=eh,apiVersion:l="v1",userAgent:u=ef}=t;a&&(0,R.deprecated)("apiKey","Use `secretKey` instead."),i&&(0,R.deprecated)("httpOptions","This option has been deprecated and will be removed with the next major release.\nA RequestInit init object used by the `request` method.");let{path:c,method:d,queryParams:h,headerParams:p,bodyParams:y,formData:m}=r,g=o||a;assertValidSecretKey(g);let b=joinPaths(s,l,c),v=new URL(b);if(h){let t=(0,ed.default)({...h});for(let[r,n]of Object.entries(t))n&&[n].flat().forEach(t=>v.searchParams.append(r,t))}let S={Authorization:`Bearer ${g}`,"User-Agent":u,...p};try{if(m)n=await J.fetch(v.href,{...i,method:d,headers:S,body:m});else{S["Content-Type"]="application/json";let t="GET"!==d&&y&&Object.keys(y).length>0,r=t?{body:JSON.stringify((0,ed.default)(y,{deep:!1}))}:null;n=await J.fetch(v.href,(0,ec.default)(i||{},{method:d,headers:S,...r}))}let t=n?.headers&&n.headers?.get(ey.Headers.ContentType)===ey.ContentTypes.Json,r=await (t?n.json():n.text());if(!n.ok)throw r;return{data:deserialize(r),errors:null}}catch(t){if(t instanceof Error)return{data:null,errors:[{code:"unexpected_error",message:t.message||"Unexpected error"}],clerkTraceId:getTraceId(t,n?.headers)};return{data:null,errors:function(t){if(t&&"object"==typeof t&&"errors"in t){let r=t.errors;return r.length>0?r.map(parseError):[]}return[]}(t),status:n?.status,statusText:n?.statusText,clerkTraceId:getTraceId(t,n?.headers)}}};return withLegacyReturn(request)}(t);return{allowlistIdentifiers:new b(r),clients:new S(r),emailAddresses:new A(r),emails:new P(r),interstitial:new U(r),invitations:new L(r),organizations:new Y(r),phoneNumbers:new X(r),redirectUrls:new ee(r),sessions:new er(r),signInTokens:new ea(r),smsMessages:new ei(r),users:new el(r),domains:new C(r)}}var eD=n(1555),createDebug=t=>()=>{let r={...t};return r.apiKey=(r.apiKey||"").substring(0,7),r.secretKey=(r.secretKey||"").substring(0,7),r.jwtKey=(r.jwtKey||"").substring(0,7),{...r}};function signedInAuthObject(t,r,n){let{act:a,sid:o,org_id:i,org_role:s,org_slug:l,org_permissions:u,sub:c}=t,{apiKey:d,secretKey:h,apiUrl:p,apiVersion:y,token:m,session:g,user:b,organization:v}=r;d&&(0,eD.deprecated)("apiKey","Use `secretKey` instead.");let{sessions:S}=createBackendApiClient({apiKey:d,secretKey:h,apiUrl:p,apiVersion:y}),C=createGetToken({sessionId:o,sessionToken:m,fetcher:(...t)=>S.getToken(...t)});return{actor:a,sessionClaims:t,sessionId:o,session:g,userId:c,user:b,orgId:i,orgRole:s,orgSlug:l,orgPermissions:u,organization:v,getToken:C,has:createHasAuthorization({orgId:i,orgRole:s,orgPermissions:u,userId:c}),debug:createDebug({...r,...n})}}function signedOutAuthObject(t){return t?.apiKey&&(0,eD.deprecated)("apiKey","Use `secretKey` instead."),{sessionClaims:null,sessionId:null,session:null,userId:null,user:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,organization:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:createDebug(t)}}function prunePrivateMetadata(t){return t&&(delete t.privateMetadata,delete t.private_metadata),t}function sanitizeAuthObject(t){let r=t.user?{...t.user}:t.user,n=t.organization?{...t.organization}:t.organization;return prunePrivateMetadata(r),prunePrivateMetadata(n),{...t,user:r,organization:n}}var makeAuthObjectSerializable=t=>{let{debug:r,getToken:n,has:a,...o}=t;return o},createGetToken=t=>{let{fetcher:r,sessionToken:n,sessionId:a}=t||{};return async(t={})=>a?t.template?r(a,t.template):n:null},createHasAuthorization=({orgId:t,orgRole:r,userId:n,orgPermissions:a})=>o=>{if(!o?.permission&&!o?.role)throw Error('Missing parameters. `has` from `auth` or `getAuth` requires a permission or role key to be passed. Example usage: `has({permission: "org:posts:edit"`');return!!t&&!!n&&!!r&&!!a&&(o.permission?a.includes(o.permission):!!o.role&&r===o.role)},eq=class _TokenVerificationError extends Error{constructor({action:t,message:r,reason:n}){super(r),Object.setPrototypeOf(this,_TokenVerificationError.prototype),this.reason=n,this.message=r,this.action=t}getFullMessage(){return`${[this.message,this.action].filter(t=>t).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}};function loadInterstitialFromLocal(t){t.frontendApi&&(0,R.deprecated)("frontendApi","Use `publishableKey` instead."),t.pkgVersion&&(0,R.deprecated)("pkgVersion","Use `clerkJSVersion` instead."),t.frontendApi=B.parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi||"";let r=K(t.frontendApi)?"":(0,k.addClerkPrefix)(t.domain),{debugData:n,frontendApi:a,pkgVersion:o,clerkJSUrl:i,clerkJSVersion:s,publishableKey:l,proxyUrl:u,isSatellite:c=!1,domain:d,signInUrl:h}=t;return`
    <head>
        <meta charset="UTF-8" />
        <style>
          @media (prefers-color-scheme: dark) {
            body {
              background-color: black;
            }
          }
        </style>
    </head>
    <body>
        <script>
            window.__clerk_frontend_api = '${a}';
            window.__clerk_debug = ${JSON.stringify(n||{})};
            ${u?`window.__clerk_proxy_url = '${u}'`:""}
            ${d?`window.__clerk_domain = '${d}'`:""}
            window.startClerk = async () => {
                function formRedirect(){
                    const form = '<form method="get" action="" name="redirect"></form>';
                    document.body.innerHTML = document.body.innerHTML + form;

                    const searchParams = new URLSearchParams(window.location.search);
                    for (let paramTuple of searchParams) {
                        const input = document.createElement("input");
                        input.type = "hidden";
                        input.name = paramTuple[0];
                        input.value = paramTuple[1];
                        document.forms.redirect.appendChild(input);
                    }
                    const url = new URL(window.location.origin + window.location.pathname + window.location.hash);
                    window.history.pushState({}, '', url);

                    document.forms.redirect.action = window.location.pathname + window.location.hash;
                    document.forms.redirect.submit();
                }

                const Clerk = window.Clerk;
                try {
                    await Clerk.load({
                        isSatellite: ${c},
                        isInterstitial: true,
                        signInUrl: ${h?`'${h}'`:void 0}
                    });
                    if(Clerk.loaded){
                      if(window.location.href.indexOf("#") === -1){
                        window.location.href = window.location.href;
                      } else if (window.navigator.userAgent.toLowerCase().includes("firefox/")){
                          formRedirect();
                      } else {
                          window.location.reload();
                      }
                    }
                } catch (err) {
                    console.error('Clerk: ', err);
                }
            };
            (() => {
                const script = document.createElement('script');
                ${l?`script.setAttribute('data-clerk-publishable-key', '${l}');`:`script.setAttribute('data-clerk-frontend-api', '${a}');`}

                ${d?`script.setAttribute('data-clerk-domain', '${d}');`:""}
                ${u?`script.setAttribute('data-clerk-proxy-url', '${u}')`:""};
                script.async = true;
                script.src = '${i||(0,k.getScriptUrl)(u||r||a,{pkgVersion:o,clerkJSVersion:s})}';
                script.crossOrigin = 'anonymous';
                script.addEventListener('load', startClerk);
                document.body.appendChild(script);
            })();
        </script>
    </body>
`}async function loadInterstitialFromBAPI(t){t.frontendApi&&(0,R.deprecated)("frontendApi","Use `publishableKey` instead."),t.pkgVersion&&(0,R.deprecated)("pkgVersion","Use `clerkJSVersion` instead."),t.frontendApi=B.parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi||"";let r=buildPublicInterstitialUrl(t),n=await (0,_.callWithRetry)(()=>J.fetch(buildPublicInterstitialUrl(t),{method:"GET",headers:{"Clerk-Backend-SDK":t.userAgent||ef}}));if(!n.ok)throw new eq({action:"Contact support@clerk.com",message:`Error loading Clerk Interstitial from ${r} with code=${n.status}`,reason:"interstitial-remote-failed-to-load"});return n.text()}function buildPublicInterstitialUrl(t){t.frontendApi&&(0,R.deprecated)("frontendApi","Use `publishableKey` instead."),t.frontendApi=B.parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi||"";let{apiUrl:r,frontendApi:n,pkgVersion:a,clerkJSVersion:o,publishableKey:i,proxyUrl:s,isSatellite:l,domain:u,signInUrl:c}=t,d=new URL(r);return d.pathname=joinPaths(d.pathname,"v1","/public/interstitial"),d.searchParams.append("clerk_js_version",o||(0,k.getClerkJsMajorVersionOrTag)(n,a)),i?d.searchParams.append("publishable_key",i):d.searchParams.append("frontend_api",n),s&&d.searchParams.append("proxy_url",s),l&&d.searchParams.append("is_satellite","true"),d.searchParams.append("sign_in_url",c||""),K(t.frontendApi)||d.searchParams.append("use_domain_for_script","true"),u&&d.searchParams.append("domain",u),d.href}var eM=n(5011),getHeader=(t,r)=>t.headers.get(r),getFirstValueFromHeader=t=>t?.split(",")[0],buildRequestUrl=(t,r)=>{let n=new URL(t.url),a=getHeader(t,ey.Headers.ForwardedProto),o=getHeader(t,ey.Headers.ForwardedHost),i=getHeader(t,ey.Headers.Host),s=n.protocol,l=buildOrigin({protocol:s,forwardedProto:a,forwardedHost:o,host:i||n.host});return new URL(r||n.pathname,l)},buildOrigin=({protocol:t,forwardedProto:r,forwardedHost:n,host:a})=>{let o=getFirstValueFromHeader(n)??a,i=getFirstValueFromHeader(r)??t?.replace(/[:/]/,"");return o&&i?`${i}://${o}`:""},createIsomorphicRequest=t=>{let r=t(J.Request,J.Headers),n=buildRequestUrl(r);return new J.Request(n,r)},buildRequest2=t=>{if(!t)return{};let r=parseIsomorphicRequestCookies(t),n=getHeaderFromIsomorphicRequest(t),a=getSearchParamsFromIsomorphicRequest(t);return{cookies:r,headers:n,searchParams:a}},decode=t=>t?t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):t,parseIsomorphicRequestCookies=t=>{let r=t.headers&&t.headers?.get("cookie")?(0,eM.parse)(t.headers.get("cookie")):{};return t=>{let n=r?.[t];if(void 0!==n)return decode(n)}},getHeaderFromIsomorphicRequest=t=>r=>t?.headers?.get(r)||void 0,getSearchParamsFromIsomorphicRequest=t=>t?.url?new URL(t.url)?.searchParams:void 0,stripAuthorizationHeader=t=>t?.replace("Bearer ",""),eW=((o=eW||{}).SignedIn="signed-in",o.SignedOut="signed-out",o.Interstitial="interstitial",o.Unknown="unknown",o);async function signedIn(t,r){let{apiKey:n,secretKey:a,apiUrl:o,apiVersion:i,cookieToken:s,frontendApi:l,proxyUrl:u,publishableKey:c,domain:d,isSatellite:h,headerToken:p,loadSession:y,loadUser:m,loadOrganization:g,signInUrl:b,signUpUrl:v,afterSignInUrl:S,afterSignUpUrl:C,token:w}=t,{sid:A,org_id:E,sub:P}=r,{sessions:k,users:_,organizations:B}=createBackendApiClient({apiKey:n,secretKey:a,apiUrl:o,apiVersion:i}),[R,T,O]=await Promise.all([y?k.getSession(A):Promise.resolve(void 0),m?_.getUser(P):Promise.resolve(void 0),g&&E?B.getOrganization({organizationId:E}):Promise.resolve(void 0)]),I=signedInAuthObject(r,{secretKey:a,apiKey:n,apiUrl:o,apiVersion:i,token:s||p||"",session:R,user:T,organization:O},{...t,status:"signed-in"});return{status:"signed-in",reason:null,message:null,frontendApi:l,proxyUrl:u,publishableKey:c,domain:d,isSatellite:h,signInUrl:b,signUpUrl:v,afterSignInUrl:S,afterSignUpUrl:C,isSignedIn:!0,isInterstitial:!1,isUnknown:!1,toAuth:()=>I,token:w}}function signedOut(t,r,n=""){let{frontendApi:a,publishableKey:o,proxyUrl:i,isSatellite:s,domain:l,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h}=t;return{status:"signed-out",reason:r,message:n,frontendApi:a,proxyUrl:i,publishableKey:o,isSatellite:s,domain:l,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!1,isUnknown:!1,toAuth:()=>signedOutAuthObject({...t,status:"signed-out",reason:r,message:n}),token:null}}function interstitial(t,r,n=""){let{frontendApi:a,publishableKey:o,proxyUrl:i,isSatellite:s,domain:l,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h}=t;return{status:"interstitial",reason:r,message:n,frontendApi:a,publishableKey:o,isSatellite:s,domain:l,proxyUrl:i,signInUrl:u,signUpUrl:c,afterSignInUrl:d,afterSignUpUrl:h,isSignedIn:!1,isInterstitial:!0,isUnknown:!1,toAuth:()=>null,token:null}}function checkCrossOrigin({originURL:t,host:r,forwardedHost:n,forwardedProto:a}){let o=buildOrigin({forwardedProto:a,forwardedHost:n,protocol:t.protocol,host:r});return o&&new URL(o).origin!==t.origin}var getErrorObjectByCode=(t,r)=>t?t.find(t=>t.code===r):null,eH=n(1555),ez={parse:(t,r)=>(function(t,r,n={}){if(!r.codes){r.codes={};for(let t=0;t<r.chars.length;++t)r.codes[r.chars[t]]=t}if(!n.loose&&t.length*r.bits&7)throw SyntaxError("Invalid padding");let a=t.length;for(;"="===t[a-1];)if(--a,!n.loose&&!((t.length-a)*r.bits&7))throw SyntaxError("Invalid padding");let o=new(n.out??Uint8Array)(a*r.bits/8|0),i=0,s=0,l=0;for(let n=0;n<a;++n){let a=r.codes[t[n]];if(void 0===a)throw SyntaxError("Invalid character "+t[n]);s=s<<r.bits|a,(i+=r.bits)>=8&&(i-=8,o[l++]=255&s>>i)}if(i>=r.bits||255&s<<8-i)throw SyntaxError("Unexpected end of data");return o})(t,eF,r),stringify:(t,r)=>(function(t,r,n={}){let{pad:a=!0}=n,o=(1<<r.bits)-1,i="",s=0,l=0;for(let n=0;n<t.length;++n)for(l=l<<8|255&t[n],s+=8;s>r.bits;)s-=r.bits,i+=r.chars[o&l>>s];if(s&&(i+=r.chars[o&l<<r.bits-s]),a)for(;i.length*r.bits&7;)i+="=";return i})(t,eF,r)},eF={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},eV={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},e$="RSASSA-PKCS1-v1_5",eJ={RS256:e$,RS384:e$,RS512:e$},eG=Object.keys(eV);function getCryptoAlgorithm(t){let r=eV[t],n=eJ[t];if(!r||!n)throw Error(`Unsupported algorithm ${t}, expected one of ${eG.join(",")}.`);return{hash:{name:eV[t]},name:eJ[t]}}var isArrayString=t=>Array.isArray(t)&&t.length>0&&t.every(t=>"string"==typeof t),assertAudienceClaim=(t,r)=>{let n=[r].flat().filter(t=>!!t),a=[t].flat().filter(t=>!!t),o=n.length>0&&a.length>0;if(o){if("string"==typeof t){if(!n.includes(t))throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(n)}".`})}else if(isArrayString(t)&&!t.some(t=>n.includes(t)))throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT audience claim array (aud) ${JSON.stringify(t)}. Is not included in "${JSON.stringify(n)}".`})}},assertHeaderType=t=>{if(void 0!==t&&"JWT"!==t)throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid",message:`Invalid JWT type ${JSON.stringify(t)}. Expected "JWT".`})},assertHeaderAlgorithm=t=>{if(!eG.includes(t))throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-invalid-algorithm",message:`Invalid JWT algorithm ${JSON.stringify(t)}. Supported: ${eG}.`})},assertSubClaim=t=>{if("string"!=typeof t)throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(t)}.`})},assertAuthorizedPartiesClaim=(t,r)=>{if(t&&r&&0!==r.length&&!r.includes(t))throw new eq({reason:"token-invalid-authorized-parties",message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(t)}. Expected "${r}".`})},assertIssuerClaim=(t,r)=>{if("function"!=typeof r||r(t)){if("string"==typeof r&&t&&t!==r)throw new eq({reason:"token-invalid-issuer",message:`Invalid JWT issuer claim (iss) ${JSON.stringify(t)}. Expected "${r}".`})}else throw new eq({reason:"token-invalid-issuer",message:"Failed JWT issuer resolver. Make sure that the resolver returns a truthy value."})},assertExpirationClaim=(t,r)=>{if("number"!=typeof t)throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(t)}. Expected number.`});let n=new Date(Date.now()),a=new Date(0);a.setUTCSeconds(t);let o=a.getTime()<=n.getTime()-r;if(o)throw new eq({reason:"token-expired",message:`JWT is expired. Expiry date: ${a.toUTCString()}, Current date: ${n.toUTCString()}.`})},assertActivationClaim=(t,r)=>{if(void 0===t)return;if("number"!=typeof t)throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(t)}. Expected number.`});let n=new Date(Date.now()),a=new Date(0);a.setUTCSeconds(t);let o=a.getTime()>n.getTime()+r;if(o)throw new eq({reason:"token-not-active-yet",message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${a.toUTCString()}; Current date: ${n.toUTCString()};`})},assertIssuedAtClaim=(t,r)=>{if(void 0===t)return;if("number"!=typeof t)throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(t)}. Expected number.`});let n=new Date(Date.now()),a=new Date(0);a.setUTCSeconds(t);let o=a.getTime()>n.getTime()+r;if(o)throw new eq({reason:"token-not-active-yet",message:`JWT issued at date claim (iat) is in the future. Issued at date: ${a.toUTCString()}; Current date: ${n.toUTCString()};`})},eY=n(9883);function importKey(t,r,n){if("object"==typeof t)return J.crypto.subtle.importKey("jwk",t,r,!1,[n]);let a=function(t){let r=t.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),n=(0,eY.isomorphicAtob)(r),a=new ArrayBuffer(n.length),o=new Uint8Array(a);for(let t=0,r=n.length;t<r;t++)o[t]=n.charCodeAt(t);return o}(t),o="sign"===n?"pkcs8":"spki";return J.crypto.subtle.importKey(o,a,r,!1,[n])}async function hasValidSignature(t,r){let{header:n,signature:a,raw:o}=t,i=new TextEncoder,s=i.encode([o.header,o.payload].join(".")),l=getCryptoAlgorithm(n.alg),u=await importKey(r,l,"verify");return J.crypto.subtle.verify(l.name,u,a,s)}function decodeJwt(t){let r=(t||"").toString().split(".");if(3!==r.length)throw new eq({reason:"token-invalid",message:"Invalid JWT form. A JWT consists of three parts separated by dots."});let[n,a,o]=r,i=new TextDecoder,s=JSON.parse(i.decode(ez.parse(n,{loose:!0}))),l=JSON.parse(i.decode(ez.parse(a,{loose:!0}))),u=ez.parse(o,{loose:!0});return(0,eH.deprecatedObjectProperty)(l,"orgs",'Add orgs to your session token using the "user.organizations" shortcode in JWT Templates instead.',"decodeJwt:orgs"),{header:s,payload:l,signature:u,raw:{header:n,payload:a,signature:o,text:t}}}async function verifyJwt(t,{audience:r,authorizedParties:n,clockSkewInSeconds:a,clockSkewInMs:o,issuer:i,key:s}){let l;a&&(0,R.deprecated)("clockSkewInSeconds","Use `clockSkewInMs` instead.");let u=o||a||5e3,c=decodeJwt(t),{header:d,payload:h}=c,{typ:p,alg:y}=d;assertHeaderType(p),assertHeaderAlgorithm(y);let{azp:m,sub:g,aud:b,iss:v,iat:S,exp:C,nbf:w}=h;assertSubClaim(g),assertAudienceClaim([b],[r]),assertAuthorizedPartiesClaim(m,n),assertIssuerClaim(v,i),assertExpirationClaim(C,u),assertActivationClaim(w,u),assertIssuedAtClaim(S,u);try{l=await hasValidSignature(c,s)}catch(t){throw new eq({action:"Make sure that this is a valid Clerk generate JWT.",reason:"token-verification-failed",message:`Error verifying JWT signature. ${t}`})}if(!l)throw new eq({reason:"token-invalid-signature",message:"JWT signature is invalid."});return h}function encodeJwtData(t){let r=JSON.stringify(t),n=new TextEncoder,a=n.encode(r);return ez.stringify(a,{pad:!1})}async function signJwt(t,r,n){if(!n.algorithm)throw Error("No algorithm specified");let a=new TextEncoder,o=getCryptoAlgorithm(n.algorithm);if(!o)throw Error(`Unsupported algorithm ${n.algorithm}`);let i=await importKey(r,o,"sign"),s=n.header||{typ:"JWT"};s.alg=n.algorithm,t.iat=Math.floor(Date.now()/1e3);let l=encodeJwtData(s),u=encodeJwtData(t),c=`${l}.${u}`,d=await J.crypto.subtle.sign(o,i,a.encode(c));return`${c}.${ez.stringify(new Uint8Array(d),{pad:!1})}`}var eQ={},eX=0;function setInCache(t,r=!0){eQ[t.kid]=t,eX=r?Date.now():-1}var eZ="local";async function loadClerkJWKFromRemote({apiKey:t,secretKey:r,apiUrl:n=eh,apiVersion:a="v1",issuer:o,kid:i,skipJwksCache:s}){(function(){if(-1===eX)return!1;let t=Date.now()-eX>=3e5;return t})()&&(eQ={});let l=!eQ[i];if(s||l){let i;let s=r||t;if(s)i=()=>fetchJWKSFromBAPI(n,s,a);else if(o)i=()=>fetchJWKSFromFAPI(o);else throw new eq({action:"Contact support@clerk.com",message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:"jwk-remote-failed-to-load"});let{keys:l}=await (0,_.callWithRetry)(i);if(!l||!l.length)throw new eq({action:"Contact support@clerk.com",message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:"jwk-remote-failed-to-load"});l.forEach(t=>setInCache(t))}let u=eQ[i];if(!u){let t=Object.values(eQ),r=t.map(t=>t.kid).join(", ");throw new eq({action:"Contact support@clerk.com",message:`Unable to find a signing key in JWKS that matches the kid='${i}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT.${r?` The following kid are available: ${r}`:""}`,reason:"jwk-remote-missing"})}return u}async function fetchJWKSFromFAPI(t){let r=new URL(t);r.pathname=joinPaths(r.pathname,".well-known/jwks.json");let n=await J.fetch(r.href);if(!n.ok)throw new eq({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${r.href} with code=${n.status}`,reason:"jwk-remote-failed-to-load"});return n.json()}async function fetchJWKSFromBAPI(t,r,n){if(!r)throw new eq({action:"Set the CLERK_SECRET_KEY or CLERK_API_KEY environment variable.",message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:"jwk-remote-failed-to-load"});let a=new URL(t);a.pathname=joinPaths(a.pathname,n,"/jwks");let o=await J.fetch(a.href,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!o.ok){let t=await o.json(),r=getErrorObjectByCode(t?.errors,"clerk_key_invalid");if(r)throw new eq({action:"Contact support@clerk.com",message:r.message,reason:"secret-key-invalid"});throw new eq({action:"Contact support@clerk.com",message:`Error loading Clerk JWKS from ${a.href} with code=${o.status}`,reason:"jwk-remote-failed-to-load"})}return o.json()}async function verifyToken(t,r){let n;let{apiKey:a,secretKey:o,apiUrl:i,apiVersion:s,audience:l,authorizedParties:u,clockSkewInSeconds:c,clockSkewInMs:d,issuer:h,jwksCacheTtlInMs:p,jwtKey:y,skipJwksCache:m}=r;r.apiKey&&(0,R.deprecated)("apiKey","Use `secretKey` instead.");let{header:g}=decodeJwt(t),{kid:b}=g;if(y)n=function(t){if(!eQ[eZ]){if(!t)throw new eq({action:"Set the CLERK_JWT_KEY environment variable.",message:"Missing local JWK.",reason:"jwk-local-missing"});let r=t.replace(/(\r\n|\n|\r)/gm,"").replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA","").replace("IDAQAB","").replace(/\+/g,"-").replace(/\//g,"_");setInCache({kid:"local",kty:"RSA",alg:"RS256",n:r,e:"AQAB"},!1)}return eQ[eZ]}(y);else if("string"==typeof h)n=await loadClerkJWKFromRemote({issuer:h,kid:b,jwksCacheTtlInMs:p,skipJwksCache:m});else if(a||o)n=await loadClerkJWKFromRemote({apiKey:a,secretKey:o,apiUrl:i,apiVersion:s,kid:b,jwksCacheTtlInMs:p,skipJwksCache:m});else throw new eq({action:"Set the CLERK_JWT_KEY environment variable.",message:"Failed to resolve JWK during verification.",reason:"jwk-failed-to-resolve"});return await verifyJwt(t,{audience:l,authorizedParties:u,clockSkewInSeconds:c,clockSkewInMs:d,key:n,issuer:h})}var shouldRedirectToSatelliteUrl=t=>!!t?.get("__clerk_satellite_url"),hasJustSynced=t=>t?.get("__clerk_synced")==="true",e0=/^Mozilla\/|(Amazon CloudFront)/,isBrowser=t=>e0.test(t||""),nonBrowserRequestInDevRule=t=>{let{apiKey:r,secretKey:n,userAgent:a}=t,o=n||r||"";if((0,B.isDevelopmentFromApiKey)(o)&&!isBrowser(a))return signedOut(t,"header-missing-non-browser")},crossOriginRequestWithoutHeader=t=>{let{origin:r,host:n,forwardedHost:a,forwardedProto:o}=t,i=r&&checkCrossOrigin({originURL:new URL(r),host:n,forwardedHost:a,forwardedProto:o});if(i)return signedOut(t,"header-missing-cors")},isPrimaryInDevAndRedirectsToSatellite=t=>{let{apiKey:r,secretKey:n,isSatellite:a,searchParams:o}=t,i=(0,B.isDevelopmentFromApiKey)(n||r||"");if(i&&!a&&shouldRedirectToSatelliteUrl(o))return interstitial(t,"primary-responds-to-syncing")},potentialFirstLoadInDevWhenUATMissing=t=>{let{apiKey:r,secretKey:n,clientUat:a}=t,o=(0,B.isDevelopmentFromApiKey)(n||r||"");if(o&&!a)return interstitial(t,"uat-missing")},potentialRequestAfterSignInOrOutFromClerkHostedUiInDev=t=>{let{apiKey:r,secretKey:n,referrer:a,host:o,forwardedHost:i,forwardedProto:s}=t,l=a&&checkCrossOrigin({originURL:new URL(a),host:o,forwardedHost:i,forwardedProto:s}),u=n||r||"";if((0,B.isDevelopmentFromApiKey)(u)&&l)return interstitial(t,"cross-origin-referrer")},potentialFirstRequestOnProductionEnvironment=t=>{let{apiKey:r,secretKey:n,clientUat:a,cookieToken:o}=t,i=n||r||"";if((0,B.isProductionFromApiKey)(i)&&!a&&!o)return signedOut(t,"cookie-and-uat-missing")},isNormalSignedOutState=t=>{let{clientUat:r}=t;if("0"===r)return signedOut(t,"standard-signed-out")},hasPositiveClientUatButCookieIsMissing=t=>{let{clientUat:r,cookieToken:n}=t;if(r&&Number.parseInt(r)>0&&!n)return interstitial(t,"cookie-missing")},hasValidHeaderToken=async t=>{let{headerToken:r}=t,n=await verifyRequestState(t,r);return await signedIn({...t,token:r},n)},hasValidCookieToken=async t=>{let{cookieToken:r,clientUat:n}=t,a=await verifyRequestState(t,r),o=await signedIn({...t,token:r},a),i=o.toAuth().sessionClaims,s=i.iat<Number.parseInt(n);return!n||s?interstitial(t,"cookie-outdated"):o};async function runInterstitialRules(t,r){for(let n of r){let r=await n(t);if(r)return r}return signedOut(t,"unexpected-error")}async function verifyRequestState(t,r){let n;let{isSatellite:a,proxyUrl:o}=t;return n=a?null:o||(t=>t.startsWith("https://clerk.")||t.includes(".clerk.accounts")),verifyToken(r,{...t,issuer:n})}var isSatelliteAndNeedsSyncing=t=>{let{clientUat:r,isSatellite:n,searchParams:a,userAgent:o}=t,i=!r||"0"===r;return n&&i&&!isBrowser(o)?signedOut(t,"satellite-needs-syncing"):n&&i&&!hasJustSynced(a)?interstitial(t,"satellite-needs-syncing"):void 0};async function authenticateRequest(t){let{cookies:r,headers:n,searchParams:a}=buildRequest2(t?.request);async function authenticateRequestWithTokenInHeader(){try{let r=await runInterstitialRules(t,[hasValidHeaderToken]);return r}catch(t){return handleError(t,"header")}}async function authenticateRequestWithTokenInCookie(){try{let r=await runInterstitialRules(t,[crossOriginRequestWithoutHeader,nonBrowserRequestInDevRule,isSatelliteAndNeedsSyncing,isPrimaryInDevAndRedirectsToSatellite,potentialFirstRequestOnProductionEnvironment,potentialFirstLoadInDevWhenUATMissing,potentialRequestAfterSignInOrOutFromClerkHostedUiInDev,hasPositiveClientUatButCookieIsMissing,isNormalSignedOutState,hasValidCookieToken]);return r}catch(t){return handleError(t,"cookie")}}function handleError(r,n){if(r instanceof eq){r.tokenCarrier=n;let a=["token-expired","token-not-active-yet"].includes(r.reason);return a?"header"===n?function(t,r,n=""){let{frontendApi:a,publishableKey:o,isSatellite:i,domain:s,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:d}=t;return{status:"unknown",reason:r,message:n,frontendApi:a,publishableKey:o,isSatellite:i,domain:s,signInUrl:l,signUpUrl:u,afterSignInUrl:c,afterSignUpUrl:d,isSignedIn:!1,isInterstitial:!1,isUnknown:!0,toAuth:()=>null,token:null}}(t,r.reason,r.getFullMessage()):interstitial(t,r.reason,r.getFullMessage()):signedOut(t,r.reason,r.getFullMessage())}return signedOut(t,"unexpected-error",r.message)}return(t.frontendApi&&(0,R.deprecated)("frontendApi","Use `publishableKey` instead."),t.apiKey&&(0,R.deprecated)("apiKey","Use `secretKey` instead."),assertValidSecretKey((t={...t,...loadOptionsFromHeaders(t,n),frontendApi:B.parsePublishableKey(t.publishableKey)?.frontendApi||t.frontendApi,apiUrl:t.apiUrl||eh,apiVersion:t.apiVersion||"v1",cookieToken:t.cookieToken||r?.(ey.Cookies.Session),clientUat:t.clientUat||r?.(ey.Cookies.ClientUat),searchParams:t.searchParams||a||void 0}).secretKey||t.apiKey),t.isSatellite&&(function(t,r){if(!t&&(0,B.isDevelopmentFromApiKey)(r))throw Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}(t.signInUrl,t.secretKey||t.apiKey),t.signInUrl&&t.origin&&function(t,r){let n;try{n=new URL(t)}catch{throw Error("The signInUrl needs to have a absolute url format.")}if(n.origin===r)throw Error("The signInUrl needs to be on a different origin than your satellite application.")}(t.signInUrl,t.origin),function(t){if(!t)throw Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}(t.proxyUrl||t.domain)),t.headerToken)?authenticateRequestWithTokenInHeader():authenticateRequestWithTokenInCookie()}var debugRequestState=t=>{let{frontendApi:r,isSignedIn:n,proxyUrl:a,isInterstitial:o,reason:i,message:s,publishableKey:l,isSatellite:u,domain:c}=t;return{frontendApi:r,isSignedIn:n,proxyUrl:a,isInterstitial:o,reason:i,message:s,publishableKey:l,isSatellite:u,domain:c}},loadOptionsFromHeaders=(t,r)=>r?{headerToken:stripAuthorizationHeader(t.headerToken||r(ey.Headers.Authorization)),origin:t.origin||r(ey.Headers.Origin),host:t.host||r(ey.Headers.Host),forwardedHost:t.forwardedHost||r(ey.Headers.ForwardedHost),forwardedPort:t.forwardedPort||r(ey.Headers.ForwardedPort),forwardedProto:t.forwardedProto||r(ey.Headers.CloudFrontForwardedProto)||r(ey.Headers.ForwardedProto),referrer:t.referrer||r(ey.Headers.Referrer),userAgent:t.userAgent||r(ey.Headers.UserAgent)}:{};function createAuthenticateRequest(t){let{apiClient:r}=t,{apiKey:n="",secretKey:a="",jwtKey:o="",apiUrl:i=eh,apiVersion:s="v1",frontendApi:l="",proxyUrl:u="",publishableKey:c="",isSatellite:d=!1,domain:h="",audience:p="",userAgent:y}=t.options;return{authenticateRequest:({apiKey:t,secretKey:r,audience:y,frontendApi:m,proxyUrl:g,publishableKey:b,jwtKey:v,isSatellite:S,domain:C,searchParams:w,...A})=>authenticateRequest({...A,apiKey:t||n,secretKey:r||a,audience:y||p,apiUrl:i,apiVersion:s,frontendApi:m||l,proxyUrl:g||u,publishableKey:b||c,isSatellite:S||d,domain:C||h,jwtKey:v||o,searchParams:w}),localInterstitial:({frontendApi:t,publishableKey:r,proxyUrl:n,isSatellite:a,domain:o,...i})=>loadInterstitialFromLocal({...i,frontendApi:t||l,proxyUrl:n||u,publishableKey:r||c,isSatellite:a||d,domain:o||h}),remotePublicInterstitial:({frontendApi:t,publishableKey:r,proxyUrl:n,isSatellite:a,domain:o,userAgent:s,...p})=>loadInterstitialFromBAPI({...p,apiUrl:i,frontendApi:t||l,publishableKey:r||c,proxyUrl:n||u,isSatellite:a||d,domain:o||h,userAgent:s||y}),remotePrivateInterstitial:()=>r.interstitial.getInterstitial(),remotePublicInterstitialUrl:buildPublicInterstitialUrl,debugRequestState}}var buildUrl=(t,r)=>{let n;if(t.startsWith("http"))n=new URL(t);else{if(!r||!r.startsWith("http"))throw Error("destination url or return back url should be an absolute path url!");let a=new URL(r);n=new URL(t,a.origin)}return r&&n.searchParams.set("redirect_url",r),n.toString()};function redirect({redirectAdapter:t,signUpUrl:r,signInUrl:n,frontendApi:a,publishableKey:o}){a?(0,R.deprecated)("frontendApi","Use `publishableKey` instead."):a=B.parsePublishableKey(o)?.frontendApi;let i=function(t){if(!t)return"";let r=t.replace(/(clerk\.accountsstage\.)/,"accountsstage.").replace(/(clerk\.accounts\.|clerk\.)/,"accounts.");return`https://${r}`}(a);return{redirectToSignUp:({returnBackUrl:n}={})=>{r||i||I.throwMissingPublishableKeyError();let a=`${i}/sign-up`;return t(buildUrl(r||a,n))},redirectToSignIn:({returnBackUrl:r}={})=>{n||i||I.throwMissingPublishableKeyError();let a=`${i}/sign-in`;return t(buildUrl(n||a,r))}}}function Clerk(t){let r={...t},n=createBackendApiClient(r),a=createAuthenticateRequest({options:r,apiClient:n}),o={...n,...a,__unstable_options:r};return(0,p.deprecatedObjectProperty)(o,"__unstable_options","Use `createClerkClient({...})` to create a new clerk instance instead."),o}},5742:(t,r,n)=>{let a;try{(a=n(6005).webcrypto)||(a=new(n(3)).w)}catch(t){a=new(n(3)).w}t.exports=a},6749:(t,r,n)=>{let{fetch:a,Blob:o,FormData:i,Headers:s,Request:l,Response:u,AbortController:c}=n(5960);t.exports=a,t.exports.RuntimeBlob=o,t.exports.RuntimeFormData=i,t.exports.RuntimeHeaders=s,t.exports.RuntimeRequest=l,t.exports.RuntimeResponse=u,t.exports.RuntimeAbortController=c,t.exports.RuntimeFetch=a},5513:(t,r,n)=>{n.d(r,{El:()=>esm_ClerkProvider,I8:()=>esm_auth});var a=n(3542),o=n.n(a);let mergeNextClerkPropsWithEnv=t=>({...t,frontendApi:t.frontendApi||process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"",publishableKey:t.publishableKey||"pk_test_dW5pdGVkLWtpbmdmaXNoLTEyLmNsZXJrLmFjY291bnRzLmRldiQ",clerkJSUrl:t.clerkJSUrl||process.env.NEXT_PUBLIC_CLERK_JS,clerkJSVersion:t.clerkJSVersion||process.env.NEXT_PUBLIC_CLERK_JS_VERSION,proxyUrl:t.proxyUrl||process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",domain:t.domain||process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",isSatellite:t.isSatellite||"true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE,signInUrl:t.signInUrl||process.env.NEXT_PUBLIC_CLERK_SIGN_IN_URL||"",signUpUrl:t.signUpUrl||process.env.NEXT_PUBLIC_CLERK_SIGN_UP_URL||"",afterSignInUrl:t.afterSignInUrl||process.env.NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL||"",afterSignUpUrl:t.afterSignUpUrl||process.env.NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL||"",sdkMetadata:{name:"@clerk/nextjs",version:"4.31.3"}});var i=n(5153);let s=(0,i.createProxy)(String.raw`/Users/michellekhanyi/Desktop/Side Projects/Behind-the-seams/node_modules/@clerk/nextjs/dist/esm/app-router/client/ClerkProvider.js`),{__esModule:l,$$typeof:u}=s;s.default;let c=s.ClientClerkProvider;var d=n(3462),isTestEnvironment=()=>!1,isProductionEnvironment=()=>{try{return!0}catch(t){}return!1},h=new Set,chunk_IC4FGZI3_deprecated=(t,r,n)=>{let a=isTestEnvironment()||isProductionEnvironment(),o=null!=n?n:t;h.has(o)||a||(h.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${r}`))},deprecatedObjectProperty=(t,r,n,a)=>{let o=t[r];Object.defineProperty(t,r,{get:()=>(chunk_IC4FGZI3_deprecated(r,n,a),o),set(t){o=t}})};Object.getOwnPropertyDescriptor,Object.getOwnPropertyNames,Object.prototype.hasOwnProperty;let p=process.env.CLERK_JS_VERSION||"";p&&chunk_IC4FGZI3_deprecated("CLERK_JS_VERSION","Use `NEXT_PUBLIC_CLERK_JS_VERSION` environment variable instead."),process.env.NEXT_PUBLIC_CLERK_JS_VERSION,process.env.NEXT_PUBLIC_CLERK_JS;let y=process.env.CLERK_API_URL||"https://api.clerk.dev",m=process.env.CLERK_API_VERSION||"v1",g=process.env.CLERK_API_KEY||"";g&&chunk_IC4FGZI3_deprecated("CLERK_API_KEY","Use `CLERK_SECRET_KEY` environment variable instead.");let b=process.env.CLERK_SECRET_KEY||"",v=process.env.NEXT_PUBLIC_CLERK_FRONTEND_API||"";v&&chunk_IC4FGZI3_deprecated("NEXT_PUBLIC_CLERK_FRONTEND_API","Use `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` environment variable instead.");let S=process.env.NEXT_PUBLIC_CLERK_DOMAIN||"",C=process.env.NEXT_PUBLIC_CLERK_PROXY_URL||"",w="true"===process.env.NEXT_PUBLIC_CLERK_IS_SATELLITE,A=process.env.NEXT_PUBLIC_CLERK_SIGN_IN_URL||"",E=process.env.NEXT_PUBLIC_CLERK_SIGN_UP_URL||"";var P=n(5798);let authAuthHeaderMissing=(t="auth")=>`Clerk: ${t}() was called but Clerk can't detect usage of authMiddleware(). Please ensure the following:
- authMiddleware() is used in your Next.js Middleware.
- Your Middleware matcher is configured to match this route or page.
- If you are using the src directory, make sure the Middleware file is inside of it.

For more details, see https://clerk.com/docs/quickstarts/nextjs
`;function getAuthKeyFromRequest(t,r){var n;let a=((n=d.constants.Attributes[r])in t?t[n]:void 0)||utils_getHeader(t,d.constants.Headers[r]);return a||("AuthStatus"===r||"AuthToken"===r)&&function(t,r){let n;if(isNextRequest(t))return t.nextUrl.searchParams.get(r);if("query"in t&&(n=t.query[r]),!n){let a=(t.url||"").split("?")[1];n=new URLSearchParams(a).get(r)}return n}(t,r)||void 0}function utils_getHeader(t,r){var n,a;return isNextRequest(t)?t.headers.get(r):t.headers[r]||t.headers[r.toLowerCase()]||(null==(a=null==(n=t.socket)?void 0:n._httpMessage)?void 0:a.getHeader(r))}function isNextRequest(t){try{let{headers:r,nextUrl:n,cookies:a}=t||{};return"function"==typeof(null==r?void 0:r.get)&&"function"==typeof(null==n?void 0:n.searchParams.get)&&"function"==typeof(null==a?void 0:a.get)}catch(t){return!1}}let injectSSRStateIntoObject=(t,r)=>{let n={...r};return{...t,__clerk_ssr_state:n}},buildClerkProps=(t,r={})=>{let n;let a=getAuthKeyFromRequest(t,"AuthToken"),o=getAuthKeyFromRequest(t,"AuthStatus"),i=getAuthKeyFromRequest(t,"AuthMessage"),s=getAuthKeyFromRequest(t,"AuthReason"),l={apiKey:g,secretKey:b,apiUrl:y,apiVersion:m,authStatus:o,authMessage:i,authReason:s};if(o&&o===d.AuthStatus.SignedIn){let{payload:t,raw:r}=(0,d.decodeJwt)(a);n=(0,d.signedInAuthObject)(t,{...l,token:r.text})}else n=(0,d.signedOutAuthObject)(l);let u=(0,d.makeAuthObjectSerializable)((0,d.sanitizeAuthObject)({...n,...r}));return injectSSRStateIntoObject({},u)},maskSecretKey=t=>{if(!t||"string"!=typeof t)return t;try{return(t||"").replace(/^(sk_(live|test)_)(.+?)(.{3})$/,"$1*********$4")}catch(t){return""}},logFormatter=t=>(Array.isArray(t)?t:[t]).map(t=>{if("string"==typeof t)return maskSecretKey(t);let r=Object.fromEntries(Object.entries(t).map(([t,r])=>[t,maskSecretKey(r)]));return JSON.stringify(r,null,2)}).join(", "),createDebugLogger=(t,r)=>()=>{let n=[],a=!1;return{enable:()=>{a=!0},debug:(...t)=>{a&&n.push(t.map(t=>"function"==typeof t?t():t))},commit:()=>{if(a){for(let a of(console.log(`[clerk debug start: ${t}]`),n)){let t=r(a);t=t.split("\n").map(t=>`  ${t}`).join("\n"),process.env.VERCEL&&(t=function(t,r){let n=new TextEncoder,a=new TextDecoder("utf-8"),o=n.encode(t),i=o.slice(0,4096);return a.decode(i).replace(/\uFFFD/g,"")}(t,0)),console.log(t)}console.log(`[clerk debug end: ${t}] (@clerk/nextjs=4.31.3,next=13.5.6)`)}}}},withLogger=(t,r)=>(...n)=>{let a="string"==typeof t?createDebugLogger(t,logFormatter):t,o=a(),i=r(o);try{let t=i(...n);if("object"==typeof t&&"then"in t&&"function"==typeof t.then)return t.then(t=>(o.commit(),t)).catch(t=>{throw o.commit(),t});return o.commit(),t}catch(t){throw o.commit(),t}},createGetAuth=({debugLoggerName:t,noAuthStatusMessage:r})=>withLogger(t,t=>(n,a)=>{"true"===utils_getHeader(n,d.constants.Headers.EnableDebug)&&t.enable();let o=getAuthKeyFromRequest(n,"AuthToken"),i=getAuthKeyFromRequest(n,"AuthStatus"),s=getAuthKeyFromRequest(n,"AuthMessage"),l=getAuthKeyFromRequest(n,"AuthReason");if(t.debug("Debug",{authReason:l,authMessage:s,authStatus:i,authToken:o}),!i)throw Error(r);let u={apiKey:(null==a?void 0:a.apiKey)||g,authStatus:i,authMessage:s,secretKey:(null==a?void 0:a.secretKey)||b,authReason:l,authToken:o,apiUrl:y,apiVersion:m};if(t.debug("Options debug",u),i!==d.AuthStatus.SignedIn)return(0,d.signedOutAuthObject)(u);let c=(0,d.decodeJwt)(o);t.debug("JWT debug",c.raw.text);let h=(0,d.signedInAuthObject)(c.payload,{...u,token:c.raw.text});return h&&(h.user&&deprecatedObjectProperty(h,"user","Use `clerkClient.users.getUser` instead."),h.organization&&deprecatedObjectProperty(h,"organization","Use `clerkClient.organizations.getOrganization` instead."),h.session&&deprecatedObjectProperty(h,"session","Use `clerkClient.sessions.getSession` instead.")),h});createGetAuth({debugLoggerName:"getAuth()",noAuthStatusMessage:authAuthHeaderMissing("getAuth")});var k=n(428);let buildRequestLike=()=>{try{let{headers:t}=n(4596);return new k.Z("https://placeholder.com",{headers:t()})}catch(t){if(t&&"message"in t&&"string"==typeof t.message&&t.message.toLowerCase().includes("dynamic server usage"))throw t;throw Error(`Clerk: auth() and currentUser() are only supported in App Router (/app directory).
If you're using /pages, try getAuth() instead.
Original error: ${t}`)}},initialState=()=>buildClerkProps(buildRequestLike());(0,d.Clerk)({apiKey:g,secretKey:b,apiUrl:y,apiVersion:m,userAgent:"@clerk/nextjs@4.31.3",proxyUrl:C,domain:S,isSatellite:w});let setHeader=(t,r,n)=>(t.headers.set(r,n),t);n(8330);let{redirectToSignIn:_,redirectToSignUp:B}=(0,d.redirect)({redirectAdapter:t=>{let r=P.Z.redirect(t);return setHeader(r,d.constants.Headers.ClerkRedirectTo,"true")},signInUrl:A,signUpUrl:E,publishableKey:"pk_test_dW5pdGVkLWtpbmdmaXNoLTEyLmNsZXJrLmFjY291bnRzLmRldiQ",frontendApi:v}),esm_ClerkProvider=function(t){var r;let{children:n,...a}=t,i=null==(r=initialState())?void 0:r.__clerk_ssr_state;return o().createElement(c,{...mergeNextClerkPropsWithEnv(a),initialState:i},n)},esm_auth=()=>{let t=createGetAuth({debugLoggerName:"auth()",noAuthStatusMessage:authAuthHeaderMissing()})(buildRequestLike()),{notFound:r,redirect:a}=n(1412);return t.protect=(n,o)=>{let i=(null==n?void 0:n.redirectUrl)?void 0:n,s=(null==n?void 0:n.redirectUrl)||(null==o?void 0:o.redirectUrl),handleUnauthorized=()=>{s&&a(s),r()};return t.userId?i?"function"==typeof i?i(t.has)?{...t}:handleUnauthorized():t.has(i)?{...t}:handleUnauthorized():{...t}:handleUnauthorized()},t}},8850:t=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};async function callWithRetry(t,r=1,n=5){try{return await t()}catch(o){var a;if(r>=n)throw o;return await (a=2**r*100,new Promise(t=>setTimeout(t,a))),callWithRetry(t,r+1,n)}}((t,n)=>{for(var a in n)r(t,a,{get:n[a],enumerable:!0})})(i,{callWithRetry:()=>callWithRetry}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of a(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=n(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i)},1555:t=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((t,n)=>{for(var a in n)r(t,a,{get:n[a],enumerable:!0})})(i,{deprecated:()=>deprecated,deprecatedObjectProperty:()=>deprecatedObjectProperty,deprecatedProperty:()=>deprecatedProperty}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of a(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=n(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i);var isTestEnvironment=()=>!1,isProductionEnvironment=()=>{try{return!0}catch(t){}return!1},s=new Set,deprecated=(t,r,n)=>{let a=isTestEnvironment()||isProductionEnvironment(),o=null!=n?n:t;s.has(o)||a||(s.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${r}`))},deprecatedProperty=(t,r,n,a=!1)=>{let o=a?t:t.prototype,i=o[r];Object.defineProperty(o,r,{get:()=>(deprecated(r,n,`${t.name}:${r}`),i),set(t){i=t}})},deprecatedObjectProperty=(t,r,n,a)=>{let o=t[r];Object.defineProperty(t,r,{get:()=>(deprecated(r,n,a),o),set(t){o=t}})}},335:t=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((t,n)=>{for(var a in n)r(t,a,{get:n[a],enumerable:!0})})(i,{ClerkAPIResponseError:()=>l,ClerkRuntimeError:()=>u,EmailLinkError:()=>d,EmailLinkErrorCode:()=>p,MagicLinkError:()=>c,MagicLinkErrorCode:()=>h,buildErrorThrower:()=>buildErrorThrower,is4xxError:()=>is4xxError,isClerkAPIResponseError:()=>isClerkAPIResponseError,isClerkRuntimeError:()=>isClerkRuntimeError,isEmailLinkError:()=>isEmailLinkError,isKnownError:()=>isKnownError,isMagicLinkError:()=>isMagicLinkError,isMetamaskError:()=>isMetamaskError,isNetworkError:()=>isNetworkError,isPasswordPwnedError:()=>isPasswordPwnedError,isUnauthorizedError:()=>isUnauthorizedError,isUserLockedError:()=>isUserLockedError,parseError:()=>parseError,parseErrors:()=>parseErrors}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of a(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=n(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i);var isTestEnvironment=()=>!1,isProductionEnvironment=()=>{try{return!0}catch(t){}return!1},s=new Set,deprecated=(t,r,n)=>{let a=isTestEnvironment()||isProductionEnvironment(),o=null!=n?n:t;s.has(o)||a||(s.add(o),console.warn(`Clerk - DEPRECATION WARNING: "${t}" is deprecated and will be removed in the next major release.
${r}`))};function isUnauthorizedError(t){var r,n;let a=null==t?void 0:t.status,o=null==(n=null==(r=null==t?void 0:t.errors)?void 0:r[0])?void 0:n.code;return"authentication_invalid"===o&&401===a}function is4xxError(t){let r=null==t?void 0:t.status;return!!r&&r>=400&&r<500}function isNetworkError(t){let r=(`${t.message}${t.name}`||"").toLowerCase().replace(/\s+/g,"");return r.includes("networkerror")}function isKnownError(t){return isClerkAPIResponseError(t)||isMetamaskError(t)||isClerkRuntimeError(t)}function isClerkAPIResponseError(t){return"clerkError"in t}function isClerkRuntimeError(t){return"clerkRuntimeError"in t}function isMetamaskError(t){return"code"in t&&[4001,32602,32603].includes(t.code)&&"message"in t}function isUserLockedError(t){var r,n;return isClerkAPIResponseError(t)&&(null==(n=null==(r=t.errors)?void 0:r[0])?void 0:n.code)==="user_locked"}function parseErrors(t=[]){return t.length>0?t.map(parseError):[]}function isPasswordPwnedError(t){var r,n;return isClerkAPIResponseError(t)&&(null==(n=null==(r=t.errors)?void 0:r[0])?void 0:n.code)==="form_password_pwned"}function parseError(t){var r,n,a,o,i;return{code:t.code,message:t.message,longMessage:t.long_message,meta:{paramName:null==(r=null==t?void 0:t.meta)?void 0:r.param_name,sessionId:null==(n=null==t?void 0:t.meta)?void 0:n.session_id,emailAddresses:null==(a=null==t?void 0:t.meta)?void 0:a.email_addresses,identifiers:null==(o=null==t?void 0:t.meta)?void 0:o.identifiers,zxcvbn:null==(i=null==t?void 0:t.meta)?void 0:i.zxcvbn}}}var l=class _ClerkAPIResponseError extends Error{constructor(t,{data:r,status:n,clerkTraceId:a}){super(t),this.toString=()=>{let t=`[${this.name}]
Message:${this.message}
Status:${this.status}
Serialized errors: ${this.errors.map(t=>JSON.stringify(t))}`;return this.clerkTraceId&&(t+=`
Clerk Trace ID: ${this.clerkTraceId}`),t},Object.setPrototypeOf(this,_ClerkAPIResponseError.prototype),this.status=n,this.message=t,this.clerkTraceId=a,this.clerkError=!0,this.errors=parseErrors(r)}},u=class _ClerkRuntimeError extends Error{constructor(t,{code:r}){super(t),this.toString=()=>`[${this.name}]
Message:${this.message}`,Object.setPrototypeOf(this,_ClerkRuntimeError.prototype),this.code=r,this.message=t,this.clerkRuntimeError=!0}},c=class _MagicLinkError extends Error{constructor(t){super(t),this.code=t,Object.setPrototypeOf(this,_MagicLinkError.prototype),deprecated("MagicLinkError","Use `EmailLinkError` instead.")}},d=class _EmailLinkError extends Error{constructor(t){super(t),this.code=t,Object.setPrototypeOf(this,_EmailLinkError.prototype)}};function isMagicLinkError(t){return deprecated("isMagicLinkError","Use `isEmailLinkError` instead."),t instanceof c}function isEmailLinkError(t){return t instanceof d}var h=new Proxy({Expired:"expired",Failed:"failed"},{get:(t,r,n)=>(deprecated("MagicLinkErrorCode","Use `EmailLinkErrorCode` instead."),Reflect.get(t,r,n))}),p={Expired:"expired",Failed:"failed"},y=Object.freeze({InvalidFrontendApiErrorMessage:"The frontendApi passed to Clerk is invalid. You can get your Frontend API key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys."});function buildErrorThrower({packageName:t,customMessages:r}){let n=t,a={...y,...r};function buildMessage(t,r){if(!r)return`${n}: ${t}`;let a=t,o=t.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(let t of o){let n=(r[t[1]]||"").toString();a=a.replace(`{{${t[1]}}}`,n)}return`${n}: ${a}`}return{setPackageName({packageName:t}){return"string"==typeof t&&(n=t),this},setMessages({customMessages:t}){return Object.assign(a,t||{}),this},throwInvalidPublishableKeyError(t){throw Error(buildMessage(a.InvalidPublishableKeyErrorMessage,t))},throwInvalidFrontendApiError(t){throw Error(buildMessage(a.InvalidFrontendApiErrorMessage,t))},throwInvalidProxyUrl(t){throw Error(buildMessage(a.InvalidProxyUrlErrorMessage,t))},throwMissingPublishableKeyError(){throw Error(buildMessage(a.MissingPublishableKeyErrorMessage))}}}},9883:t=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((t,n)=>{for(var a in n)r(t,a,{get:n[a],enumerable:!0})})(i,{isomorphicAtob:()=>isomorphicAtob}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of a(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=n(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i);var isomorphicAtob=t=>"undefined"!=typeof atob&&"function"==typeof atob?atob(t):"undefined"!=typeof global&&global.Buffer?new global.Buffer(t,"base64").toString():t},8905:t=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};((t,n)=>{for(var a in n)r(t,a,{get:n[a],enumerable:!0})})(i,{buildPublishableKey:()=>buildPublishableKey,createDevOrStagingUrlCache:()=>createDevOrStagingUrlCache,isDevelopmentFromApiKey:()=>isDevelopmentFromApiKey,isLegacyFrontendApiKey:()=>isLegacyFrontendApiKey,isProductionFromApiKey:()=>isProductionFromApiKey,isPublishableKey:()=>isPublishableKey,parsePublishableKey:()=>parsePublishableKey}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of a(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=n(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i);var isomorphicAtob=t=>"undefined"!=typeof atob&&"function"==typeof atob?atob(t):"undefined"!=typeof global&&global.Buffer?new global.Buffer(t,"base64").toString():t,s="pk_live_",l="pk_test_",u=/^(([a-z]+)-){2}([0-9]{1,2})\.clerk\.accounts([a-z.]*)(dev|com)$/i;function buildPublishableKey(t){let r=u.test(t)?l:s;return`${r}${btoa(`${t}$`)}`}function parsePublishableKey(t){if(!isPublishableKey(t=t||""))return null;let r=t.startsWith(s)?"production":"development",n=isomorphicAtob(t.split("_")[2]);return n.endsWith("$")?{instanceType:r,frontendApi:n=n.slice(0,-1)}:null}function isPublishableKey(t){t=t||"";let r=t.startsWith(s)||t.startsWith(l),n=isomorphicAtob(t.split("_")[2]||"").endsWith("$");return r&&n}function isLegacyFrontendApiKey(t){return(t=t||"").startsWith("clerk.")}function createDevOrStagingUrlCache(){let t=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],r=new Map;return{isDevOrStagingUrl:n=>{if(!n)return!1;let a="string"==typeof n?n:n.hostname,o=r.get(a);return void 0===o&&(o=t.some(t=>a.endsWith(t)),r.set(a,o)),o}}}function isDevelopmentFromApiKey(t){return t.startsWith("test_")||t.startsWith("sk_test_")}function isProductionFromApiKey(t){return t.startsWith("live_")||t.startsWith("sk_live_")}},9804:t=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function parseSearchParams(t=""){return t.startsWith("?")&&(t=t.slice(1)),new URLSearchParams(t)}function stripScheme(t=""){return(t||"").replace(/^.+:\/\//,"")}function addClerkPrefix(t){let r;if(!t)return"";if(t.match(/^(clerk\.)+\w*$/))r=/(clerk\.)*(?=clerk\.)/;else{if(t.match(/\.clerk.accounts/))return t;r=/^(clerk\.)*/gi}let n=t.replace(r,"");return`clerk.${n}`}((t,n)=>{for(var a in n)r(t,a,{get:n[a],enumerable:!0})})(i,{addClerkPrefix:()=>addClerkPrefix,getClerkJsMajorVersionOrTag:()=>getClerkJsMajorVersionOrTag,getScriptUrl:()=>getScriptUrl,parseSearchParams:()=>parseSearchParams,stripScheme:()=>stripScheme}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of a(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=n(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i);var getClerkJsMajorVersionOrTag=(t,r)=>!r&&function(t){return t.endsWith(".lclstage.dev")||t.endsWith(".stgstage.dev")||t.endsWith(".clerkstage.dev")||t.endsWith(".accountsstage.dev")}(t)?"canary":r&&r.split(".")[0]||"latest",getScriptUrl=(t,{pkgVersion:r="4.71.2",clerkJSVersion:n})=>{let a=t.replace(/http(s)?:\/\//,""),o=getClerkJsMajorVersionOrTag(t,r);return`https://${a}/npm/@clerk/clerk-js@${n||o}/dist/clerk.browser.js`}},2267:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnConvert=void 0;let a=n(9525),o=n(5693),i=n(2277),s=n(8636);let AsnConvert=class AsnConvert{static serialize(t){return s.AsnSerializer.serialize(t)}static parse(t,r){return i.AsnParser.parse(t,r)}static toString(t){let r=o.BufferSourceConverter.isBufferSource(t)?o.BufferSourceConverter.toArrayBuffer(t):AsnConvert.serialize(t),n=a.fromBER(r);if(-1===n.offset)throw Error(`Cannot decode ASN.1 data. ${n.result.error}`);return n.result.toString()}};r.AsnConvert=AsnConvert},7351:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.defaultConverter=r.AsnNullConverter=r.AsnGeneralizedTimeConverter=r.AsnUTCTimeConverter=r.AsnCharacterStringConverter=r.AsnGeneralStringConverter=r.AsnVisibleStringConverter=r.AsnGraphicStringConverter=r.AsnIA5StringConverter=r.AsnVideotexStringConverter=r.AsnTeletexStringConverter=r.AsnPrintableStringConverter=r.AsnNumericStringConverter=r.AsnUniversalStringConverter=r.AsnBmpStringConverter=r.AsnUtf8StringConverter=r.AsnConstructedOctetStringConverter=r.AsnOctetStringConverter=r.AsnBooleanConverter=r.AsnObjectIdentifierConverter=r.AsnBitStringConverter=r.AsnIntegerBigIntConverter=r.AsnIntegerArrayBufferConverter=r.AsnEnumeratedConverter=r.AsnIntegerConverter=r.AsnAnyConverter=void 0;let a=n(9525),o=n(4029),i=n(1369);function createStringConverter(t){return{fromASN:t=>t.valueBlock.value,toASN:r=>new t({value:r})}}r.AsnAnyConverter={fromASN:t=>t instanceof a.Null?null:t.valueBeforeDecodeView,toASN:t=>{if(null===t)return new a.Null;let r=a.fromBER(t);if(r.result.error)throw Error(r.result.error);return r.result}},r.AsnIntegerConverter={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new a.Integer({value:+t})},r.AsnEnumeratedConverter={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new a.Enumerated({value:t})},r.AsnIntegerArrayBufferConverter={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new a.Integer({valueHex:t})},r.AsnIntegerBigIntConverter={fromASN:t=>t.toBigInt(),toASN:t=>a.Integer.fromBigInt(t)},r.AsnBitStringConverter={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new a.BitString({valueHex:t})},r.AsnObjectIdentifierConverter={fromASN:t=>t.valueBlock.toString(),toASN:t=>new a.ObjectIdentifier({value:t})},r.AsnBooleanConverter={fromASN:t=>t.valueBlock.value,toASN:t=>new a.Boolean({value:t})},r.AsnOctetStringConverter={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new a.OctetString({valueHex:t})},r.AsnConstructedOctetStringConverter={fromASN:t=>new i.OctetString(t.getValue()),toASN:t=>t.toASN()},r.AsnUtf8StringConverter=createStringConverter(a.Utf8String),r.AsnBmpStringConverter=createStringConverter(a.BmpString),r.AsnUniversalStringConverter=createStringConverter(a.UniversalString),r.AsnNumericStringConverter=createStringConverter(a.NumericString),r.AsnPrintableStringConverter=createStringConverter(a.PrintableString),r.AsnTeletexStringConverter=createStringConverter(a.TeletexString),r.AsnVideotexStringConverter=createStringConverter(a.VideotexString),r.AsnIA5StringConverter=createStringConverter(a.IA5String),r.AsnGraphicStringConverter=createStringConverter(a.GraphicString),r.AsnVisibleStringConverter=createStringConverter(a.VisibleString),r.AsnGeneralStringConverter=createStringConverter(a.GeneralString),r.AsnCharacterStringConverter=createStringConverter(a.CharacterString),r.AsnUTCTimeConverter={fromASN:t=>t.toDate(),toASN:t=>new a.UTCTime({valueDate:t})},r.AsnGeneralizedTimeConverter={fromASN:t=>t.toDate(),toASN:t=>new a.GeneralizedTime({valueDate:t})},r.AsnNullConverter={fromASN:()=>null,toASN:()=>new a.Null},r.defaultConverter=function(t){switch(t){case o.AsnPropTypes.Any:return r.AsnAnyConverter;case o.AsnPropTypes.BitString:return r.AsnBitStringConverter;case o.AsnPropTypes.BmpString:return r.AsnBmpStringConverter;case o.AsnPropTypes.Boolean:return r.AsnBooleanConverter;case o.AsnPropTypes.CharacterString:return r.AsnCharacterStringConverter;case o.AsnPropTypes.Enumerated:return r.AsnEnumeratedConverter;case o.AsnPropTypes.GeneralString:return r.AsnGeneralStringConverter;case o.AsnPropTypes.GeneralizedTime:return r.AsnGeneralizedTimeConverter;case o.AsnPropTypes.GraphicString:return r.AsnGraphicStringConverter;case o.AsnPropTypes.IA5String:return r.AsnIA5StringConverter;case o.AsnPropTypes.Integer:return r.AsnIntegerConverter;case o.AsnPropTypes.Null:return r.AsnNullConverter;case o.AsnPropTypes.NumericString:return r.AsnNumericStringConverter;case o.AsnPropTypes.ObjectIdentifier:return r.AsnObjectIdentifierConverter;case o.AsnPropTypes.OctetString:return r.AsnOctetStringConverter;case o.AsnPropTypes.PrintableString:return r.AsnPrintableStringConverter;case o.AsnPropTypes.TeletexString:return r.AsnTeletexStringConverter;case o.AsnPropTypes.UTCTime:return r.AsnUTCTimeConverter;case o.AsnPropTypes.UniversalString:return r.AsnUniversalStringConverter;case o.AsnPropTypes.Utf8String:return r.AsnUtf8StringConverter;case o.AsnPropTypes.VideotexString:return r.AsnVideotexStringConverter;case o.AsnPropTypes.VisibleString:return r.AsnVisibleStringConverter;default:return null}}},6165:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnProp=r.AsnSequenceType=r.AsnSetType=r.AsnChoiceType=r.AsnType=void 0;let a=n(7351),o=n(4029),i=n(9957);r.AsnType=t=>r=>{let n;i.schemaStorage.has(r)?n=i.schemaStorage.get(r):(n=i.schemaStorage.createDefault(r),i.schemaStorage.set(r,n)),Object.assign(n,t)},r.AsnChoiceType=()=>(0,r.AsnType)({type:o.AsnTypeTypes.Choice}),r.AsnSetType=t=>(0,r.AsnType)({type:o.AsnTypeTypes.Set,...t}),r.AsnSequenceType=t=>(0,r.AsnType)({type:o.AsnTypeTypes.Sequence,...t}),r.AsnProp=t=>(r,n)=>{let o;i.schemaStorage.has(r.constructor)?o=i.schemaStorage.get(r.constructor):(o=i.schemaStorage.createDefault(r.constructor),i.schemaStorage.set(r.constructor,o));let s=Object.assign({},t);if("number"==typeof s.type&&!s.converter){let o=a.defaultConverter(t.type);if(!o)throw Error(`Cannot get default converter for property '${n}' of ${r.constructor.name}`);s.converter=o}o.items[n]=s}},4029:(t,r)=>{var n,a;Object.defineProperty(r,"__esModule",{value:!0}),r.AsnPropTypes=r.AsnTypeTypes=void 0,function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"}(n||(r.AsnTypeTypes=n={})),function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"}(a||(r.AsnPropTypes=a={}))},5259:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});let a=n(7175);a.__exportStar(n(682),r)},682:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSchemaValidationError=void 0,r.AsnSchemaValidationError=class extends Error{constructor(){super(...arguments),this.schemas=[]}}},2478:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isArrayEqual=r.isTypeOfArray=r.isConvertible=void 0,r.isConvertible=function isConvertible(t){return"function"==typeof t&&t.prototype?!!t.prototype.toASN&&!!t.prototype.fromASN||isConvertible(t.prototype):!!(t&&"object"==typeof t&&"toASN"in t&&"fromASN"in t)},r.isTypeOfArray=function isTypeOfArray(t){var r;if(t){let n=Object.getPrototypeOf(t);return(null===(r=null==n?void 0:n.prototype)||void 0===r?void 0:r.constructor)===Array||isTypeOfArray(n)}return!1},r.isArrayEqual=function(t,r){if(!(t&&r)||t.byteLength!==r.byteLength)return!1;let n=new Uint8Array(t),a=new Uint8Array(r);for(let r=0;r<t.byteLength;r++)if(n[r]!==a[r])return!1;return!0}},1087:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSerializer=r.AsnParser=r.AsnPropTypes=r.AsnTypeTypes=r.AsnSetType=r.AsnSequenceType=r.AsnChoiceType=r.AsnType=r.AsnProp=void 0;let a=n(7175);a.__exportStar(n(7351),r),a.__exportStar(n(1369),r);var o=n(6165);Object.defineProperty(r,"AsnProp",{enumerable:!0,get:function(){return o.AsnProp}}),Object.defineProperty(r,"AsnType",{enumerable:!0,get:function(){return o.AsnType}}),Object.defineProperty(r,"AsnChoiceType",{enumerable:!0,get:function(){return o.AsnChoiceType}}),Object.defineProperty(r,"AsnSequenceType",{enumerable:!0,get:function(){return o.AsnSequenceType}}),Object.defineProperty(r,"AsnSetType",{enumerable:!0,get:function(){return o.AsnSetType}});var i=n(4029);Object.defineProperty(r,"AsnTypeTypes",{enumerable:!0,get:function(){return i.AsnTypeTypes}}),Object.defineProperty(r,"AsnPropTypes",{enumerable:!0,get:function(){return i.AsnPropTypes}});var s=n(2277);Object.defineProperty(r,"AsnParser",{enumerable:!0,get:function(){return s.AsnParser}});var l=n(8636);Object.defineProperty(r,"AsnSerializer",{enumerable:!0,get:function(){return l.AsnSerializer}}),a.__exportStar(n(5259),r),a.__exportStar(n(3250),r),a.__exportStar(n(2267),r)},3250:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnArray=void 0,r.AsnArray=class extends Array{constructor(t=[]){if("number"==typeof t)super(t);else for(let r of(super(),t))this.push(r)}}},2277:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnParser=void 0;let a=n(9525),o=n(4029),i=n(7351),s=n(5259),l=n(2478),u=n(9957);r.AsnParser=class{static parse(t,r){let n=a.fromBER(t);if(n.result.error)throw Error(n.result.error);let o=this.fromASN(n.result,r);return o}static fromASN(t,r){var n;try{if((0,l.isConvertible)(r)){let n=new r;return n.fromASN(t)}let c=u.schemaStorage.get(r);u.schemaStorage.cache(r);let d=c.schema;if(t.constructor===a.Constructed&&c.type!==o.AsnTypeTypes.Choice)for(let r in d=new a.Constructed({idBlock:{tagClass:3,tagNumber:t.idBlock.tagNumber},value:c.schema.valueBlock.value}),c.items)delete t[r];let h=a.compareSchema({},t,d);if(!h.verified)throw new s.AsnSchemaValidationError(`Data does not match to ${r.name} ASN1 schema. ${h.result.error}`);let p=new r;if((0,l.isTypeOfArray)(r)){if(!("value"in t.valueBlock&&Array.isArray(t.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let n=c.itemType;if("number"!=typeof n)return r.from(t.valueBlock.value,t=>this.fromASN(t,n));{let a=i.defaultConverter(n);if(!a)throw Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);return r.from(t.valueBlock.value,t=>a.fromASN(t))}}for(let t in c.items){let r=h.result[t];if(!r)continue;let i=c.items[t],s=i.type;if("number"==typeof s||(0,l.isConvertible)(s)){let u=null!==(n=i.converter)&&void 0!==n?n:(0,l.isConvertible)(s)?new s:null;if(!u)throw Error("Converter is empty");if(i.repeated){if(i.implicit){let n="sequence"===i.repeated?a.Sequence:a.Set,o=new n;o.valueBlock=r.valueBlock;let s=a.fromBER(o.toBER(!1));if(-1===s.offset)throw Error(`Cannot parse the child item. ${s.result.error}`);if(!("value"in s.result.valueBlock&&Array.isArray(s.result.valueBlock.value)))throw Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");let l=s.result.valueBlock.value;p[t]=Array.from(l,t=>u.fromASN(t))}else p[t]=Array.from(r,t=>u.fromASN(t))}else{let n=r;if(i.implicit){let t;if((0,l.isConvertible)(s))t=new s().toSchema("");else{let r=o.AsnPropTypes[s],n=a[r];if(!n)throw Error(`Cannot get '${r}' class from asn1js module`);t=new n}t.valueBlock=n.valueBlock,n=a.fromBER(t.toBER(!1)).result}p[t]=u.fromASN(n)}}else if(i.repeated){if(!Array.isArray(r))throw Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");p[t]=Array.from(r,t=>this.fromASN(t,s))}else p[t]=this.fromASN(r,s)}return p}catch(t){throw t instanceof s.AsnSchemaValidationError&&t.schemas.push(r.name),t}}}},2053:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSchemaStorage=void 0;let a=n(9525),o=n(4029),i=n(2478);r.AsnSchemaStorage=class{constructor(){this.items=new WeakMap}has(t){return this.items.has(t)}get(t,r=!1){let n=this.items.get(t);if(!n)throw Error(`Cannot get schema for '${t.prototype.constructor.name}' target`);if(r&&!n.schema)throw Error(`Schema '${t.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return n}cache(t){let r=this.get(t);r.schema||(r.schema=this.create(t,!0))}createDefault(t){let r={type:o.AsnTypeTypes.Sequence,items:{}},n=this.findParentSchema(t);return n&&(Object.assign(r,n),r.items=Object.assign({},r.items,n.items)),r}create(t,r){let n=this.items.get(t)||this.createDefault(t),s=[];for(let t in n.items){let l;let u=n.items[t],c=r?t:"";if("number"==typeof u.type){let t=o.AsnPropTypes[u.type],r=a[t];if(!r)throw Error(`Cannot get ASN1 class by name '${t}'`);l=new r({name:c})}else if((0,i.isConvertible)(u.type)){let t=new u.type;l=t.toSchema(c)}else if(u.optional){let t=this.get(u.type);t.type===o.AsnTypeTypes.Choice?l=new a.Any({name:c}):(l=this.create(u.type,!1)).name=c}else l=new a.Any({name:c});let d=!!u.optional||void 0!==u.defaultValue;if(u.repeated){l.name="";let t="set"===u.repeated?a.Set:a.Sequence;l=new t({name:"",value:[new a.Repeated({name:c,value:l})]})}if(null!==u.context&&void 0!==u.context){if(u.implicit){if("number"==typeof u.type||(0,i.isConvertible)(u.type)){let t=u.repeated?a.Constructed:a.Primitive;s.push(new t({name:c,optional:d,idBlock:{tagClass:3,tagNumber:u.context}}))}else{this.cache(u.type);let t=!!u.repeated,r=t?l:this.get(u.type,!0).schema;r="valueBlock"in r?r.valueBlock.value:r.value,s.push(new a.Constructed({name:t?"":c,optional:d,idBlock:{tagClass:3,tagNumber:u.context},value:r}))}}else s.push(new a.Constructed({optional:d,idBlock:{tagClass:3,tagNumber:u.context},value:[l]}))}else l.optional=d,s.push(l)}switch(n.type){case o.AsnTypeTypes.Sequence:return new a.Sequence({value:s,name:""});case o.AsnTypeTypes.Set:return new a.Set({value:s,name:""});case o.AsnTypeTypes.Choice:return new a.Choice({value:s,name:""});default:throw Error("Unsupported ASN1 type in use")}}set(t,r){return this.items.set(t,r),this}findParentSchema(t){let r=Object.getPrototypeOf(t);if(r){let t=this.items.get(r);return t||this.findParentSchema(r)}return null}}},8636:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AsnSerializer=void 0;let a=n(9525),o=n(7351),i=n(4029),s=n(2478),l=n(9957);let AsnSerializer=class AsnSerializer{static serialize(t){return t instanceof a.BaseBlock?t.toBER(!1):this.toASN(t).toBER(!1)}static toASN(t){let r;if(t&&"object"==typeof t&&(0,s.isConvertible)(t))return t.toASN();if(!(t&&"object"==typeof t))throw TypeError("Parameter 1 should be type of Object.");let n=t.constructor,u=l.schemaStorage.get(n);l.schemaStorage.cache(n);let c=[];if(u.itemType){if(!Array.isArray(t))throw TypeError("Parameter 1 should be type of Array.");if("number"==typeof u.itemType){let r=o.defaultConverter(u.itemType);if(!r)throw Error(`Cannot get default converter for array item of ${n.name} ASN1 schema`);c=t.map(t=>r.toASN(t))}else c=t.map(t=>this.toAsnItem({type:u.itemType},"[]",n,t))}else for(let r in u.items){let o=u.items[r],i=t[r];if(void 0===i||o.defaultValue===i||"object"==typeof o.defaultValue&&"object"==typeof i&&(0,s.isArrayEqual)(this.serialize(o.defaultValue),this.serialize(i)))continue;let l=AsnSerializer.toAsnItem(o,r,n,i);if("number"==typeof o.context){if(o.implicit){if(!o.repeated&&("number"==typeof o.type||(0,s.isConvertible)(o.type))){let t={};t.valueHex=l instanceof a.Null?l.valueBeforeDecodeView:l.valueBlock.toBER(),c.push(new a.Primitive({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},...t}))}else c.push(new a.Constructed({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:l.valueBlock.value}))}else c.push(new a.Constructed({optional:o.optional,idBlock:{tagClass:3,tagNumber:o.context},value:[l]}))}else o.repeated?c=c.concat(l):c.push(l)}switch(u.type){case i.AsnTypeTypes.Sequence:r=new a.Sequence({value:c});break;case i.AsnTypeTypes.Set:r=new a.Set({value:c});break;case i.AsnTypeTypes.Choice:if(!c[0])throw Error(`Schema '${n.name}' has wrong data. Choice cannot be empty.`);r=c[0]}return r}static toAsnItem(t,r,n,o){let s;if("number"==typeof t.type){let l=t.converter;if(!l)throw Error(`Property '${r}' doesn't have converter for type ${i.AsnPropTypes[t.type]} in schema '${n.name}'`);if(t.repeated){if(!Array.isArray(o))throw TypeError("Parameter 'objProp' should be type of Array.");let r=Array.from(o,t=>l.toASN(t)),n="sequence"===t.repeated?a.Sequence:a.Set;s=new n({value:r})}else s=l.toASN(o)}else if(t.repeated){if(!Array.isArray(o))throw TypeError("Parameter 'objProp' should be type of Array.");let r=Array.from(o,t=>this.toASN(t)),n="sequence"===t.repeated?a.Sequence:a.Set;s=new n({value:r})}else s=this.toASN(o);return s}};r.AsnSerializer=AsnSerializer},9957:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.schemaStorage=void 0;let a=n(2053);r.schemaStorage=new a.AsnSchemaStorage},4961:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BitString=void 0;let a=n(9525),o=n(5693);r.BitString=class{constructor(t,r=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),t){if("number"==typeof t)this.fromNumber(t);else if(o.BufferSourceConverter.isBufferSource(t))this.unusedBits=r,this.value=o.BufferSourceConverter.toArrayBuffer(t);else throw TypeError("Unsupported type of 'params' argument for BitString")}}fromASN(t){if(!(t instanceof a.BitString))throw TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=t.valueBlock.unusedBits,this.value=t.valueBlock.valueHex,this}toASN(){return new a.BitString({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(t){return new a.BitString({name:t})}toNumber(){let t="",r=new Uint8Array(this.value);for(let n of r)t+=n.toString(2).padStart(8,"0");return t=t.split("").reverse().join(""),this.unusedBits&&(t=t.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(t,2)}fromNumber(t){let r=t.toString(2),n=r.length+7>>3;this.unusedBits=(n<<3)-r.length;let a=new Uint8Array(n);r=r.padStart(n<<3,"0").split("").reverse().join("");let o=0;for(;o<n;)a[o]=parseInt(r.slice(o<<3,(o<<3)+8),2),o++;this.value=a.buffer}}},1369:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});let a=n(7175);a.__exportStar(n(4961),r),a.__exportStar(n(4252),r)},4252:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OctetString=void 0;let a=n(9525),o=n(5693);r.OctetString=class{get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}constructor(t){"number"==typeof t?this.buffer=new ArrayBuffer(t):o.BufferSourceConverter.isBufferSource(t)?this.buffer=o.BufferSourceConverter.toArrayBuffer(t):Array.isArray(t)?this.buffer=new Uint8Array(t):this.buffer=new ArrayBuffer(0)}fromASN(t){if(!(t instanceof a.OctetString))throw TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=t.valueBlock.valueHex,this}toASN(){return new a.OctetString({valueHex:this.buffer})}toSchema(t){return new a.OctetString({name:t})}}},5854:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0});let JsonError=class JsonError extends Error{constructor(t,r){super(r?`${t}. See the inner exception for more details.`:t),this.message=t,this.innerError=r}};let TransformError=class TransformError extends JsonError{constructor(t,r,n){super(r,n),this.schema=t}};let ParserError=class ParserError extends TransformError{constructor(t,r,n){super(t,`JSON doesn't match to '${t.target.name}' schema. ${r}`,n)}};let ValidationError=class ValidationError extends JsonError{};let SerializerError=class SerializerError extends JsonError{constructor(t,r,n){super(`Cannot serialize by '${t}' schema. ${r}`,n),this.schemaName=t}};let KeyError=class KeyError extends ParserError{constructor(t,r,n={}){super(t,"Some keys doesn't match to schema"),this.keys=r,this.errors=n}};function throwIfTypeIsWrong(t,n){if(!function(t,n){switch(n){case r.JsonPropTypes.Boolean:return"boolean"==typeof t;case r.JsonPropTypes.Number:return"number"==typeof t;case r.JsonPropTypes.String:return"string"==typeof t}return!0}(t,n))throw TypeError(`Value must be ${r.JsonPropTypes[n]}`)}function isConvertible(t){return t&&t.prototype?!!t.prototype.toJSON&&!!t.prototype.fromJSON||isConvertible(t.prototype):!!(t&&t.toJSON&&t.fromJSON)}!function(t){t[t.Any=0]="Any",t[t.Boolean=1]="Boolean",t[t.Number=2]="Number",t[t.String=3]="String"}(r.JsonPropTypes||(r.JsonPropTypes={}));let n="default",a=new class{constructor(){this.items=new Map}has(t){return this.items.has(t)||!!this.findParentSchema(t)}get(t){let r=this.items.get(t)||this.findParentSchema(t);if(!r)throw Error("Cannot get schema for current target");return r}create(t){let r={names:{}},n=this.findParentSchema(t);if(n)for(let t in Object.assign(r,n),r.names={},n.names)r.names[t]=Object.assign({},n.names[t]);return r.target=t,r}set(t,r){return this.items.set(t,r),this}findParentSchema(t){let r=t.__proto__;if(r){let t=this.items.get(r);return t||this.findParentSchema(r)}return null}};let PatternValidation=class PatternValidation{constructor(t){this.pattern=new RegExp(t)}validate(t){let r=new RegExp(this.pattern.source,this.pattern.flags);if("string"!=typeof t)throw new ValidationError("Incoming value must be string");if(!r.exec(t))throw new ValidationError(`Value doesn't match to pattern '${r.toString()}'`)}};let InclusiveValidation=class InclusiveValidation{constructor(t=Number.MIN_VALUE,r=Number.MAX_VALUE){this.min=t,this.max=r}validate(t){if(throwIfTypeIsWrong(t,r.JsonPropTypes.Number),!(this.min<=t&&t<=this.max)){let t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason [${t},${r}]`)}}};let ExclusiveValidation=class ExclusiveValidation{constructor(t=Number.MIN_VALUE,r=Number.MAX_VALUE){this.min=t,this.max=r}validate(t){if(throwIfTypeIsWrong(t,r.JsonPropTypes.Number),!(this.min<t&&t<this.max)){let t=this.min===Number.MIN_VALUE?"MIN":this.min,r=this.max===Number.MAX_VALUE?"MAX":this.max;throw new ValidationError(`Value doesn't match to diapason (${t},${r})`)}}};let LengthValidation=class LengthValidation{constructor(t,r,n){this.length=t,this.minLength=r,this.maxLength=n}validate(t){if(void 0!==this.length){if(t.length!==this.length)throw new ValidationError(`Value length must be exactly ${this.length}.`);return}if(void 0!==this.minLength&&t.length<this.minLength)throw new ValidationError(`Value length must be more than ${this.minLength}.`);if(void 0!==this.maxLength&&t.length>this.maxLength)throw new ValidationError(`Value length must be less than ${this.maxLength}.`)}};let EnumerationValidation=class EnumerationValidation{constructor(t){this.enumeration=t}validate(t){if(throwIfTypeIsWrong(t,r.JsonPropTypes.String),!this.enumeration.includes(t))throw new ValidationError(`Value must be one of ${this.enumeration.map(t=>`'${t}'`).join(", ")}`)}};let JsonTransform=class JsonTransform{static checkValues(t,r){let n=Array.isArray(t)?t:[t];for(let a of n)for(let n of r.validations)n instanceof LengthValidation&&r.repeated?n.validate(t):n.validate(a)}static checkTypes(t,r){if(r.repeated&&!Array.isArray(t))throw TypeError("Value must be Array");if("number"==typeof r.type){let n=Array.isArray(t)?t:[t];for(let t of n)throwIfTypeIsWrong(t,r.type)}}static getSchemaByName(t,r=n){return{...t.names[n],...t.names[r]}}};let JsonParser=class JsonParser extends JsonTransform{static parse(t,r){let n=JSON.parse(t);return this.fromJSON(n,r)}static fromJSON(t,r){let o=r.targetSchema,i=r.schemaName||n,s=new o;if(isConvertible(s))return s.fromJSON(t);let l=a.get(o),u=this.getSchemaByName(l,i),c={};for(let n in r.strictProperty&&!Array.isArray(t)&&JsonParser.checkStrictProperty(t,u,l),u)try{let a=u[n],o=a.name||n,c=t[o];if(void 0===c&&(a.optional||void 0!==a.defaultValue))continue;if(!a.optional&&void 0===c)throw new ParserError(l,`Property '${o}' is required.`);if(this.checkTypes(c,a),this.checkValues(c,a),"number"==typeof a.type)a.converter?a.repeated?s[n]=c.map(t=>a.converter.fromJSON(t,s)):s[n]=a.converter.fromJSON(c,s):s[n]=c;else{let t={...r,targetSchema:a.type,schemaName:i};a.repeated?s[n]=c.map(r=>this.fromJSON(r,t)):s[n]=this.fromJSON(c,t)}}catch(t){if(t instanceof ParserError||(t=new ParserError(l,`Property '${n}' is wrong. ${t.message}`,t)),r.strictAllKeys)c[n]=t;else throw t}let d=Object.keys(c);if(d.length)throw new KeyError(l,d,c);return s}static checkStrictProperty(t,r,n){let a=Object.keys(t),o=Object.keys(r),i=[];for(let t of a)-1===o.indexOf(t)&&i.push(t);if(i.length)throw new KeyError(n,i)}};r.JsonError=JsonError,r.JsonParser=JsonParser,r.JsonProp=(t={})=>(o,i)=>{let s;let l=`Cannot set type for ${i} property of ${o.constructor.name} schema`;a.has(o.constructor)?(s=a.get(o.constructor)).target!==o.constructor&&(s=a.create(o.constructor),a.set(o.constructor,s)):(s=a.create(o.constructor),a.set(o.constructor,s));let u={type:r.JsonPropTypes.Any,validations:[]},c=Object.assign(u,t);if(c.validations=function(t){let n=[];return t.pattern&&n.push(new PatternValidation(t.pattern)),(t.type===r.JsonPropTypes.Number||t.type===r.JsonPropTypes.Any)&&((void 0!==t.minInclusive||void 0!==t.maxInclusive)&&n.push(new InclusiveValidation(t.minInclusive,t.maxInclusive)),(void 0!==t.minExclusive||void 0!==t.maxExclusive)&&n.push(new ExclusiveValidation(t.minExclusive,t.maxExclusive)),void 0!==t.enumeration&&n.push(new EnumerationValidation(t.enumeration))),(t.type===r.JsonPropTypes.String||t.repeated||t.type===r.JsonPropTypes.Any)&&(void 0!==t.length||void 0!==t.minLength||void 0!==t.maxLength)&&n.push(new LengthValidation(t.length,t.minLength,t.maxLength)),n}(c),"number"!=typeof c.type&&!a.has(c.type)&&!isConvertible(c.type))throw Error(`${l}. Assigning type doesn't have schema.`);for(let r of Array.isArray(t.schema)?t.schema:[t.schema||n]){s.names[r]||(s.names[r]={});let t=s.names[r];t[i]=c}},r.JsonSerializer=class extends JsonTransform{static serialize(t,r,n,a){let o=this.toJSON(t,r);return JSON.stringify(o,n,a)}static toJSON(t,r={}){let o;let i=r.targetSchema,s=r.schemaName||n;if(isConvertible(t))return t.toJSON();if(Array.isArray(t))for(let n of(o=[],t))o.push(this.toJSON(n,r));else if("object"==typeof t){if(i&&!a.has(i))throw new JsonError("Cannot get schema for `targetSchema` param");if(i=i||t.constructor,a.has(i)){let r=a.get(i);o={};let n=this.getSchemaByName(r,s);for(let a in n)try{let r;let l=n[a],u=t[a];if(l.optional&&void 0===u||void 0!==l.defaultValue&&u===l.defaultValue)continue;if(!l.optional&&void 0===u)throw new SerializerError(i.name,`Property '${a}' is required.`);r="number"==typeof l.type?l.converter?l.repeated?u.map(r=>l.converter.toJSON(r,t)):l.converter.toJSON(u,t):u:l.repeated?u.map(t=>this.toJSON(t,{schemaName:s})):this.toJSON(u,{schemaName:s}),this.checkTypes(r,l),this.checkValues(r,l),o[l.name||a]=r}catch(t){if(t instanceof SerializerError)throw t;throw new SerializerError(r.target.name,`Property '${a}' is wrong. ${t.message}`,t)}}else for(let r in o={},t)o[r]=this.toJSON(t[r],{schemaName:s})}else o=t;return o}},r.KeyError=KeyError,r.ParserError=ParserError,r.SerializerError=SerializerError,r.TransformError=TransformError,r.ValidationError=ValidationError},3:(t,r,n)=>{/*!
 Copyright (c) Peculiar Ventures, LLC
*/var a=n(7321),o=n(6113),i=n(7282),s=n(7175),l=n(5854),u=n(5693),c=n(1087);function _interopNamespaceDefault(t){var r=Object.create(null);return t&&Object.keys(t).forEach(function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}}),r.default=t,Object.freeze(r)}var d=_interopNamespaceDefault(a),h=_interopNamespaceDefault(o),p=_interopNamespaceDefault(i);let y={fromJSON:t=>Buffer.from(u.Convert.FromBase64Url(t)),toJSON:t=>u.Convert.ToBase64Url(t)};let CryptoKey=class CryptoKey extends d.CryptoKey{constructor(){super(...arguments),this.data=Buffer.alloc(0),this.algorithm={name:""},this.extractable=!1,this.type="secret",this.usages=[],this.kty="oct",this.alg=""}};s.__decorate([l.JsonProp({name:"ext",type:l.JsonPropTypes.Boolean,optional:!0})],CryptoKey.prototype,"extractable",void 0),s.__decorate([l.JsonProp({name:"key_ops",type:l.JsonPropTypes.String,repeated:!0,optional:!0})],CryptoKey.prototype,"usages",void 0),s.__decorate([l.JsonProp({type:l.JsonPropTypes.String})],CryptoKey.prototype,"kty",void 0),s.__decorate([l.JsonProp({type:l.JsonPropTypes.String,optional:!0})],CryptoKey.prototype,"alg",void 0);let SymmetricKey=class SymmetricKey extends CryptoKey{constructor(){super(...arguments),this.kty="oct",this.type="secret"}};let AsymmetricKey=class AsymmetricKey extends CryptoKey{};let AesCryptoKey=class AesCryptoKey extends SymmetricKey{get alg(){switch(this.algorithm.name.toUpperCase()){case"AES-CBC":return`A${this.algorithm.length}CBC`;case"AES-CTR":return`A${this.algorithm.length}CTR`;case"AES-GCM":return`A${this.algorithm.length}GCM`;case"AES-KW":return`A${this.algorithm.length}KW`;case"AES-CMAC":return`A${this.algorithm.length}CMAC`;case"AES-ECB":return`A${this.algorithm.length}ECB`;default:throw new d.AlgorithmError("Unsupported algorithm name")}}set alg(t){}};s.__decorate([l.JsonProp({name:"k",converter:y})],AesCryptoKey.prototype,"data",void 0);let m=new WeakMap;function getCryptoKey(t){let r=m.get(t);if(!r)throw new d.OperationError("Cannot get CryptoKey from secure storage");return r}function setCryptoKey(t){let r=d.CryptoKey.create(t.algorithm,t.type,t.extractable,t.usages);return Object.freeze(r),m.set(r,t),r}let AesCrypto=class AesCrypto{static async generateKey(t,r,n){let a=new AesCryptoKey;return a.algorithm=t,a.extractable=r,a.usages=n,a.data=o.randomBytes(t.length>>3),a}static async exportKey(t,r){if(!(r instanceof AesCryptoKey))throw Error("key: Is not AesCryptoKey");switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"raw":return new Uint8Array(r.data).buffer;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(t,r,n,a,o){let i;switch(t.toLowerCase()){case"jwk":i=l.JsonParser.fromJSON(r,{targetSchema:AesCryptoKey});break;case"raw":(i=new AesCryptoKey).data=Buffer.from(r);break;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}switch(i.algorithm=n,i.algorithm.length=i.data.length<<3,i.extractable=a,i.usages=o,i.algorithm.length){case 128:case 192:case 256:break;default:throw new d.OperationError("keyData: Is wrong key length")}return i}static async encrypt(t,r,n){switch(t.name.toUpperCase()){case"AES-CBC":return this.encryptAesCBC(t,r,Buffer.from(n));case"AES-CTR":return this.encryptAesCTR(t,r,Buffer.from(n));case"AES-GCM":return this.encryptAesGCM(t,r,Buffer.from(n));case"AES-KW":return this.encryptAesKW(t,r,Buffer.from(n));case"AES-ECB":return this.encryptAesECB(t,r,Buffer.from(n));default:throw new d.OperationError("algorithm: Is not recognized")}}static async decrypt(t,r,n){if(!(r instanceof AesCryptoKey))throw Error("key: Is not AesCryptoKey");switch(t.name.toUpperCase()){case"AES-CBC":return this.decryptAesCBC(t,r,Buffer.from(n));case"AES-CTR":return this.decryptAesCTR(t,r,Buffer.from(n));case"AES-GCM":return this.decryptAesGCM(t,r,Buffer.from(n));case"AES-KW":return this.decryptAesKW(t,r,Buffer.from(n));case"AES-ECB":return this.decryptAesECB(t,r,Buffer.from(n));default:throw new d.OperationError("algorithm: Is not recognized")}}static async encryptAesCBC(t,r,n){let a=o.createCipheriv(`aes-${r.algorithm.length}-cbc`,r.data,new Uint8Array(t.iv)),i=a.update(n);i=Buffer.concat([i,a.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesCBC(t,r,n){let a=o.createDecipheriv(`aes-${r.algorithm.length}-cbc`,r.data,new Uint8Array(t.iv)),i=a.update(n);return i=Buffer.concat([i,a.final()]),new Uint8Array(i).buffer}static async encryptAesCTR(t,r,n){let a=o.createCipheriv(`aes-${r.algorithm.length}-ctr`,r.data,Buffer.from(t.counter)),i=a.update(n);i=Buffer.concat([i,a.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesCTR(t,r,n){let a=o.createDecipheriv(`aes-${r.algorithm.length}-ctr`,r.data,new Uint8Array(t.counter)),i=a.update(n);return i=Buffer.concat([i,a.final()]),new Uint8Array(i).buffer}static async encryptAesGCM(t,r,n){let a=o.createCipheriv(`aes-${r.algorithm.length}-gcm`,r.data,Buffer.from(t.iv),{authTagLength:(t.tagLength||128)>>3});t.additionalData&&a.setAAD(Buffer.from(t.additionalData));let i=a.update(n);i=Buffer.concat([i,a.final(),a.getAuthTag()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesGCM(t,r,n){let a=o.createDecipheriv(`aes-${r.algorithm.length}-gcm`,r.data,new Uint8Array(t.iv)),i=(t.tagLength||128)>>3,s=n.slice(0,n.length-i),l=n.slice(n.length-i);t.additionalData&&a.setAAD(Buffer.from(t.additionalData)),a.setAuthTag(l);let u=a.update(s);return u=Buffer.concat([u,a.final()]),new Uint8Array(u).buffer}static async encryptAesKW(t,r,n){let a=o.createCipheriv(`id-aes${r.algorithm.length}-wrap`,r.data,this.AES_KW_IV),i=a.update(n);return i=Buffer.concat([i,a.final()]),new Uint8Array(i).buffer}static async decryptAesKW(t,r,n){let a=o.createDecipheriv(`id-aes${r.algorithm.length}-wrap`,r.data,this.AES_KW_IV),i=a.update(n);return i=Buffer.concat([i,a.final()]),new Uint8Array(i).buffer}static async encryptAesECB(t,r,n){let a=o.createCipheriv(`aes-${r.algorithm.length}-ecb`,r.data,new Uint8Array(0)),i=a.update(n);i=Buffer.concat([i,a.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptAesECB(t,r,n){let a=o.createDecipheriv(`aes-${r.algorithm.length}-ecb`,r.data,new Uint8Array(0)),i=a.update(n);return i=Buffer.concat([i,a.final()]),new Uint8Array(i).buffer}};AesCrypto.AES_KW_IV=Buffer.from("A6A6A6A6A6A6A6A6","hex");let AesCbcProvider=class AesCbcProvider extends d.AesCbcProvider{async onGenerateKey(t,r,n){let a=await AesCrypto.generateKey({name:this.name,length:t.length},r,n);return setCryptoKey(a)}async onEncrypt(t,r,n){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(n))}async onDecrypt(t,r,n){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(n))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await AesCrypto.importKey(t,r,{name:n.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let g=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),b=Buffer.from([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,135]);function bitShiftLeft(t){let r=Buffer.alloc(t.length),n=t.length-1;for(let a=0;a<n;a++)r[a]=t[a]<<1,128&t[a+1]&&(r[a]+=1);return r[n]=t[n]<<1,r}function xor(t,r){let n=Math.min(t.length,r.length),a=Buffer.alloc(n);for(let o=0;o<n;o++)a[o]=t[o]^r[o];return a}function aes(t,r){let n=h.createCipheriv(`aes${t.length<<3}`,t,g),a=n.update(r);return n.final(),a}function getMessageBlock(t,r){let n=Buffer.alloc(16),a=16*r,o=a+16;return t.copy(n,0,a,o),n}let AesCmacProvider=class AesCmacProvider extends d.AesCmacProvider{async onGenerateKey(t,r,n){let a=await AesCrypto.generateKey({name:this.name,length:t.length},r,n);return setCryptoKey(a)}async onSign(t,r,n){let a=function(t,r){let n,a;let o=function(t){let r=aes(t,g),n=bitShiftLeft(r);128&r[0]&&(n=xor(n,b));let a=bitShiftLeft(n);return 128&n[0]&&(a=xor(a,b)),{subkey1:n,subkey2:a}}(t),i=Math.ceil(r.length/16);0===i?(i=1,n=!1):n=r.length%16==0;let s=i-1;a=n?xor(getMessageBlock(r,s),o.subkey1):xor(function(t,r){let n=Buffer.alloc(16),a=16*r,o=t.length;return n.fill(0),t.copy(n,0,a,o),n[o-a]=128,n}(r,s),o.subkey2);let l=g;for(let n=0;n<s;n++)l=aes(t,xor(l,getMessageBlock(r,n)));return aes(t,xor(a,l))}(getCryptoKey(r).data,Buffer.from(n));return new Uint8Array(a).buffer}async onVerify(t,r,n,a){let o=await this.sign(t,r,a);return 0===Buffer.from(n).compare(Buffer.from(o))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await AesCrypto.importKey(t,r,{name:n.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesCtrProvider=class AesCtrProvider extends d.AesCtrProvider{async onGenerateKey(t,r,n){let a=await AesCrypto.generateKey({name:this.name,length:t.length},r,n);return setCryptoKey(a)}async onEncrypt(t,r,n){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(n))}async onDecrypt(t,r,n){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(n))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await AesCrypto.importKey(t,r,{name:n.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesGcmProvider=class AesGcmProvider extends d.AesGcmProvider{async onGenerateKey(t,r,n){let a=await AesCrypto.generateKey({name:this.name,length:t.length},r,n);return setCryptoKey(a)}async onEncrypt(t,r,n){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(n))}async onDecrypt(t,r,n){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(n))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await AesCrypto.importKey(t,r,{name:n.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesKwProvider=class AesKwProvider extends d.AesKwProvider{async onGenerateKey(t,r,n){let a=await AesCrypto.generateKey({name:this.name,length:t.length},r,n);return setCryptoKey(a)}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await AesCrypto.importKey(t,r,{name:n.name},a,o);return setCryptoKey(i)}async onEncrypt(t,r,n){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(n))}async onDecrypt(t,r,n){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(n))}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let AesEcbProvider=class AesEcbProvider extends d.AesEcbProvider{async onGenerateKey(t,r,n){let a=await AesCrypto.generateKey({name:this.name,length:t.length},r,n);return setCryptoKey(a)}async onEncrypt(t,r,n){return AesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(n))}async onDecrypt(t,r,n){return AesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(n))}async onExportKey(t,r){return AesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await AesCrypto.importKey(t,r,{name:n.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof AesCryptoKey))throw TypeError("key: Is not a AesCryptoKey")}};let DesCryptoKey=class DesCryptoKey extends SymmetricKey{get alg(){switch(this.algorithm.name.toUpperCase()){case"DES-CBC":return"DES-CBC";case"DES-EDE3-CBC":return"3DES-CBC";default:throw new d.AlgorithmError("Unsupported algorithm name")}}set alg(t){}};s.__decorate([l.JsonProp({name:"k",converter:y})],DesCryptoKey.prototype,"data",void 0);let DesCrypto=class DesCrypto{static async generateKey(t,r,n){let a=new DesCryptoKey;return a.algorithm=t,a.extractable=r,a.usages=n,a.data=o.randomBytes(t.length>>3),a}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"raw":return new Uint8Array(r.data).buffer;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}}static async importKey(t,r,n,a,o){let i;switch(t.toLowerCase()){case"jwk":i=l.JsonParser.fromJSON(r,{targetSchema:DesCryptoKey});break;case"raw":(i=new DesCryptoKey).data=Buffer.from(r);break;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}return i.algorithm=n,i.extractable=a,i.usages=o,i}static async encrypt(t,r,n){switch(t.name.toUpperCase()){case"DES-CBC":return this.encryptDesCBC(t,r,Buffer.from(n));case"DES-EDE3-CBC":return this.encryptDesEDE3CBC(t,r,Buffer.from(n));default:throw new d.OperationError("algorithm: Is not recognized")}}static async decrypt(t,r,n){if(!(r instanceof DesCryptoKey))throw Error("key: Is not DesCryptoKey");switch(t.name.toUpperCase()){case"DES-CBC":return this.decryptDesCBC(t,r,Buffer.from(n));case"DES-EDE3-CBC":return this.decryptDesEDE3CBC(t,r,Buffer.from(n));default:throw new d.OperationError("algorithm: Is not recognized")}}static async encryptDesCBC(t,r,n){let a=o.createCipheriv("des-cbc",r.data,new Uint8Array(t.iv)),i=a.update(n);i=Buffer.concat([i,a.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptDesCBC(t,r,n){let a=o.createDecipheriv("des-cbc",r.data,new Uint8Array(t.iv)),i=a.update(n);return i=Buffer.concat([i,a.final()]),new Uint8Array(i).buffer}static async encryptDesEDE3CBC(t,r,n){let a=o.createCipheriv("des-ede3-cbc",r.data,Buffer.from(t.iv)),i=a.update(n);i=Buffer.concat([i,a.final()]);let s=new Uint8Array(i).buffer;return s}static async decryptDesEDE3CBC(t,r,n){let a=o.createDecipheriv("des-ede3-cbc",r.data,new Uint8Array(t.iv)),i=a.update(n);return i=Buffer.concat([i,a.final()]),new Uint8Array(i).buffer}};let DesCbcProvider=class DesCbcProvider extends d.DesProvider{constructor(){super(...arguments),this.keySizeBits=64,this.ivSize=8,this.name="DES-CBC"}async onGenerateKey(t,r,n){let a=await DesCrypto.generateKey({name:this.name,length:this.keySizeBits},r,n);return setCryptoKey(a)}async onEncrypt(t,r,n){return DesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(n))}async onDecrypt(t,r,n){return DesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(n))}async onExportKey(t,r){return DesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await DesCrypto.importKey(t,r,{name:this.name,length:this.keySizeBits},a,o);if(i.data.length!==this.keySizeBits>>3)throw new d.OperationError("keyData: Wrong key size");return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof DesCryptoKey))throw TypeError("key: Is not a DesCryptoKey")}};let DesEde3CbcProvider=class DesEde3CbcProvider extends d.DesProvider{constructor(){super(...arguments),this.keySizeBits=192,this.ivSize=8,this.name="DES-EDE3-CBC"}async onGenerateKey(t,r,n){let a=await DesCrypto.generateKey({name:this.name,length:this.keySizeBits},r,n);return setCryptoKey(a)}async onEncrypt(t,r,n){return DesCrypto.encrypt(t,getCryptoKey(r),new Uint8Array(n))}async onDecrypt(t,r,n){return DesCrypto.decrypt(t,getCryptoKey(r),new Uint8Array(n))}async onExportKey(t,r){return DesCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await DesCrypto.importKey(t,r,{name:this.name,length:this.keySizeBits},a,o);if(i.data.length!==this.keySizeBits>>3)throw new d.OperationError("keyData: Wrong key size");return setCryptoKey(i)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof DesCryptoKey))throw TypeError("key: Is not a DesCryptoKey")}};function getJwkAlgorithm(t){switch(t.name.toUpperCase()){case"RSA-OAEP":{let r=/(\d+)$/.exec(t.hash.name)[1];return`RSA-OAEP${"1"!==r?`-${r}`:""}`}case"RSASSA-PKCS1-V1_5":return`RS${/(\d+)$/.exec(t.hash.name)[1]}`;case"RSA-PSS":return`PS${/(\d+)$/.exec(t.hash.name)[1]}`;case"RSA-PKCS1":return"RS1";default:throw new d.OperationError("algorithm: Is not recognized")}}let RsaPrivateKey=class RsaPrivateKey extends AsymmetricKey{constructor(){super(...arguments),this.type="private"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PrivateKeyInfo);return c.AsnParser.parse(t.privateKey,d.asn1.RsaPrivateKey)}toJSON(){let t=this.getKey(),r={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){let r=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.RsaPrivateKey}),n=new d.asn1.PrivateKeyInfo;n.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.privateKeyAlgorithm.parameters=null,n.privateKey=c.AsnSerializer.serialize(r),this.data=Buffer.from(c.AsnSerializer.serialize(n))}};let RsaPublicKey=class RsaPublicKey extends AsymmetricKey{constructor(){super(...arguments),this.type="public"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PublicKeyInfo);return c.AsnParser.parse(t.publicKey,d.asn1.RsaPublicKey)}toJSON(){let t=this.getKey(),r={kty:"RSA",alg:getJwkAlgorithm(this.algorithm),key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){let r=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.RsaPublicKey}),n=new d.asn1.PublicKeyInfo;n.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",n.publicKeyAlgorithm.parameters=null,n.publicKey=c.AsnSerializer.serialize(r),this.data=Buffer.from(c.AsnSerializer.serialize(n))}};let RsaCrypto=class RsaCrypto{static async generateKey(t,r,n){let a=new RsaPrivateKey;a.algorithm=t,a.extractable=r,a.usages=n.filter(t=>-1!==this.privateKeyUsages.indexOf(t));let i=new RsaPublicKey;i.algorithm=t,i.extractable=!0,i.usages=n.filter(t=>-1!==this.publicKeyUsages.indexOf(t));let s=Buffer.concat([Buffer.alloc(4-t.publicExponent.byteLength,0),Buffer.from(t.publicExponent)]).readInt32BE(0),l=o.generateKeyPairSync("rsa",{modulusLength:t.modulusLength,publicExponent:s,publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return a.data=l.privateKey,i.data=l.publicKey,{privateKey:a,publicKey:i}}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;default:throw new d.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async importKey(t,r,n,a,o){switch(t.toLowerCase()){case"jwk":if(r.d){let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.RsaPrivateKey});return this.importPrivateKey(t,n,a,o)}{let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.RsaPublicKey});return this.importPublicKey(t,n,a,o)}case"spki":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PublicKeyInfo),i=c.AsnParser.parse(t.publicKey,d.asn1.RsaPublicKey);return this.importPublicKey(i,n,a,o)}case"pkcs8":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PrivateKeyInfo),i=c.AsnParser.parse(t.privateKey,d.asn1.RsaPrivateKey);return this.importPrivateKey(i,n,a,o)}default:throw new d.OperationError("format: Must be 'jwk', 'pkcs8' or 'spki'")}}static async sign(t,r,n){switch(t.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.signRsa(t,r,n);default:throw new d.OperationError("algorithm: Is not recognized")}}static async verify(t,r,n,a){switch(t.name.toUpperCase()){case"RSA-PSS":case"RSASSA-PKCS1-V1_5":return this.verifySSA(t,r,a,n);default:throw new d.OperationError("algorithm: Is not recognized")}}static async encrypt(t,r,n){if("RSA-OAEP"===t.name.toUpperCase())return this.encryptOAEP(t,r,n);throw new d.OperationError("algorithm: Is not recognized")}static async decrypt(t,r,n){if("RSA-OAEP"===t.name.toUpperCase())return this.decryptOAEP(t,r,n);throw new d.OperationError("algorithm: Is not recognized")}static importPrivateKey(t,r,n,a){let o=new d.asn1.PrivateKeyInfo;o.privateKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",o.privateKeyAlgorithm.parameters=null,o.privateKey=c.AsnSerializer.serialize(t);let i=new RsaPrivateKey;return i.data=Buffer.from(c.AsnSerializer.serialize(o)),i.algorithm=Object.assign({},r),i.algorithm.publicExponent=new Uint8Array(t.publicExponent),i.algorithm.modulusLength=t.modulus.byteLength<<3,i.extractable=n,i.usages=a,i}static importPublicKey(t,r,n,a){let o=new d.asn1.PublicKeyInfo;o.publicKeyAlgorithm.algorithm="1.2.840.113549.1.1.1",o.publicKeyAlgorithm.parameters=null,o.publicKey=c.AsnSerializer.serialize(t);let i=new RsaPublicKey;return i.data=Buffer.from(c.AsnSerializer.serialize(o)),i.algorithm=Object.assign({},r),i.algorithm.publicExponent=new Uint8Array(t.publicExponent),i.algorithm.modulusLength=t.modulus.byteLength<<3,i.extractable=n,i.usages=a,i}static getCryptoAlgorithm(t){switch(t.hash.name.toUpperCase()){case"SHA-1":return"RSA-SHA1";case"SHA-256":return"RSA-SHA256";case"SHA-384":return"RSA-SHA384";case"SHA-512":return"RSA-SHA512";case"SHA3-256":return"RSA-SHA3-256";case"SHA3-384":return"RSA-SHA3-384";case"SHA3-512":return"RSA-SHA3-512";default:throw new d.OperationError("algorithm.hash: Is not recognized")}}static signRsa(t,r,n){let a=this.getCryptoAlgorithm(r.algorithm),i=o.createSign(a);i.update(Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:r.pem};"RSA-PSS"===t.name.toUpperCase()&&(s.padding=o.constants.RSA_PKCS1_PSS_PADDING,s.saltLength=t.saltLength);let l=i.sign(s);return new Uint8Array(l).buffer}static verifySSA(t,r,n,a){let i=this.getCryptoAlgorithm(r.algorithm),s=o.createVerify(i);s.update(Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let l={key:r.pem};"RSA-PSS"===t.name.toUpperCase()&&(l.padding=o.constants.RSA_PKCS1_PSS_PADDING,l.saltLength=t.saltLength);let u=s.verify(l,a);return u}static encryptOAEP(t,r,n){let a={key:`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`,padding:o.constants.RSA_PKCS1_OAEP_PADDING};return t.label,new Uint8Array(o.publicEncrypt(a,n)).buffer}static decryptOAEP(t,r,n){let a={key:`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`,padding:o.constants.RSA_PKCS1_OAEP_PADDING};return t.label,new Uint8Array(o.privateDecrypt(a,n)).buffer}};RsaCrypto.publicKeyUsages=["verify","encrypt","wrapKey"],RsaCrypto.privateKeyUsages=["sign","decrypt","unwrapKey"];let RsaSsaProvider=class RsaSsaProvider extends d.RsaSsaProvider{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(t,r,n){let a=await RsaCrypto.generateKey({...t,name:this.name},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}async onSign(t,r,n){return RsaCrypto.sign(t,getCryptoKey(r),new Uint8Array(n))}async onVerify(t,r,n,a){return RsaCrypto.verify(t,getCryptoKey(r),new Uint8Array(n),new Uint8Array(a))}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await RsaCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let n=getCryptoKey(t);if(!(n instanceof RsaPrivateKey||n instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}};let RsaPssProvider=class RsaPssProvider extends d.RsaPssProvider{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(t,r,n){let a=await RsaCrypto.generateKey({...t,name:this.name},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}async onSign(t,r,n){return RsaCrypto.sign(t,getCryptoKey(r),new Uint8Array(n))}async onVerify(t,r,n,a){return RsaCrypto.verify(t,getCryptoKey(r),new Uint8Array(n),new Uint8Array(a))}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await RsaCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let n=getCryptoKey(t);if(!(n instanceof RsaPrivateKey||n instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}};let ShaCrypto=class ShaCrypto{static size(t){switch(t.name.toUpperCase()){case"SHA-1":return 160;case"SHA-256":case"SHA3-256":return 256;case"SHA-384":case"SHA3-384":return 384;case"SHA-512":case"SHA3-512":return 512;default:throw Error("Unrecognized name")}}static getAlgorithmName(t){switch(t.name.toUpperCase()){case"SHA-1":return"sha1";case"SHA-256":return"sha256";case"SHA-384":return"sha384";case"SHA-512":return"sha512";case"SHA3-256":return"sha3-256";case"SHA3-384":return"sha3-384";case"SHA3-512":return"sha3-512";default:throw Error("Unrecognized name")}}static digest(t,r){let n=this.getAlgorithmName(t),a=o.createHash(n).update(Buffer.from(r)).digest();return new Uint8Array(a).buffer}};let RsaOaepProvider=class RsaOaepProvider extends d.RsaOaepProvider{async onGenerateKey(t,r,n){let a=await RsaCrypto.generateKey({...t,name:this.name},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}async onEncrypt(t,r,n){let a=getCryptoKey(r),i=new Uint8Array(n),s=Math.ceil(a.algorithm.modulusLength>>3),l=ShaCrypto.size(a.algorithm.hash)>>3,u=i.byteLength,c=s-u-2*l-2;if(u>s-2*l-2)throw Error("Data too large");let h=new Uint8Array(s),p=h.subarray(1,l+1),y=h.subarray(l+1);y.set(i,l+c+1);let m=o.createHash(a.algorithm.hash.name.replace("-","")).update(d.BufferSourceConverter.toUint8Array(t.label||new Uint8Array(0))).digest();y.set(m,0),y[l+c]=1,o.randomFillSync(p);let g=this.mgf1(a.algorithm.hash,p,y.length);for(let t=0;t<y.length;t++)y[t]^=g[t];let b=this.mgf1(a.algorithm.hash,y,p.length);for(let t=0;t<p.length;t++)p[t]^=b[t];a.pem||(a.pem=`-----BEGIN PUBLIC KEY-----
${a.data.toString("base64")}
-----END PUBLIC KEY-----`);let v=o.publicEncrypt({key:a.pem,padding:o.constants.RSA_NO_PADDING},Buffer.from(h));return new Uint8Array(v).buffer}async onDecrypt(t,r,n){let a=getCryptoKey(r),i=Math.ceil(a.algorithm.modulusLength>>3),s=ShaCrypto.size(a.algorithm.hash)>>3,l=n.byteLength;if(l!==i)throw Error("Bad data");a.pem||(a.pem=`-----BEGIN PRIVATE KEY-----
${a.data.toString("base64")}
-----END PRIVATE KEY-----`);let u=o.privateDecrypt({key:a.pem,padding:o.constants.RSA_NO_PADDING},Buffer.from(n)),c=u[0],h=u.subarray(1,s+1),p=u.subarray(s+1);if(0!==c)throw Error("Decryption failed");let y=this.mgf1(a.algorithm.hash,p,h.length);for(let t=0;t<h.length;t++)h[t]^=y[t];let m=this.mgf1(a.algorithm.hash,h,p.length);for(let t=0;t<p.length;t++)p[t]^=m[t];let g=o.createHash(a.algorithm.hash.name.replace("-","")).update(d.BufferSourceConverter.toUint8Array(t.label||new Uint8Array(0))).digest();for(let t=0;t<s;t++)if(g[t]!==p[t])throw Error("Decryption failed");let b=s;for(;b<p.length;b++){let t=p[b];if(1===t)break;if(0!==t)throw Error("Decryption failed")}if(b===p.length)throw Error("Decryption failed");return u=p.subarray(b+1),new Uint8Array(u).buffer}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await RsaCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let n=getCryptoKey(t);if(!(n instanceof RsaPrivateKey||n instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}mgf1(t,r,n=0){let a=ShaCrypto.size(t)>>3,i=new Uint8Array(n),s=new Uint8Array(4),l=Math.ceil(n/a);for(let n=0;n<l;n++){s[0]=n>>>24,s[1]=n>>>16&255,s[2]=n>>>8&255,s[3]=255&n;let l=i.subarray(n*a),u=o.createHash(t.name.replace("-","")).update(r).update(s).digest();u.length>l.length&&(u=u.subarray(0,l.length)),l.set(u)}return i}};let RsaEsProvider=class RsaEsProvider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="RSAES-PKCS1-v1_5",this.usages={publicKey:["encrypt","wrapKey"],privateKey:["decrypt","unwrapKey"]}}async onGenerateKey(t,r,n){let a=await RsaCrypto.generateKey({...t,name:this.name},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"publicExponent"),!(t.publicExponent&&t.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let r=u.Convert.ToBase64(t.publicExponent);if(!("Aw=="===r||"AQAB"===r))throw TypeError("publicExponent: Must be [3] or [1,0,1]");switch(this.checkRequiredProperty(t,"modulusLength"),t.modulusLength){case 1024:case 2048:case 4096:break;default:throw TypeError("modulusLength: Must be 1024, 2048, or 4096")}}async onEncrypt(t,r,n){let a=this.toCryptoOptions(r),o=h.publicEncrypt(a,new Uint8Array(n));return new Uint8Array(o).buffer}async onDecrypt(t,r,n){let a=this.toCryptoOptions(r),o=h.privateDecrypt(a,new Uint8Array(n));return new Uint8Array(o).buffer}async onExportKey(t,r){return RsaCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await RsaCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let n=getCryptoKey(t);if(!(n instanceof RsaPrivateKey||n instanceof RsaPublicKey))throw TypeError("key: Is not RSA CryptoKey")}toCryptoOptions(t){let r=t.type.toUpperCase();return{key:`-----BEGIN ${r} KEY-----
${getCryptoKey(t).data.toString("base64")}
-----END ${r} KEY-----`,padding:h.constants.RSA_PKCS1_PADDING}}};let v={"1.2.840.10045.3.1.7":"P-256","P-256":"1.2.840.10045.3.1.7","1.3.132.0.34":"P-384","P-384":"1.3.132.0.34","1.3.132.0.35":"P-521","P-521":"1.3.132.0.35","1.3.132.0.10":"K-256","K-256":"1.3.132.0.10",brainpoolP160r1:"1.3.36.3.3.2.8.1.1.1","1.3.36.3.3.2.8.1.1.1":"brainpoolP160r1",brainpoolP160t1:"1.3.36.3.3.2.8.1.1.2","1.3.36.3.3.2.8.1.1.2":"brainpoolP160t1",brainpoolP192r1:"1.3.36.3.3.2.8.1.1.3","1.3.36.3.3.2.8.1.1.3":"brainpoolP192r1",brainpoolP192t1:"1.3.36.3.3.2.8.1.1.4","1.3.36.3.3.2.8.1.1.4":"brainpoolP192t1",brainpoolP224r1:"1.3.36.3.3.2.8.1.1.5","1.3.36.3.3.2.8.1.1.5":"brainpoolP224r1",brainpoolP224t1:"1.3.36.3.3.2.8.1.1.6","1.3.36.3.3.2.8.1.1.6":"brainpoolP224t1",brainpoolP256r1:"1.3.36.3.3.2.8.1.1.7","1.3.36.3.3.2.8.1.1.7":"brainpoolP256r1",brainpoolP256t1:"1.3.36.3.3.2.8.1.1.8","1.3.36.3.3.2.8.1.1.8":"brainpoolP256t1",brainpoolP320r1:"1.3.36.3.3.2.8.1.1.9","1.3.36.3.3.2.8.1.1.9":"brainpoolP320r1",brainpoolP320t1:"1.3.36.3.3.2.8.1.1.10","1.3.36.3.3.2.8.1.1.10":"brainpoolP320t1",brainpoolP384r1:"1.3.36.3.3.2.8.1.1.11","1.3.36.3.3.2.8.1.1.11":"brainpoolP384r1",brainpoolP384t1:"1.3.36.3.3.2.8.1.1.12","1.3.36.3.3.2.8.1.1.12":"brainpoolP384t1",brainpoolP512r1:"1.3.36.3.3.2.8.1.1.13","1.3.36.3.3.2.8.1.1.13":"brainpoolP512r1",brainpoolP512t1:"1.3.36.3.3.2.8.1.1.14","1.3.36.3.3.2.8.1.1.14":"brainpoolP512t1"};function getOidByNamedCurve$1(t){let r=v[t];if(!r)throw new d.OperationError(`Cannot convert WebCrypto named curve '${t}' to OID`);return r}let EcPrivateKey=class EcPrivateKey extends AsymmetricKey{constructor(){super(...arguments),this.type="private"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PrivateKeyInfo);return c.AsnParser.parse(t.privateKey,d.asn1.EcPrivateKey)}toJSON(){let t=this.getKey(),r={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let r=new d.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",r.privateKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(getOidByNamedCurve$1(t.crv)));let n=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.EcPrivateKey});return r.privateKey=c.AsnSerializer.serialize(n),this.data=Buffer.from(c.AsnSerializer.serialize(r)),this}};let EcPublicKey=class EcPublicKey extends AsymmetricKey{constructor(){super(...arguments),this.type="public"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PublicKeyInfo);return new d.asn1.EcPublicKey(t.publicKey)}toJSON(){let t=this.getKey(),r={kty:"EC",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let r=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.EcPublicKey}),n=new d.asn1.PublicKeyInfo;return n.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1",n.publicKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(getOidByNamedCurve$1(t.crv))),n.publicKey=c.AsnSerializer.toASN(r).valueHex,this.data=Buffer.from(c.AsnSerializer.serialize(n)),this}};let Sha1Provider=class Sha1Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-1",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha256Provider=class Sha256Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-256",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha384Provider=class Sha384Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-384",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha512Provider=class Sha512Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA-512",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha3256Provider=class Sha3256Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-256",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha3384Provider=class Sha3384Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-384",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let Sha3512Provider=class Sha3512Provider extends d.ProviderCrypto{constructor(){super(...arguments),this.name="SHA3-512",this.usages=[]}async onDigest(t,r){return ShaCrypto.digest(t,r)}};let EcCrypto=class EcCrypto{static async generateKey(t,r,n){let a=new EcPrivateKey;a.algorithm=t,a.extractable=r,a.usages=n.filter(t=>-1!==this.privateKeyUsages.indexOf(t));let i=new EcPublicKey;i.algorithm=t,i.extractable=!0,i.usages=n.filter(t=>-1!==this.publicKeyUsages.indexOf(t));let s=o.generateKeyPairSync("ec",{namedCurve:this.getOpenSSLNamedCurve(t.namedCurve),publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return a.data=s.privateKey,i.data=s.publicKey,{privateKey:a,publicKey:i}}static async sign(t,r,n){let a=ShaCrypto.getAlgorithmName(t.hash),i=o.createSign(a);i.update(Buffer.from(n)),r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let s={key:r.pem},l=i.sign(s),u=c.AsnParser.parse(l,d.asn1.EcDsaSignature),h=d.EcUtils.encodeSignature(u,d.EcCurves.get(r.algorithm.namedCurve).size);return h.buffer}static async verify(t,r,n,a){let i=ShaCrypto.getAlgorithmName(t.hash),s=o.createVerify(i);s.update(Buffer.from(a)),r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let l={key:r.pem},h=new d.asn1.EcDsaSignature,p=d.EcCurves.get(r.algorithm.namedCurve),y=d.EcUtils.decodeSignature(n,p.size);h.r=u.BufferSourceConverter.toArrayBuffer(y.r),h.s=u.BufferSourceConverter.toArrayBuffer(y.s);let m=Buffer.from(c.AsnSerializer.serialize(h)),g=s.verify(l,m);return g}static async deriveBits(t,r,n){let a=this.getOpenSSLNamedCurve(r.algorithm.namedCurve),i=o.createECDH(a),s=c.AsnParser.parse(r.data,d.asn1.PrivateKeyInfo),l=c.AsnParser.parse(s.privateKey,d.asn1.EcPrivateKey);i.setPrivateKey(Buffer.from(l.privateKey));let u=c.AsnParser.parse(t.public.data,d.asn1.PublicKeyInfo),h=i.computeSecret(Buffer.from(u.publicKey));return null===n?h:new Uint8Array(h).buffer.slice(0,n>>3)}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;case"raw":{let t=c.AsnParser.parse(r.data,d.asn1.PublicKeyInfo);return t.publicKey}default:throw new d.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(t,r,n,a,o){switch(t.toLowerCase()){case"jwk":if(r.d){let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.EcPrivateKey});return this.importPrivateKey(t,n,a,o)}{let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.EcPublicKey});return this.importPublicKey(t,n,a,o)}case"raw":{let t=new d.asn1.EcPublicKey(r);return this.importPublicKey(t,n,a,o)}case"spki":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PublicKeyInfo),i=new d.asn1.EcPublicKey(t.publicKey);return this.assertKeyParameters(t.publicKeyAlgorithm.parameters,n.namedCurve),this.importPublicKey(i,n,a,o)}case"pkcs8":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PrivateKeyInfo),i=c.AsnParser.parse(t.privateKey,d.asn1.EcPrivateKey);return this.assertKeyParameters(t.privateKeyAlgorithm.parameters,n.namedCurve),this.importPrivateKey(i,n,a,o)}default:throw new d.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static assertKeyParameters(t,r){if(!t)throw new d.CryptoError("Key info doesn't have required parameters");let n="";try{n=c.AsnParser.parse(t,d.asn1.ObjectIdentifier).value}catch(t){throw new d.CryptoError("Cannot read key info parameters")}if(getOidByNamedCurve$1(r)!==n)throw new d.CryptoError("Key info parameter doesn't match to named curve")}static async importPrivateKey(t,r,n,a){let o=new d.asn1.PrivateKeyInfo;o.privateKeyAlgorithm.algorithm="1.2.840.10045.2.1",o.privateKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(getOidByNamedCurve$1(r.namedCurve))),o.privateKey=c.AsnSerializer.serialize(t);let i=new EcPrivateKey;return i.data=Buffer.from(c.AsnSerializer.serialize(o)),i.algorithm=Object.assign({},r),i.extractable=n,i.usages=a,i}static async importPublicKey(t,r,n,a){let o=new d.asn1.PublicKeyInfo;o.publicKeyAlgorithm.algorithm="1.2.840.10045.2.1";let i=getOidByNamedCurve$1(r.namedCurve);o.publicKeyAlgorithm.parameters=c.AsnSerializer.serialize(new d.asn1.ObjectIdentifier(i)),o.publicKey=t.value;let s=new EcPublicKey;return s.data=Buffer.from(c.AsnSerializer.serialize(o)),s.algorithm=Object.assign({},r),s.extractable=n,s.usages=a,s}static getOpenSSLNamedCurve(t){switch(t.toUpperCase()){case"P-256":return"prime256v1";case"K-256":return"secp256k1";case"P-384":return"secp384r1";case"P-521":return"secp521r1";default:return t}}};EcCrypto.publicKeyUsages=["verify"],EcCrypto.privateKeyUsages=["sign","deriveKey","deriveBits"];let EcdsaProvider=class EcdsaProvider extends d.EcdsaProvider{constructor(){super(...arguments),this.namedCurves=d.EcCurves.names,this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512","shake128","shake256","SHA3-256","SHA3-384","SHA3-512"]}async onGenerateKey(t,r,n){let a=await EcCrypto.generateKey({...t,name:this.name},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}async onSign(t,r,n){return EcCrypto.sign(t,getCryptoKey(r),new Uint8Array(n))}async onVerify(t,r,n,a){return EcCrypto.verify(t,getCryptoKey(r),new Uint8Array(n),new Uint8Array(a))}async onExportKey(t,r){return EcCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await EcCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let n=getCryptoKey(t);if(!(n instanceof EcPrivateKey||n instanceof EcPublicKey))throw TypeError("key: Is not EC CryptoKey")}};let EcdhProvider=class EcdhProvider extends d.EcdhProvider{constructor(){super(...arguments),this.namedCurves=d.EcCurves.names}async onGenerateKey(t,r,n){let a=await EcCrypto.generateKey({...t,name:this.name},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}async onExportKey(t,r){return EcCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await EcCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}checkCryptoKey(t,r){super.checkCryptoKey(t,r);let n=getCryptoKey(t);if(!(n instanceof EcPrivateKey||n instanceof EcPublicKey))throw TypeError("key: Is not EC CryptoKey")}async onDeriveBits(t,r,n){let a=await EcCrypto.deriveBits({...t,public:getCryptoKey(t.public)},getCryptoKey(r),n);return a}};let S={[d.asn1.idEd448]:"Ed448",ed448:d.asn1.idEd448,[d.asn1.idX448]:"X448",x448:d.asn1.idX448,[d.asn1.idEd25519]:"Ed25519",ed25519:d.asn1.idEd25519,[d.asn1.idX25519]:"X25519",x25519:d.asn1.idX25519};function getOidByNamedCurve(t){let r=S[t.toLowerCase()];if(!r)throw new d.OperationError(`Cannot convert WebCrypto named curve '${t}' to OID`);return r}let EdPrivateKey=class EdPrivateKey extends AsymmetricKey{constructor(){super(...arguments),this.type="private"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PrivateKeyInfo);return c.AsnParser.parse(t.privateKey,d.asn1.CurvePrivateKey)}toJSON(){let t=this.getKey(),r={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,l.JsonSerializer.toJSON(t))}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");let r=new d.asn1.PrivateKeyInfo;r.privateKeyAlgorithm.algorithm=getOidByNamedCurve(t.crv);let n=l.JsonParser.fromJSON(t,{targetSchema:d.asn1.CurvePrivateKey});return r.privateKey=c.AsnSerializer.serialize(n),this.data=Buffer.from(c.AsnSerializer.serialize(r)),this}};let EdPublicKey=class EdPublicKey extends AsymmetricKey{constructor(){super(...arguments),this.type="public"}getKey(){let t=c.AsnParser.parse(this.data,d.asn1.PublicKeyInfo);return t.publicKey}toJSON(){let t=this.getKey(),r={kty:"OKP",crv:this.algorithm.namedCurve,key_ops:this.usages,ext:this.extractable};return Object.assign(r,{x:u.Convert.ToBase64Url(t)})}fromJSON(t){if(!t.crv)throw new d.OperationError("Cannot get named curve from JWK. Property 'crv' is required");if(!t.x)throw new d.OperationError("Cannot get property from JWK. Property 'x' is required");let r=new d.asn1.PublicKeyInfo;return r.publicKeyAlgorithm.algorithm=getOidByNamedCurve(t.crv),r.publicKey=u.Convert.FromBase64Url(t.x),this.data=Buffer.from(c.AsnSerializer.serialize(r)),this}};let EdCrypto=class EdCrypto{static async generateKey(t,r,n){let a=new EdPrivateKey;a.algorithm=t,a.extractable=r,a.usages=n.filter(t=>-1!==this.privateKeyUsages.indexOf(t));let i=new EdPublicKey;i.algorithm=t,i.extractable=!0,i.usages=n.filter(t=>-1!==this.publicKeyUsages.indexOf(t));let s=t.namedCurve.toLowerCase(),l=o.generateKeyPairSync(s,{publicKeyEncoding:{format:"der",type:"spki"},privateKeyEncoding:{format:"der",type:"pkcs8"}});return a.data=l.privateKey,i.data=l.publicKey,{privateKey:a,publicKey:i}}static async sign(t,r,n){r.pem||(r.pem=`-----BEGIN PRIVATE KEY-----
${r.data.toString("base64")}
-----END PRIVATE KEY-----`);let a={key:r.pem},i=o.sign(null,Buffer.from(n),a);return d.BufferSourceConverter.toArrayBuffer(i)}static async verify(t,r,n,a){r.pem||(r.pem=`-----BEGIN PUBLIC KEY-----
${r.data.toString("base64")}
-----END PUBLIC KEY-----`);let i={key:r.pem},s=o.verify(null,Buffer.from(a),i,Buffer.from(n));return s}static async deriveBits(t,r,n){let a=o.createPublicKey({key:t.public.data,format:"der",type:"spki"}),i=o.createPrivateKey({key:r.data,format:"der",type:"pkcs8"}),s=o.diffieHellman({publicKey:a,privateKey:i});return new Uint8Array(s).buffer.slice(0,n>>3)}static async exportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(r);case"pkcs8":case"spki":return new Uint8Array(r.data).buffer;case"raw":{let t=c.AsnParser.parse(r.data,d.asn1.PublicKeyInfo);return t.publicKey}default:throw new d.OperationError("format: Must be 'jwk', 'raw', pkcs8' or 'spki'")}}static async importKey(t,r,n,a,o){switch(t.toLowerCase()){case"jwk":if(r.d){let t=l.JsonParser.fromJSON(r,{targetSchema:d.asn1.CurvePrivateKey});return this.importPrivateKey(t,n,a,o)}if(!r.x)throw TypeError("keyData: Cannot get required 'x' filed");return this.importPublicKey(u.Convert.FromBase64Url(r.x),n,a,o);case"raw":return this.importPublicKey(r,n,a,o);case"spki":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PublicKeyInfo);return this.importPublicKey(t.publicKey,n,a,o)}case"pkcs8":{let t=c.AsnParser.parse(new Uint8Array(r),d.asn1.PrivateKeyInfo),i=c.AsnParser.parse(t.privateKey,d.asn1.CurvePrivateKey);return this.importPrivateKey(i,n,a,o)}default:throw new d.OperationError("format: Must be 'jwk', 'raw', 'pkcs8' or 'spki'")}}static importPrivateKey(t,r,n,a){let o=new EdPrivateKey;return o.fromJSON({crv:r.namedCurve,d:u.Convert.ToBase64Url(t.d)}),o.algorithm=Object.assign({},r),o.extractable=n,o.usages=a,o}static async importPublicKey(t,r,n,a){let o=new EdPublicKey;return o.fromJSON({crv:r.namedCurve,x:u.Convert.ToBase64Url(t)}),o.algorithm=Object.assign({},r),o.extractable=n,o.usages=a,o}};EdCrypto.publicKeyUsages=["verify"],EdCrypto.privateKeyUsages=["sign","deriveKey","deriveBits"];let EdDsaProvider=class EdDsaProvider extends d.EdDsaProvider{async onGenerateKey(t,r,n){let a=await EdCrypto.generateKey({name:this.name,namedCurve:t.namedCurve.replace(/^ed/i,"Ed")},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}async onSign(t,r,n){return EdCrypto.sign(t,getCryptoKey(r),new Uint8Array(n))}async onVerify(t,r,n,a){return EdCrypto.verify(t,getCryptoKey(r),new Uint8Array(n),new Uint8Array(a))}async onExportKey(t,r){return EdCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await EdCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}};let EcdhEsProvider=class EcdhEsProvider extends d.EcdhEsProvider{async onGenerateKey(t,r,n){let a=await EdCrypto.generateKey({name:this.name,namedCurve:t.namedCurve.toUpperCase()},r,n);return{privateKey:setCryptoKey(a.privateKey),publicKey:setCryptoKey(a.publicKey)}}async onDeriveBits(t,r,n){let a=await EdCrypto.deriveBits({...t,public:getCryptoKey(t.public)},getCryptoKey(r),n);return a}async onExportKey(t,r){return EdCrypto.exportKey(t,getCryptoKey(r))}async onImportKey(t,r,n,a,o){let i=await EdCrypto.importKey(t,r,{...n,name:this.name},a,o);return setCryptoKey(i)}};let PbkdfCryptoKey=class PbkdfCryptoKey extends CryptoKey{};let Pbkdf2Provider=class Pbkdf2Provider extends d.Pbkdf2Provider{async onDeriveBits(t,r,n){return new Promise((a,i)=>{let s=d.BufferSourceConverter.toArrayBuffer(t.salt),l=t.hash.name.replace("-","");o.pbkdf2(getCryptoKey(r).data,Buffer.from(s),t.iterations,n>>3,l,(t,r)=>{t?i(t):a(new Uint8Array(r).buffer)})})}async onImportKey(t,r,n,a,o){if("raw"===t){let t=new PbkdfCryptoKey;return t.data=Buffer.from(r),t.algorithm={name:this.name},t.extractable=!1,t.usages=o,setCryptoKey(t)}throw new d.OperationError("format: Must be 'raw'")}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof PbkdfCryptoKey))throw TypeError("key: Is not PBKDF CryptoKey")}};let HmacCryptoKey=class HmacCryptoKey extends CryptoKey{get alg(){let t=this.algorithm.hash.name.toUpperCase();return`HS${t.replace("SHA-","")}`}set alg(t){}};s.__decorate([l.JsonProp({name:"k",converter:y})],HmacCryptoKey.prototype,"data",void 0);let HmacProvider=class HmacProvider extends d.HmacProvider{async onGenerateKey(t,r,n){let a=(t.length||this.getDefaultLength(t.hash.name))>>3<<3,i=new HmacCryptoKey;return i.algorithm={...t,length:a,name:this.name},i.extractable=r,i.usages=n,i.data=o.randomBytes(a>>3),setCryptoKey(i)}async onSign(t,r,n){let a=ShaCrypto.getAlgorithmName(r.algorithm.hash),i=o.createHmac(a,getCryptoKey(r).data).update(Buffer.from(n)).digest();return new Uint8Array(i).buffer}async onVerify(t,r,n,a){let i=ShaCrypto.getAlgorithmName(r.algorithm.hash),s=o.createHmac(i,getCryptoKey(r).data).update(Buffer.from(a)).digest();return 0===s.compare(Buffer.from(n))}async onImportKey(t,r,n,a,o){let i;switch(t.toLowerCase()){case"jwk":i=l.JsonParser.fromJSON(r,{targetSchema:HmacCryptoKey});break;case"raw":(i=new HmacCryptoKey).data=Buffer.from(r);break;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}return i.algorithm={hash:{name:n.hash.name},name:this.name,length:i.data.length<<3},i.extractable=a,i.usages=o,setCryptoKey(i)}async onExportKey(t,r){switch(t.toLowerCase()){case"jwk":return l.JsonSerializer.toJSON(getCryptoKey(r));case"raw":return new Uint8Array(getCryptoKey(r).data).buffer;default:throw new d.OperationError("format: Must be 'jwk' or 'raw'")}}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof HmacCryptoKey))throw TypeError("key: Is not HMAC CryptoKey")}};let HkdfCryptoKey=class HkdfCryptoKey extends CryptoKey{};let HkdfProvider=class HkdfProvider extends d.HkdfProvider{async onImportKey(t,r,n,a,o){if("raw"!==t.toLowerCase())throw new d.OperationError("Operation not supported");let i=new HkdfCryptoKey;return i.data=Buffer.from(r),i.algorithm={name:this.name},i.extractable=a,i.usages=o,setCryptoKey(i)}async onDeriveBits(t,r,n){let i=t.hash.name.replace("-",""),s=o.createHash(i).digest().length,l=n/8,u=a.BufferSourceConverter.toUint8Array(t.info),c=o.createHmac(i,a.BufferSourceConverter.toUint8Array(t.salt)).update(a.BufferSourceConverter.toUint8Array(getCryptoKey(r).data)).digest(),d=[Buffer.alloc(0)],h=Math.ceil(l/s)+1;for(let t=1;t<h;++t)d.push(o.createHmac(i,c).update(Buffer.concat([d[t-1],u,Buffer.from([t])])).digest());return Buffer.concat(d).slice(0,l)}checkCryptoKey(t,r){if(super.checkCryptoKey(t,r),!(getCryptoKey(t) instanceof HkdfCryptoKey))throw TypeError("key: Is not HKDF CryptoKey")}};let ShakeCrypto=class ShakeCrypto{static digest(t,r){let n=o.createHash(t.name.toLowerCase(),{outputLength:t.length}).update(Buffer.from(r)).digest();return new Uint8Array(n).buffer}};let Shake128Provider=class Shake128Provider extends d.Shake128Provider{async onDigest(t,r){return ShakeCrypto.digest(t,r)}};let Shake256Provider=class Shake256Provider extends d.Shake256Provider{async onDigest(t,r){return ShakeCrypto.digest(t,r)}};let SubtleCrypto=class SubtleCrypto extends d.SubtleCrypto{constructor(){var t;super(),this.providers.set(new AesCbcProvider),this.providers.set(new AesCtrProvider),this.providers.set(new AesGcmProvider),this.providers.set(new AesCmacProvider),this.providers.set(new AesKwProvider),this.providers.set(new AesEcbProvider),this.providers.set(new DesCbcProvider),this.providers.set(new DesEde3CbcProvider),this.providers.set(new RsaSsaProvider),this.providers.set(new RsaPssProvider),this.providers.set(new RsaOaepProvider),this.providers.set(new RsaEsProvider),this.providers.set(new EcdsaProvider),this.providers.set(new EcdhProvider),this.providers.set(new Sha1Provider),this.providers.set(new Sha256Provider),this.providers.set(new Sha384Provider),this.providers.set(new Sha512Provider),this.providers.set(new Pbkdf2Provider),this.providers.set(new HmacProvider),this.providers.set(new HkdfProvider);let r=null===(t=/^v(\d+)/.exec(p.version))||void 0===t?void 0:t[1];r&&parseInt(r,10)>=12&&(this.providers.set(new Shake128Provider),this.providers.set(new Shake256Provider));let n=h.getHashes();n.includes("sha3-256")&&this.providers.set(new Sha3256Provider),n.includes("sha3-384")&&this.providers.set(new Sha3384Provider),n.includes("sha3-512")&&this.providers.set(new Sha3512Provider),r&&parseInt(r,10)>=14&&(this.providers.set(new EdDsaProvider),this.providers.set(new EcdhEsProvider))}};let Crypto=class Crypto extends d.Crypto{constructor(){super(...arguments),this.subtle=new SubtleCrypto}getRandomValues(t){if(!ArrayBuffer.isView(t))throw TypeError("Failed to execute 'getRandomValues' on 'Crypto': parameter 1 is not of type 'ArrayBufferView'");let r=Buffer.from(t.buffer,t.byteOffset,t.byteLength);return o.randomFillSync(r),t}};r.w=Crypto},9525:(t,r,n)=>{/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */Object.defineProperty(r,"__esModule",{value:!0});var a=n(5693),o=n(2562);function _interopNamespace(t){if(t&&t.__esModule)return t;var r=Object.create(null);return t&&Object.keys(t).forEach(function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}}),r.default=t,Object.freeze(r)}var i=_interopNamespace(a),s=_interopNamespace(o);function assertBigInt(){if("undefined"==typeof BigInt)throw Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function concat(t){let r=0,n=0;for(let n=0;n<t.length;n++){let a=t[n];r+=a.byteLength}let a=new Uint8Array(r);for(let r=0;r<t.length;r++){let o=t[r];a.set(new Uint8Array(o),n),n+=o.byteLength}return a.buffer}function checkBufferParams(t,r,n,a){return r instanceof Uint8Array?r.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):a<0?(t.error="Wrong parameter: inputLength less than zero",!1):!(r.byteLength-n-a<0)||(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}let ViewWriter=class ViewWriter{constructor(){this.items=[]}write(t){this.items.push(t)}final(){return concat(this.items)}};let l=[new Uint8Array([1])],u="0123456789",c="name",d="valueHexView",h=new ArrayBuffer(0),p=new Uint8Array(0),y="EndOfContent",m="OCTET STRING",g="BIT STRING";function HexBlock(t){var r;return(r=class extends t{constructor(...t){var r;super(...t);let n=t[0]||{};this.isHexOnly=null!==(r=n.isHexOnly)&&void 0!==r&&r,this.valueHexView=n.valueHex?i.BufferSourceConverter.toUint8Array(n.valueHex):p}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(t){this.valueHexView=new Uint8Array(t)}fromBER(t,r,n){let a=t instanceof ArrayBuffer?new Uint8Array(t):t;if(!checkBufferParams(this,a,r,n))return -1;let o=r+n;return(this.valueHexView=a.subarray(r,o),this.valueHexView.length)?(this.blockLength=n,o):(this.warnings.push("Zero buffer length"),r)}toBER(t=!1){return this.isHexOnly?t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",h)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:i.Convert.ToHex(this.valueHexView)}}}).NAME="hexBlock",r}let LocalBaseBlock=class LocalBaseBlock{constructor({blockLength:t=0,error:r="",warnings:n=[],valueBeforeDecode:a=p}={}){this.blockLength=t,this.error=r,this.warnings=n,this.valueBeforeDecodeView=i.BufferSourceConverter.toUint8Array(a)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(t){this.valueBeforeDecodeView=new Uint8Array(t)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:i.Convert.ToHex(this.valueBeforeDecodeView)}}};LocalBaseBlock.NAME="baseBlock";let ValueBlock=class ValueBlock extends LocalBaseBlock{fromBER(t,r,n){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}};ValueBlock.NAME="valueBlock";let LocalIdentificationBlock=class LocalIdentificationBlock extends HexBlock(LocalBaseBlock){constructor({idBlock:t={}}={}){var r,n,a,o;super(),t?(this.isHexOnly=null!==(r=t.isHexOnly)&&void 0!==r&&r,this.valueHexView=t.valueHex?i.BufferSourceConverter.toUint8Array(t.valueHex):p,this.tagClass=null!==(n=t.tagClass)&&void 0!==n?n:-1,this.tagNumber=null!==(a=t.tagNumber)&&void 0!==a?a:-1,this.isConstructed=null!==(o=t.isConstructed)&&void 0!==o&&o):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(t=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",h}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){let n=new Uint8Array(1);if(!t){let t=this.tagNumber;t&=31,r|=t,n[0]=r}return n.buffer}if(!this.isHexOnly){let n=s.utilToBase(this.tagNumber,7),a=new Uint8Array(n),o=n.byteLength,i=new Uint8Array(o+1);if(i[0]=31|r,!t){for(let t=0;t<o-1;t++)i[t+1]=128|a[t];i[o]=a[o-1]}return i.buffer}let n=new Uint8Array(this.valueHexView.byteLength+1);if(n[0]=31|r,!t){let t=this.valueHexView;for(let r=0;r<t.length-1;r++)n[r+1]=128|t[r];n[this.valueHexView.byteLength]=t[t.length-1]}return n.buffer}fromBER(t,r,n){let a=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,a,r,n))return -1;let o=a.subarray(r,r+n);if(0===o.length)return this.error="Zero buffer length",-1;let l=192&o[0];switch(l){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(32&o[0])==32,this.isHexOnly=!1;let u=31&o[0];if(31!==u)this.tagNumber=u,this.blockLength=1;else{let t=1,r=this.valueHexView=new Uint8Array(255),n=255;for(;128&o[t];){if(r[t-1]=127&o[t],++t>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(t===n){n+=255;let t=new Uint8Array(n);for(let n=0;n<r.length;n++)t[n]=r[n];r=this.valueHexView=new Uint8Array(n)}}this.blockLength=t+1,r[t-1]=127&o[t];let a=new Uint8Array(t);for(let n=0;n<t;n++)a[n]=r[n];(r=this.valueHexView=new Uint8Array(t)).set(a),this.blockLength<=9?this.tagNumber=s.utilFromBase(r,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}};LocalIdentificationBlock.NAME="identificationBlock";let LocalLengthBlock=class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:t={}}={}){var r,n,a;super(),this.isIndefiniteForm=null!==(r=t.isIndefiniteForm)&&void 0!==r&&r,this.longFormUsed=null!==(n=t.longFormUsed)&&void 0!==n&&n,this.length=null!==(a=t.length)&&void 0!==a?a:0}fromBER(t,r,n){let a=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,a,r,n))return -1;let o=a.subarray(r,r+n);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,r+this.blockLength;let l=127&o[0];if(l>8)return this.error="Too big integer",-1;if(l+1>o.length)return this.error="End of input reached before message was fully decoded",-1;let u=r+1,c=a.subarray(u,u+l);return 0===c[l-1]&&this.warnings.push("Needlessly long encoded length"),this.length=s.utilFromBase(c,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=l+1,r+this.blockLength}toBER(t=!1){let r,n;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),!1===t&&((n=new Uint8Array(r))[0]=128),r;if(this.longFormUsed){let a=s.utilToBase(this.length,8);if(a.byteLength>127)return this.error="Too big length",h;if(r=new ArrayBuffer(a.byteLength+1),t)return r;let o=new Uint8Array(a);(n=new Uint8Array(r))[0]=128|a.byteLength;for(let t=0;t<a.byteLength;t++)n[t+1]=o[t];return r}return r=new ArrayBuffer(1),!1===t&&((n=new Uint8Array(r))[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}};LocalLengthBlock.NAME="lengthBlock";let b={};let BaseBlock=class BaseBlock extends LocalBaseBlock{constructor({name:t="",optional:r=!1,primitiveSchema:n,...a}={},o){super(a),this.name=t,this.optional=r,n&&(this.primitiveSchema=n),this.idBlock=new LocalIdentificationBlock(a),this.lenBlock=new LocalLengthBlock(a),this.valueBlock=o?new o(a):new ValueBlock(a)}fromBER(t,r,n){let a=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return -1===a?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),a}toBER(t,r){let n=r||new ViewWriter;r||function prepareIndefiniteForm(t){if(t instanceof b.Constructed)for(let r of t.valueBlock.value)prepareIndefiniteForm(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}(this);let a=this.idBlock.toBER(t);if(n.write(a),this.lenBlock.isIndefiniteForm)n.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(t,n),n.write(new ArrayBuffer(2));else{let r=this.valueBlock.toBER(t);this.lenBlock.length=r.byteLength;let a=this.lenBlock.toBER(t);n.write(a),n.write(r)}return r?h:n.final()}toJSON(){let t={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(t.primitiveSchema=this.primitiveSchema.toJSON()),t}toString(t="ascii"){return"ascii"===t?this.onAsciiEncoding():i.Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${i.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(t){if(this===t)return!0;if(!(t instanceof this.constructor))return!1;let r=this.toBER(),n=t.toBER();return s.isEqualBuffer(r,n)}};BaseBlock.NAME="BaseBlock";let BaseStringBlock=class BaseStringBlock extends BaseBlock{constructor({value:t="",...r}={},n){super(r,n),t&&this.fromString(t)}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}fromBER(t,r,n){let a=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return -1===a?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),a}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}};BaseStringBlock.NAME="BaseStringBlock";let LocalPrimitiveValueBlock=class LocalPrimitiveValueBlock extends HexBlock(ValueBlock){constructor({isHexOnly:t=!0,...r}={}){super(r),this.isHexOnly=t}};LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";let Primitive=class Primitive extends BaseBlock{constructor(t={}){super(t,LocalPrimitiveValueBlock),this.idBlock.isConstructed=!1}};function localFromBER(t,r=0,n=t.length){let a=r,o=new BaseBlock({},ValueBlock),i=new LocalBaseBlock;if(!checkBufferParams(i,t,r,n))return o.error=i.error,{offset:-1,result:o};let s=t.subarray(r,r+n);if(!s.length)return o.error="Zero buffer length",{offset:-1,result:o};let l=o.idBlock.fromBER(t,r,n);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),-1===l)return o.error=o.idBlock.error,{offset:-1,result:o};if(r=l,n-=o.idBlock.blockLength,l=o.lenBlock.fromBER(t,r,n),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),-1===l)return o.error=o.lenBlock.error,{offset:-1,result:o};if(r=l,n-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let u=BaseBlock;if(1===o.idBlock.tagClass){if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};u=b.EndOfContent;break;case 1:u=b.Boolean;break;case 2:u=b.Integer;break;case 3:u=b.BitString;break;case 4:u=b.OctetString;break;case 5:u=b.Null;break;case 6:u=b.ObjectIdentifier;break;case 10:u=b.Enumerated;break;case 12:u=b.Utf8String;break;case 13:u=b.RelativeObjectIdentifier;break;case 14:u=b.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:u=b.Sequence;break;case 17:u=b.Set;break;case 18:u=b.NumericString;break;case 19:u=b.PrintableString;break;case 20:u=b.TeletexString;break;case 21:u=b.VideotexString;break;case 22:u=b.IA5String;break;case 23:u=b.UTCTime;break;case 24:u=b.GeneralizedTime;break;case 25:u=b.GraphicString;break;case 26:u=b.VisibleString;break;case 27:u=b.GeneralString;break;case 28:u=b.UniversalString;break;case 29:u=b.CharacterString;break;case 30:u=b.BmpString;break;case 31:u=b.DATE;break;case 32:u=b.TimeOfDay;break;case 33:u=b.DateTime;break;case 34:u=b.Duration;break;default:{let t=o.idBlock.isConstructed?new b.Constructed:new b.Primitive;t.idBlock=o.idBlock,t.lenBlock=o.lenBlock,t.warnings=o.warnings,o=t}}}else u=o.idBlock.isConstructed?b.Constructed:b.Primitive;return l=(o=function(t,r){if(t instanceof r)return t;let n=new r;return n.idBlock=t.idBlock,n.lenBlock=t.lenBlock,n.warnings=t.warnings,n.valueBeforeDecodeView=t.valueBeforeDecodeView,n}(o,u)).fromBER(t,r,o.lenBlock.isIndefiniteForm?n:o.lenBlock.length),o.valueBeforeDecodeView=t.subarray(a,a+o.blockLength),{offset:l,result:o}}b.Primitive=Primitive,Primitive.NAME="PRIMITIVE";let LocalConstructedValueBlock=class LocalConstructedValueBlock extends ValueBlock{constructor({value:t=[],isIndefiniteForm:r=!1,...n}={}){super(n),this.value=t,this.isIndefiniteForm=r}fromBER(t,r,n){var a,o;let s=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,s,r,n))return -1;if(this.valueBeforeDecodeView=s.subarray(r,r+n),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),r;let l=r;for(;a=this.isIndefiniteForm,o=n,(a?1:o)>0;){let t=localFromBER(s,l,n);if(-1===t.offset)return this.error=t.result.error,this.warnings.concat(t.result.warnings),-1;if(l=t.offset,this.blockLength+=t.result.blockLength,n-=t.result.blockLength,this.value.push(t.result),this.isIndefiniteForm&&t.result.constructor.NAME===y)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===y?this.value.pop():this.warnings.push("No EndOfContent block encoded")),l}toBER(t,r){let n=r||new ViewWriter;for(let r=0;r<this.value.length;r++)this.value[r].toBER(t,n);return r?h:n.final()}toJSON(){let t={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(let r of this.value)t.value.push(r.toJSON());return t}};LocalConstructedValueBlock.NAME="ConstructedValueBlock";let Constructed=class Constructed extends BaseBlock{constructor(t={}){super(t,LocalConstructedValueBlock),this.idBlock.isConstructed=!0}fromBER(t,r,n){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;let a=this.valueBlock.fromBER(t,r,this.lenBlock.isIndefiniteForm?n:this.lenBlock.length);return -1===a?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),a}onAsciiEncoding(){let t=[];for(let r of this.valueBlock.value)t.push(r.toString("ascii").split("\n").map(t=>`  ${t}`).join("\n"));let r=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return t.length?`${r} :
${t.join("\n")}`:`${r} :`}};b.Constructed=Constructed,Constructed.NAME="CONSTRUCTED";let LocalEndOfContentValueBlock=class LocalEndOfContentValueBlock extends ValueBlock{fromBER(t,r,n){return r}toBER(t){return h}};LocalEndOfContentValueBlock.override="EndOfContentValueBlock";let EndOfContent=class EndOfContent extends BaseBlock{constructor(t={}){super(t,LocalEndOfContentValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}};b.EndOfContent=EndOfContent,EndOfContent.NAME=y;let Null=class Null extends BaseBlock{constructor(t={}){super(t,ValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(t,r,n){return(this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=n,r+n>t.byteLength)?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+n}toBER(t,r){let n=new ArrayBuffer(2);if(!t){let t=new Uint8Array(n);t[0]=5,t[1]=0}return r&&r.write(n),n}onAsciiEncoding(){return`${this.constructor.NAME}`}};b.Null=Null,Null.NAME="NULL";let LocalBooleanValueBlock=class LocalBooleanValueBlock extends HexBlock(ValueBlock){constructor({value:t,...r}={}){super(r),r.valueHex?this.valueHexView=i.BufferSourceConverter.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),t&&(this.value=t)}get value(){for(let t of this.valueHexView)if(t>0)return!0;return!1}set value(t){this.valueHexView[0]=t?255:0}fromBER(t,r,n){let a=i.BufferSourceConverter.toUint8Array(t);return checkBufferParams(this,a,r,n)?(this.valueHexView=a.subarray(r,r+n),n>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,s.utilDecodeTC.call(this),this.blockLength=n,r+n):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}};LocalBooleanValueBlock.NAME="BooleanValueBlock";let Boolean=class Boolean extends BaseBlock{constructor(t={}){super(t,LocalBooleanValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};b.Boolean=Boolean,Boolean.NAME="BOOLEAN";let LocalOctetStringValueBlock=class LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({isConstructed:t=!1,...r}={}){super(r),this.isConstructed=t}fromBER(t,r,n){let a=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(a=LocalConstructedValueBlock.prototype.fromBER.call(this,t,r,n)))return a;for(let t=0;t<this.value.length;t++){let r=this.value[t].constructor.NAME;if(r===y){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1;break}if(r!==m)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,a=super.fromBER(t,r,n),this.blockLength=n;return a}toBER(t,r){return this.isConstructed?LocalConstructedValueBlock.prototype.toBER.call(this,t,r):t?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}};LocalOctetStringValueBlock.NAME="OctetStringValueBlock";let OctetString=class OctetString extends BaseBlock{constructor({idBlock:t={},lenBlock:r={},...n}={}){var a,o;null!==(a=n.isConstructed)&&void 0!==a||(n.isConstructed=!!(null===(o=n.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:n.isConstructed,...t},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},LocalOctetStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(t,r,n){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===n)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){let a=t instanceof ArrayBuffer?new Uint8Array(t):t,o=a.subarray(r,r+n);try{if(o.byteLength){let t=localFromBER(o,0,o.byteLength);-1!==t.offset&&t.offset===n&&(this.valueBlock.value=[t.result])}}catch(t){}}return super.fromBER(t,r,n)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Constructed.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${i.Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;let t=[];for(let r of this.valueBlock.value)r instanceof OctetString&&t.push(r.valueBlock.valueHexView);return i.BufferSourceConverter.concat(t)}};b.OctetString=OctetString,OctetString.NAME=m;let LocalBitStringValueBlock=class LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({unusedBits:t=0,isConstructed:r=!1,...n}={}){super(n),this.unusedBits=t,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(t,r,n){if(!n)return r;let a=-1;if(this.isConstructed){if(-1===(a=LocalConstructedValueBlock.prototype.fromBER.call(this,t,r,n)))return a;for(let t of this.value){let r=t.constructor.NAME;if(r===y){if(!this.isIndefiniteForm)return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1;break}if(r!==g)return this.error="BIT STRING may consists of BIT STRINGs only",-1;let n=t.valueBlock;if(this.unusedBits>0&&n.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=n.unusedBits}return a}let o=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,o,r,n))return -1;let s=o.subarray(r,r+n);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){let t=s.subarray(1);try{if(t.byteLength){let r=localFromBER(t,0,t.byteLength);-1!==r.offset&&r.offset===n-1&&(this.value=[r.result])}}catch(t){}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,r+n}toBER(t,r){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,t,r);if(t)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return h;let n=new Uint8Array(this.valueHexView.length+1);return n[0]=this.unusedBits,n.set(this.valueHexView,1),n.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}};LocalBitStringValueBlock.NAME="BitStringValueBlock";let BitString=class BitString extends BaseBlock{constructor({idBlock:t={},lenBlock:r={},...n}={}){var a,o;null!==(a=n.isConstructed)&&void 0!==a||(n.isConstructed=!!(null===(o=n.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:n.isConstructed,...t},lenBlock:{...r,isIndefiniteForm:!!n.isIndefiniteForm},...n},LocalBitStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(t,r,n){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(t,r,n)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Constructed.prototype.onAsciiEncoding.call(this);{let t=[],r=this.valueBlock.valueHexView;for(let n of r)t.push(n.toString(2).padStart(8,"0"));let n=t.join("");return`${this.constructor.NAME} : ${n.substring(0,n.length-this.valueBlock.unusedBits)}`}}};function power2(t){if(t>=l.length)for(let r=l.length;r<=t;r++){let t=new Uint8Array([0]),n=l[r-1].slice(0);for(let r=n.length-1;r>=0;r--){let a=new Uint8Array([(n[r]<<1)+t[0]]);t[0]=a[0]/10,n[r]=a[0]%10}t[0]>0&&(n=s.utilConcatView(t,n)),l.push(n)}return l[t]}b.BitString=BitString,BitString.NAME=g;let LocalIntegerValueBlock=class LocalIntegerValueBlock extends HexBlock(ValueBlock){constructor({value:t,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),void 0!==t&&(this.valueDec=t)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=s.utilDecodeTC.call(this)))}set valueDec(t){this._valueDec=t,this.isHexOnly=!1,this.valueHexView=new Uint8Array(s.utilEncodeTC(t))}get valueDec(){return this._valueDec}fromDER(t,r,n,a=0){let o=this.fromBER(t,r,n);if(-1===o)return o;let i=this.valueHexView;return 0===i[0]&&(128&i[1])!=0?this.valueHexView=i.subarray(1):0!==a&&i.length<a&&(a-i.length>1&&(a=i.length+1),this.valueHexView=i.subarray(a-i.length)),o}toDER(t=!1){let r=this.valueHexView;switch(!0){case(128&r[0])!=0:{let t=new Uint8Array(this.valueHexView.length+1);t[0]=0,t.set(r,1),this.valueHexView=t}break;case 0===r[0]&&(128&r[1])==0:this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(t)}fromBER(t,r,n){let a=super.fromBER(t,r,n);return -1===a||this.setValueHex(),a}toBER(t){return t?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){let t;let r=8*this.valueHexView.length-1,n=new Uint8Array(8*this.valueHexView.length/3),a=0,o=this.valueHexView,i="",l=!1;for(let l=o.byteLength-1;l>=0;l--){t=o[l];for(let o=0;o<8;o++)(1&t)==1&&(a===r?(n=function(t,r){let n,a=0,o=new Uint8Array(t),i=new Uint8Array(r),s=o.slice(0),l=s.length-1,u=i.slice(0),c=u.length-1,d=0;for(let t=c;t>=0;t--,d++)!0==(n=s[l-d]-u[c-d]-a)<0?(a=1,s[l-d]=n+10):(a=0,s[l-d]=n);if(a>0)for(let t=l-c+1;t>=0;t--,d++)if((n=s[l-d]-a)<0)a=1,s[l-d]=n+10;else{a=0,s[l-d]=n;break}return s.slice()}(power2(a),n),i="-"):n=function(t,r){let n=new Uint8Array([0]),a=new Uint8Array(t),o=new Uint8Array(r),i=a.slice(0),l=i.length-1,u=o.slice(0),c=u.length-1,d=0,h=c<l?l:c,p=0;for(let t=h;t>=0;t--,p++)d=!0==p<u.length?i[l-p]+u[c-p]+n[0]:i[l-p]+n[0],(n[0]=d/10,!0==p>=i.length)?i=s.utilConcatView(new Uint8Array([d%10]),i):i[l-p]=d%10;return n[0]>0&&(i=s.utilConcatView(n,i)),i}(n,power2(a))),a++,t>>=1}for(let t=0;t<n.length;t++)n[t]&&(l=!0),l&&(i+=u.charAt(n[t]));return!1===l&&(i+=u.charAt(0)),i}};LocalIntegerValueBlock.NAME="IntegerValueBlock",Object.defineProperty(LocalIntegerValueBlock.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});let Integer=class Integer extends BaseBlock{constructor(t={}){super(t,LocalIntegerValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return assertBigInt(),BigInt(this.valueBlock.toString())}static fromBigInt(t){assertBigInt();let r=BigInt(t),n=new ViewWriter,a=r.toString(16).replace(/^-/,""),o=new Uint8Array(i.Convert.FromHex(a));if(r<0){let t=new Uint8Array(o.length+(128&o[0]?1:0));t[0]|=128;let a=BigInt(`0x${i.Convert.ToHex(t)}`),s=i.BufferSourceConverter.toUint8Array(i.Convert.FromHex((a+r).toString(16)));s[0]|=128,n.write(s)}else 128&o[0]&&n.write(new Uint8Array([0])),n.write(o);let s=new Integer({valueHex:n.final()});return s}convertToDER(){let t=new Integer({valueHex:this.valueBlock.valueHexView});return t.valueBlock.toDER(),t}convertFromDER(){return new Integer({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}};b.Integer=Integer,Integer.NAME="INTEGER";let Enumerated=class Enumerated extends Integer{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}};b.Enumerated=Enumerated,Enumerated.NAME="ENUMERATED";let LocalSidValueBlock=class LocalSidValueBlock extends HexBlock(ValueBlock){constructor({valueDec:t=-1,isFirstSid:r=!1,...n}={}){super(n),this.valueDec=t,this.isFirstSid=r}fromBER(t,r,n){if(!n)return r;let a=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,a,r,n))return -1;let o=a.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let t=0;t<n&&(this.valueHexView[t]=127&o[t],this.blockLength++,(128&o[t])!=0);t++);let l=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength;t++)l[t]=this.valueHexView[t];return(this.valueHexView=l,(128&o[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s.utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(t){assertBigInt();let r=BigInt(t).toString(2);for(;r.length%7;)r="0"+r;let n=new Uint8Array(r.length/7);for(let t=0;t<n.length;t++)n[t]=parseInt(r.slice(7*t,7*t+7),2)+(t+1<n.length?128:0);this.fromBER(n.buffer,0,n.length)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);let r=this.valueHexView,n=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)n[t]=128|r[t];return n[this.blockLength-1]=r[this.blockLength-1],n.buffer}let r=s.utilToBase(this.valueDec,7);if(0===r.byteLength)return this.error="Error during encoding SID value",h;let n=new Uint8Array(r.byteLength);if(!t){let t=new Uint8Array(r),a=r.byteLength-1;for(let r=0;r<a;r++)n[r]=128|t[r];n[a]=t[a]}return n}toString(){let t="";if(this.isHexOnly)t=i.Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?t="0.":this.valueDec<=79?(t="1.",r-=40):(t="2.",r-=80),t+=r.toString()}else t=this.valueDec.toString();return t}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}};LocalSidValueBlock.NAME="sidBlock";let LocalObjectIdentifierValueBlock=class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:t="",...r}={}){super(r),this.value=[],t&&this.fromString(t)}fromBER(t,r,n){let a=r;for(;n>0;){let r=new LocalSidValueBlock;if(-1===(a=r.fromBER(t,a,n))){this.blockLength=0,this.error=r.error;break}0===this.value.length&&(r.isFirstSid=!0),this.blockLength+=r.blockLength,n-=r.blockLength,this.value.push(r)}return a}toBER(t){let r=[];for(let n=0;n<this.value.length;n++){let a=this.value[n].toBER(t);if(0===a.byteLength)return this.error=this.value[n].error,h;r.push(a)}return concat(r)}fromString(t){this.value=[];let r=0,n=0,a="",o=!1;do if(a=-1===(n=t.indexOf(".",r))?t.substring(r):t.substring(r,n),r=n+1,o){let t=this.value[0],r=0;switch(t.valueDec){case 0:break;case 1:r=40;break;case 2:r=80;break;default:this.value=[];return}let n=parseInt(a,10);if(isNaN(n))return;t.valueDec=n+r,o=!1}else{let t=new LocalSidValueBlock;if(a>Number.MAX_SAFE_INTEGER){assertBigInt();let r=BigInt(a);t.valueBigInt=r}else if(t.valueDec=parseInt(a,10),isNaN(t.valueDec))return;this.value.length||(t.isFirstSid=!0,o=!0),this.value.push(t)}while(-1!==n)}toString(){let t="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let a=this.value[n].toString();0!==n&&(t=`${t}.`),r?(a=`{${a}}`,this.value[n].isFirstSid?t=`2.{${a} - 80}`:t+=a):t+=a}return t}toJSON(){let t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)t.sidArray.push(this.value[r].toJSON());return t}};LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";let ObjectIdentifier=class ObjectIdentifier extends BaseBlock{constructor(t={}){super(t,LocalObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};b.ObjectIdentifier=ObjectIdentifier,ObjectIdentifier.NAME="OBJECT IDENTIFIER";let LocalRelativeSidValueBlock=class LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock){constructor({valueDec:t=0,...r}={}){super(r),this.valueDec=t}fromBER(t,r,n){if(0===n)return r;let a=i.BufferSourceConverter.toUint8Array(t);if(!checkBufferParams(this,a,r,n))return -1;let o=a.subarray(r,r+n);this.valueHexView=new Uint8Array(n);for(let t=0;t<n&&(this.valueHexView[t]=127&o[t],this.blockLength++,(128&o[t])!=0);t++);let l=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength;t++)l[t]=this.valueHexView[t];return(this.valueHexView=l,(128&o[this.blockLength-1])!=0)?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=s.utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(t){if(this.isHexOnly){if(t)return new ArrayBuffer(this.valueHexView.byteLength);let r=this.valueHexView,n=new Uint8Array(this.blockLength);for(let t=0;t<this.blockLength-1;t++)n[t]=128|r[t];return n[this.blockLength-1]=r[this.blockLength-1],n.buffer}let r=s.utilToBase(this.valueDec,7);if(0===r.byteLength)return this.error="Error during encoding SID value",h;let n=new Uint8Array(r.byteLength);if(!t){let t=new Uint8Array(r),a=r.byteLength-1;for(let r=0;r<a;r++)n[r]=128|t[r];n[a]=t[a]}return n.buffer}toString(){return this.isHexOnly?i.Convert.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}};LocalRelativeSidValueBlock.NAME="relativeSidBlock";let LocalRelativeObjectIdentifierValueBlock=class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:t="",...r}={}){super(r),this.value=[],t&&this.fromString(t)}fromBER(t,r,n){let a=r;for(;n>0;){let r=new LocalRelativeSidValueBlock;if(-1===(a=r.fromBER(t,a,n))){this.blockLength=0,this.error=r.error;break}this.blockLength+=r.blockLength,n-=r.blockLength,this.value.push(r)}return a}toBER(t,r){let n=[];for(let r=0;r<this.value.length;r++){let a=this.value[r].toBER(t);if(0===a.byteLength)return this.error=this.value[r].error,h;n.push(a)}return concat(n)}fromString(t){this.value=[];let r=0,n=0,a="";do{a=-1===(n=t.indexOf(".",r))?t.substring(r):t.substring(r,n),r=n+1;let o=new LocalRelativeSidValueBlock;if(o.valueDec=parseInt(a,10),isNaN(o.valueDec))break;this.value.push(o)}while(-1!==n);return!0}toString(){let t="",r=!1;for(let n=0;n<this.value.length;n++){r=this.value[n].isHexOnly;let a=this.value[n].toString();0!==n&&(t=`${t}.`),r?t+=a=`{${a}}`:t+=a}return t}toJSON(){let t={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)t.sidArray.push(this.value[r].toJSON());return t}};LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";let RelativeObjectIdentifier=class RelativeObjectIdentifier extends BaseBlock{constructor(t={}){super(t,LocalRelativeObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(t){this.valueBlock.fromString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}};b.RelativeObjectIdentifier=RelativeObjectIdentifier,RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";let Sequence=class Sequence extends Constructed{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}};b.Sequence=Sequence,Sequence.NAME="SEQUENCE";let Set=class Set extends Constructed{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};b.Set=Set,Set.NAME="SET";let LocalStringValueBlock=class LocalStringValueBlock extends HexBlock(ValueBlock){constructor({...t}={}){super(t),this.isHexOnly=!0,this.value=""}toJSON(){return{...super.toJSON(),value:this.value}}};LocalStringValueBlock.NAME="StringValueBlock";let LocalSimpleStringValueBlock=class LocalSimpleStringValueBlock extends LocalStringValueBlock{};LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";let LocalSimpleStringBlock=class LocalSimpleStringBlock extends BaseStringBlock{constructor({...t}={}){super(t,LocalSimpleStringValueBlock)}fromBuffer(t){this.valueBlock.value=String.fromCharCode.apply(null,i.BufferSourceConverter.toUint8Array(t))}fromString(t){let r=t.length,n=this.valueBlock.valueHexView=new Uint8Array(r);for(let a=0;a<r;a++)n[a]=t.charCodeAt(a);this.valueBlock.value=t}};LocalSimpleStringBlock.NAME="SIMPLE STRING";let LocalUtf8StringValueBlock=class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(t){this.valueBlock.valueHexView=i.BufferSourceConverter.toUint8Array(t);try{this.valueBlock.value=i.Convert.ToUtf8String(t)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=i.Convert.ToBinary(t)}}fromString(t){this.valueBlock.valueHexView=new Uint8Array(i.Convert.FromUtf8String(t)),this.valueBlock.value=t}};LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";let Utf8String=class Utf8String extends LocalUtf8StringValueBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}};b.Utf8String=Utf8String,Utf8String.NAME="UTF8String";let LocalBmpStringValueBlock=class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(t){this.valueBlock.value=i.Convert.ToUtf16String(t),this.valueBlock.valueHexView=i.BufferSourceConverter.toUint8Array(t)}fromString(t){this.valueBlock.value=t,this.valueBlock.valueHexView=new Uint8Array(i.Convert.FromUtf16String(t))}};LocalBmpStringValueBlock.NAME="BmpStringValueBlock";let BmpString=class BmpString extends LocalBmpStringValueBlock{constructor({...t}={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}};b.BmpString=BmpString,BmpString.NAME="BMPString";let LocalUniversalStringValueBlock=class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(t){let r=ArrayBuffer.isView(t)?t.slice().buffer:t.slice(0),n=new Uint8Array(r);for(let t=0;t<n.length;t+=4)n[t]=n[t+3],n[t+1]=n[t+2],n[t+2]=0,n[t+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(t){let r=t.length,n=this.valueBlock.valueHexView=new Uint8Array(4*r);for(let a=0;a<r;a++){let r=s.utilToBase(t.charCodeAt(a),8),o=new Uint8Array(r);if(o.length>4)continue;let i=4-o.length;for(let t=o.length-1;t>=0;t--)n[4*a+t+i]=o[t]}this.valueBlock.value=t}};LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";let UniversalString=class UniversalString extends LocalUniversalStringValueBlock{constructor({...t}={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}};b.UniversalString=UniversalString,UniversalString.NAME="UniversalString";let NumericString=class NumericString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}};b.NumericString=NumericString,NumericString.NAME="NumericString";let PrintableString=class PrintableString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}};b.PrintableString=PrintableString,PrintableString.NAME="PrintableString";let TeletexString=class TeletexString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}};b.TeletexString=TeletexString,TeletexString.NAME="TeletexString";let VideotexString=class VideotexString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}};b.VideotexString=VideotexString,VideotexString.NAME="VideotexString";let IA5String=class IA5String extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}};b.IA5String=IA5String,IA5String.NAME="IA5String";let GraphicString=class GraphicString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}};b.GraphicString=GraphicString,GraphicString.NAME="GraphicString";let VisibleString=class VisibleString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}};b.VisibleString=VisibleString,VisibleString.NAME="VisibleString";let GeneralString=class GeneralString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}};b.GeneralString=GeneralString,GeneralString.NAME="GeneralString";let CharacterString=class CharacterString extends LocalSimpleStringBlock{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}};b.CharacterString=CharacterString,CharacterString.NAME="CharacterString";let UTCTime=class UTCTime extends VisibleString{constructor({value:t,valueDate:r,...n}={}){if(super(n),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,t){this.fromString(t),this.valueBlock.valueHexView=new Uint8Array(t.length);for(let r=0;r<t.length;r++)this.valueBlock.valueHexView[r]=t.charCodeAt(r)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(t){this.fromString(String.fromCharCode.apply(null,i.BufferSourceConverter.toUint8Array(t)))}toBuffer(){let t=this.toString(),r=new ArrayBuffer(t.length),n=new Uint8Array(r);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return r}fromDate(t){this.year=t.getUTCFullYear(),this.month=t.getUTCMonth()+1,this.day=t.getUTCDate(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(t){let r=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(t);if(null===r){this.error="Wrong input string for conversion";return}let n=parseInt(r[1],10);n>=50?this.year=1900+n:this.year=2e3+n,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}toString(t="iso"){if("iso"===t){let t=Array(7);return t[0]=s.padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=s.padNumber(this.month,2),t[2]=s.padNumber(this.day,2),t[3]=s.padNumber(this.hour,2),t[4]=s.padNumber(this.minute,2),t[5]=s.padNumber(this.second,2),t[6]="Z",t.join("")}return super.toString(t)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}};b.UTCTime=UTCTime,UTCTime.NAME="UTCTime";let GeneralizedTime=class GeneralizedTime extends UTCTime{constructor(t={}){var r;super(t),null!==(r=this.millisecond)&&void 0!==r||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(t){super.fromDate(t),this.millisecond=t.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(t){let r,n=!1,a="",o="",i=0,s=0,l=0;if("Z"===t[t.length-1])a=t.substring(0,t.length-1),n=!0;else{let r=new Number(t[t.length-1]);if(isNaN(r.valueOf()))throw Error("Wrong input string for conversion");a=t}if(n){if(-1!==a.indexOf("+")||-1!==a.indexOf("-"))throw Error("Wrong input string for conversion")}else{let t=1,r=a.indexOf("+"),n="";if(-1===r&&(r=a.indexOf("-"),t=-1),-1!==r){if(n=a.substring(r+1),a=a.substring(0,r),2!==n.length&&4!==n.length)throw Error("Wrong input string for conversion");let o=parseInt(n.substring(0,2),10);if(isNaN(o.valueOf()))throw Error("Wrong input string for conversion");if(s=t*o,4===n.length){if(isNaN((o=parseInt(n.substring(2,4),10)).valueOf()))throw Error("Wrong input string for conversion");l=t*o}}}let u=a.indexOf(".");if(-1===u&&(u=a.indexOf(",")),-1!==u){let t=new Number(`0${a.substring(u)}`);if(isNaN(t.valueOf()))throw Error("Wrong input string for conversion");i=t.valueOf(),o=a.substring(0,u)}else o=a;switch(!0){case 8===o.length:if(r=/(\d{4})(\d{2})(\d{2})/ig,-1!==u)throw Error("Wrong input string for conversion");break;case 10===o.length:if(r=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,-1!==u){let t=60*i;this.minute=Math.floor(t),t=60*(t-this.minute),this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 12===o.length:if(r=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==u){let t=60*i;this.second=Math.floor(t),t=1e3*(t-this.second),this.millisecond=Math.floor(t)}break;case 14===o.length:if(r=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,-1!==u){let t=1e3*i;this.millisecond=Math.floor(t)}break;default:throw Error("Wrong input string for conversion")}let c=r.exec(o);if(null===c)throw Error("Wrong input string for conversion");for(let t=1;t<c.length;t++)switch(t){case 1:this.year=parseInt(c[t],10);break;case 2:this.month=parseInt(c[t],10);break;case 3:this.day=parseInt(c[t],10);break;case 4:this.hour=parseInt(c[t],10)+s;break;case 5:this.minute=parseInt(c[t],10)+l;break;case 6:this.second=parseInt(c[t],10);break;default:throw Error("Wrong input string for conversion")}if(!1===n){let t=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=t.getUTCFullYear(),this.month=t.getUTCMonth(),this.day=t.getUTCDay(),this.hour=t.getUTCHours(),this.minute=t.getUTCMinutes(),this.second=t.getUTCSeconds(),this.millisecond=t.getUTCMilliseconds()}}toString(t="iso"){if("iso"===t){let t=[];return t.push(s.padNumber(this.year,4)),t.push(s.padNumber(this.month,2)),t.push(s.padNumber(this.day,2)),t.push(s.padNumber(this.hour,2)),t.push(s.padNumber(this.minute,2)),t.push(s.padNumber(this.second,2)),0!==this.millisecond&&(t.push("."),t.push(s.padNumber(this.millisecond,3))),t.push("Z"),t.join("")}return super.toString(t)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}};b.GeneralizedTime=GeneralizedTime,GeneralizedTime.NAME="GeneralizedTime";let DATE=class DATE extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};b.DATE=DATE,DATE.NAME="DATE";let TimeOfDay=class TimeOfDay extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}};b.TimeOfDay=TimeOfDay,TimeOfDay.NAME="TimeOfDay";let DateTime=class DateTime extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}};b.DateTime=DateTime,DateTime.NAME="DateTime";let Duration=class Duration extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}};b.Duration=Duration,Duration.NAME="Duration";let TIME=class TIME extends Utf8String{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}};b.TIME=TIME,TIME.NAME="TIME";let Any=class Any{constructor({name:t="",optional:r=!1}={}){this.name=t,this.optional=r}};let Choice=class Choice extends Any{constructor({value:t=[],...r}={}){super(r),this.value=t}};let Repeated=class Repeated extends Any{constructor({value:t=new Any,local:r=!1,...n}={}){super(n),this.value=t,this.local=r}};function compareSchema(t,r,n){if(n instanceof Choice){for(let a=0;a<n.value.length;a++){let o=compareSchema(t,r,n.value[a]);if(o.verified)return{verified:!0,result:t}}{let t={verified:!1,result:{error:"Wrong values for Choice type"}};return n.hasOwnProperty(c)&&(t.name=n.name),t}}if(n instanceof Any)return n.hasOwnProperty(c)&&(t[n.name]=r),{verified:!0,result:t};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(n instanceof Object==!1||"idBlock"in n==!1||"fromBER"in n.idBlock==!1||"toBER"in n.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let a=n.idBlock.toBER(!1);if(0===a.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};let o=n.idBlock.fromBER(a,0,a.byteLength);if(-1===o)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===n.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagClass!==r.idBlock.tagClass)return{verified:!1,result:t};if(!1===n.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.tagNumber!==r.idBlock.tagNumber)return{verified:!1,result:t};if(!1===n.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isConstructed!==r.idBlock.isConstructed)return{verified:!1,result:t};if(!("isHexOnly"in n.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.idBlock.isHexOnly!==r.idBlock.isHexOnly)return{verified:!1,result:t};if(n.idBlock.isHexOnly){if(d in n.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};let a=n.idBlock.valueHexView,o=r.idBlock.valueHexView;if(a.length!==o.length)return{verified:!1,result:t};for(let r=0;r<a.length;r++)if(a[r]!==o[1])return{verified:!1,result:t}}if(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name&&(t[n.name]=r)),n instanceof b.Constructed){let a=0,o={verified:!1,result:{error:"Unknown error"}},i=n.valueBlock.value.length;if(i>0&&n.valueBlock.value[0]instanceof Repeated&&(i=r.valueBlock.value.length),0===i)return{verified:!0,result:t};if(0===r.valueBlock.value.length&&0!==n.valueBlock.value.length){let r=!0;for(let t=0;t<n.valueBlock.value.length;t++)r=r&&(n.valueBlock.value[t].optional||!1);return r?{verified:!0,result:t}:(n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let s=0;s<i;s++)if(s-a>=r.valueBlock.value.length){if(!1===n.valueBlock.value[s].optional){let r={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name&&(delete t[n.name],r.name=n.name)),r}}else if(n.valueBlock.value[0]instanceof Repeated){if(!1===(o=compareSchema(t,r.valueBlock.value[s],n.valueBlock.value[0].value)).verified){if(!n.valueBlock.value[0].optional)return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name&&delete t[n.name]),o;a++}if(c in n.valueBlock.value[0]&&n.valueBlock.value[0].name.length>0){let a={};void 0===(a="local"in n.valueBlock.value[0]&&n.valueBlock.value[0].local?r:t)[n.valueBlock.value[0].name]&&(a[n.valueBlock.value[0].name]=[]),a[n.valueBlock.value[0].name].push(r.valueBlock.value[s])}}else if(!1===(o=compareSchema(t,r.valueBlock.value[s-a],n.valueBlock.value[s])).verified){if(!n.valueBlock.value[s].optional)return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name&&delete t[n.name]),o;a++}if(!1===o.verified){let r={verified:!1,result:t};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name&&(delete t[n.name],r.name=n.name)),r}return{verified:!0,result:t}}if(n.primitiveSchema&&d in r.valueBlock){let a=localFromBER(r.valueBlock.valueHexView);if(-1===a.offset){let r={verified:!1,result:a.result};return n.name&&(n.name=n.name.replace(/^\s+|\s+$/g,""),n.name&&(delete t[n.name],r.name=n.name)),r}return compareSchema(t,a.result,n.primitiveSchema)}return{verified:!0,result:t}}r.Any=Any,r.BaseBlock=BaseBlock,r.BaseStringBlock=BaseStringBlock,r.BitString=BitString,r.BmpString=BmpString,r.Boolean=Boolean,r.CharacterString=CharacterString,r.Choice=Choice,r.Constructed=Constructed,r.DATE=DATE,r.DateTime=DateTime,r.Duration=Duration,r.EndOfContent=EndOfContent,r.Enumerated=Enumerated,r.GeneralString=GeneralString,r.GeneralizedTime=GeneralizedTime,r.GraphicString=GraphicString,r.HexBlock=HexBlock,r.IA5String=IA5String,r.Integer=Integer,r.Null=Null,r.NumericString=NumericString,r.ObjectIdentifier=ObjectIdentifier,r.OctetString=OctetString,r.Primitive=Primitive,r.PrintableString=PrintableString,r.RawData=class{constructor({data:t=p}={}){this.dataView=i.BufferSourceConverter.toUint8Array(t)}get data(){return this.dataView.slice().buffer}set data(t){this.dataView=i.BufferSourceConverter.toUint8Array(t)}fromBER(t,r,n){let a=r+n;return this.dataView=i.BufferSourceConverter.toUint8Array(t).subarray(r,a),a}toBER(t){return this.dataView.slice().buffer}},r.RelativeObjectIdentifier=RelativeObjectIdentifier,r.Repeated=Repeated,r.Sequence=Sequence,r.Set=Set,r.TIME=TIME,r.TeletexString=TeletexString,r.TimeOfDay=TimeOfDay,r.UTCTime=UTCTime,r.UniversalString=UniversalString,r.Utf8String=Utf8String,r.ValueBlock=ValueBlock,r.VideotexString=VideotexString,r.ViewWriter=ViewWriter,r.VisibleString=VisibleString,r.compareSchema=compareSchema,r.fromBER=function(t){if(!t.byteLength){let t=new BaseBlock({},ValueBlock);return t.error="Input buffer has zero length",{offset:-1,result:t}}return localFromBER(i.BufferSourceConverter.toUint8Array(t).slice(),0,t.byteLength)},r.verifySchema=function(t,r){if(r instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};let n=localFromBER(i.BufferSourceConverter.toUint8Array(t));return -1===n.offset?{verified:!1,result:n.result}:compareSchema(n.result,n.result,r)}},5011:(t,r)=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */r.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var n={},a=(r||{}).decode||decode,o=0;o<t.length;){var i=t.indexOf("=",o);if(-1===i)break;var s=t.indexOf(";",o);if(-1===s)s=t.length;else if(s<i){o=t.lastIndexOf(";",i-1)+1;continue}var l=t.slice(o,i).trim();if(void 0===n[l]){var u=t.slice(i+1,s).trim();34===u.charCodeAt(0)&&(u=u.slice(1,-1)),n[l]=function(t,r){try{return r(t)}catch(r){return t}}(u,a)}o=s+1}return n},r.serialize=function(t,r,o){var i=o||{},s=i.encode||encode;if("function"!=typeof s)throw TypeError("option encode is invalid");if(!a.test(t))throw TypeError("argument name is invalid");var l=s(r);if(l&&!a.test(l))throw TypeError("argument val is invalid");var u=t+"="+l;if(null!=i.maxAge){var c=i.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(c)}if(i.domain){if(!a.test(i.domain))throw TypeError("option domain is invalid");u+="; Domain="+i.domain}if(i.path){if(!a.test(i.path))throw TypeError("option path is invalid");u+="; Path="+i.path}if(i.expires){var d=i.expires;if("[object Date]"!==n.call(d)&&!(d instanceof Date)||isNaN(d.valueOf()))throw TypeError("option expires is invalid");u+="; Expires="+d.toUTCString()}if(i.httpOnly&&(u+="; HttpOnly"),i.secure&&(u+="; Secure"),i.priority)switch("string"==typeof i.priority?i.priority.toLowerCase():i.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(i.sameSite)switch("string"==typeof i.sameSite?i.sameSite.toLowerCase():i.sameSite){case!0:case"strict":u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"none":u+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return u};var n=Object.prototype.toString,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function decode(t){return -1!==t.indexOf("%")?decodeURIComponent(t):t}function encode(t){return encodeURIComponent(t)}},1175:t=>{var isMergeableObject=function(t){var n;return!!t&&"object"==typeof t&&"[object RegExp]"!==(n=Object.prototype.toString.call(t))&&"[object Date]"!==n&&t.$$typeof!==r},r="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function cloneUnlessOtherwiseSpecified(t,r){return!1!==r.clone&&r.isMergeableObject(t)?deepmerge(Array.isArray(t)?[]:{},t,r):t}function defaultArrayMerge(t,r,n){return t.concat(r).map(function(t){return cloneUnlessOtherwiseSpecified(t,n)})}function getKeys(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(r){return t.propertyIsEnumerable(r)}):[])}function propertyIsOnObject(t,r){try{return r in t}catch(t){return!1}}function deepmerge(t,r,n){(n=n||{}).arrayMerge=n.arrayMerge||defaultArrayMerge,n.isMergeableObject=n.isMergeableObject||isMergeableObject,n.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var a,o,i=Array.isArray(r);return i!==Array.isArray(t)?cloneUnlessOtherwiseSpecified(r,n):i?n.arrayMerge(t,r,n):(o={},(a=n).isMergeableObject(t)&&getKeys(t).forEach(function(r){o[r]=cloneUnlessOtherwiseSpecified(t[r],a)}),getKeys(r).forEach(function(n){(!propertyIsOnObject(t,n)||Object.hasOwnProperty.call(t,n)&&Object.propertyIsEnumerable.call(t,n))&&(propertyIsOnObject(t,n)&&a.isMergeableObject(r[n])?o[n]=(function(t,r){if(!r.customMerge)return deepmerge;var n=r.customMerge(t);return"function"==typeof n?n:deepmerge})(n,a)(t[n],r[n],a):o[n]=cloneUnlessOtherwiseSpecified(r[n],a))}),o)}deepmerge.all=function(t,r){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,n){return deepmerge(t,n,r)},{})},t.exports=deepmerge},187:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.dotCase=void 0;var a=n(7175),o=n(2535);r.dotCase=function(t,r){return void 0===r&&(r={}),o.noCase(t,a.__assign({delimiter:"."},r))}},3255:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.lowerCase=r.localeLowerCase=void 0;var n={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{:"i",I:"",I:"i"}},az:{regexp:/\u0130/g,map:{:"i",I:"",I:"i"}},lt:{regexp:/\u0049|\u004A|\u012E|\u00CC|\u00CD|\u0128/g,map:{I:"i",J:"j",:"",:"i",:"i",:"i"}}};function lowerCase(t){return t.toLowerCase()}r.localeLowerCase=function(t,r){var a=n[r.toLowerCase()];return a?lowerCase(t.replace(a.regexp,function(t){return a.map[t]})):lowerCase(t)},r.lowerCase=lowerCase},1966:t=>{let isObject=t=>"object"==typeof t&&null!==t,r=Symbol("skip"),isObjectCustom=t=>isObject(t)&&!(t instanceof RegExp)&&!(t instanceof Error)&&!(t instanceof Date),mapObject=(t,n,a,o=new WeakMap)=>{if(a={deep:!1,target:{},...a},o.has(t))return o.get(t);o.set(t,a.target);let{target:i}=a;delete a.target;let mapArray=t=>t.map(t=>isObjectCustom(t)?mapObject(t,n,a,o):t);if(Array.isArray(t))return mapArray(t);for(let[s,l]of Object.entries(t)){let u=n(s,l,t);if(u===r)continue;let[c,d,{shouldRecurse:h=!0}={}]=u;"__proto__"!==c&&(a.deep&&h&&isObjectCustom(d)&&(d=Array.isArray(d)?mapArray(d):mapObject(d,n,a,o)),i[c]=d)}return i};t.exports=(t,r,n)=>{if(!isObject(t))throw TypeError(`Expected an object, got \`${t}\` (${typeof t})`);return mapObject(t,r,n)},t.exports.mapObjectSkip=r},5153:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"createProxy",{enumerable:!0,get:function(){return o}});let a=n(5951),o=a.createClientModuleProxy},5183:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"bailoutToClientRendering",{enumerable:!0,get:function(){return bailoutToClientRendering}});let a=n(66),o=n(5869);function bailoutToClientRendering(){let t=o.staticGenerationAsyncStorage.getStore();return null!=t&&!!t.forceStatic||((null==t?void 0:t.isStaticGeneration)&&(0,a.suspense)(),!1)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},2918:(t,r,n)=>{function clientHookInServerComponentError(t){}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"clientHookInServerComponentError",{enumerable:!0,get:function(){return clientHookInServerComponentError}}),n(2455),n(3542),("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},1099:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"DraftMode",{enumerable:!0,get:function(){return DraftMode}});let a=n(3657);let DraftMode=class DraftMode{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,a.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,a.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(t){this._provider=t}};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},2491:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{headers:function(){return headers},cookies:function(){return cookies},draftMode:function(){return draftMode}});let a=n(6888),o=n(1306),i=n(6449),s=n(4580),l=n(2934),u=n(3657),c=n(1099);function headers(){if((0,u.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return o.HeadersAdapter.seal(new Headers({}));let t=s.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return t.headers}function cookies(){if((0,u.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return a.RequestCookiesAdapter.seal(new i.RequestCookies(new Headers({})));let t=s.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let r=l.actionAsyncStorage.getStore();return r&&(r.isAction||r.isAppRoute)?t.mutableCookies:t.cookies}function draftMode(){let t=s.requestAsyncStorage.getStore();if(!t)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new c.DraftMode(t.draftMode)}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},9195:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{DYNAMIC_ERROR_CODE:function(){return n},DynamicServerError:function(){return DynamicServerError}});let n="DYNAMIC_SERVER_USAGE";let DynamicServerError=class DynamicServerError extends Error{constructor(t){super("Dynamic server usage: "+t),this.digest=n}};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},3859:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{ReadonlyURLSearchParams:function(){return ReadonlyURLSearchParams},useSearchParams:function(){return useSearchParams},usePathname:function(){return usePathname},ServerInsertedHTMLContext:function(){return u.ServerInsertedHTMLContext},useServerInsertedHTML:function(){return u.useServerInsertedHTML},useRouter:function(){return useRouter},useParams:function(){return useParams},useSelectedLayoutSegments:function(){return useSelectedLayoutSegments},useSelectedLayoutSegment:function(){return useSelectedLayoutSegment},redirect:function(){return c.redirect},permanentRedirect:function(){return c.permanentRedirect},RedirectType:function(){return c.RedirectType},notFound:function(){return d.notFound}});let a=n(3542),o=n(5781),i=n(8170),s=n(2918),l=n(8204),u=n(1626),c=n(8461),d=n(7082),h=Symbol("internal for urlsearchparams readonly");function readonlyURLSearchParamsError(){return Error("ReadonlyURLSearchParams cannot be modified")}let ReadonlyURLSearchParams=class ReadonlyURLSearchParams{[Symbol.iterator](){return this[h][Symbol.iterator]()}append(){throw readonlyURLSearchParamsError()}delete(){throw readonlyURLSearchParamsError()}set(){throw readonlyURLSearchParamsError()}sort(){throw readonlyURLSearchParamsError()}constructor(t){this[h]=t,this.entries=t.entries.bind(t),this.forEach=t.forEach.bind(t),this.get=t.get.bind(t),this.getAll=t.getAll.bind(t),this.has=t.has.bind(t),this.keys=t.keys.bind(t),this.values=t.values.bind(t),this.toString=t.toString.bind(t),this.size=t.size}};function useSearchParams(){(0,s.clientHookInServerComponentError)("useSearchParams");let t=(0,a.useContext)(i.SearchParamsContext),r=(0,a.useMemo)(()=>t?new ReadonlyURLSearchParams(t):null,[t]);{let{bailoutToClientRendering:t}=n(5183);t()}return r}function usePathname(){return(0,s.clientHookInServerComponentError)("usePathname"),(0,a.useContext)(i.PathnameContext)}function useRouter(){(0,s.clientHookInServerComponentError)("useRouter");let t=(0,a.useContext)(o.AppRouterContext);if(null===t)throw Error("invariant expected app router to be mounted");return t}function useParams(){(0,s.clientHookInServerComponentError)("useParams");let t=(0,a.useContext)(o.GlobalLayoutRouterContext),r=(0,a.useContext)(i.PathParamsContext);return(0,a.useMemo)(()=>(null==t?void 0:t.tree)?function getSelectedParams(t,r){void 0===r&&(r={});let n=t[1];for(let t of Object.values(n)){let n=t[0],a=Array.isArray(n),o=a?n[1]:n;if(!o||o.startsWith("__PAGE__"))continue;let i=a&&("c"===n[2]||"oc"===n[2]);i?r[n[0]]=n[1].split("/"):a&&(r[n[0]]=n[1]),r=getSelectedParams(t,r)}return r}(t.tree):r,[null==t?void 0:t.tree,r])}function useSelectedLayoutSegments(t){void 0===t&&(t="children"),(0,s.clientHookInServerComponentError)("useSelectedLayoutSegments");let{tree:r}=(0,a.useContext)(o.LayoutRouterContext);return function getSelectedLayoutSegmentPath(t,r,n,a){let o;if(void 0===n&&(n=!0),void 0===a&&(a=[]),n)o=t[1][r];else{var i;let r=t[1];o=null!=(i=r.children)?i:Object.values(r)[0]}if(!o)return a;let s=o[0],u=(0,l.getSegmentValue)(s);return!u||u.startsWith("__PAGE__")?a:(a.push(u),getSelectedLayoutSegmentPath(o,r,!1,a))}(r,t)}function useSelectedLayoutSegment(t){void 0===t&&(t="children"),(0,s.clientHookInServerComponentError)("useSelectedLayoutSegment");let r=useSelectedLayoutSegments(t);return 0===r.length?null:r[0]}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},7082:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{notFound:function(){return notFound},isNotFoundError:function(){return isNotFoundError}});let n="NEXT_NOT_FOUND";function notFound(){let t=Error(n);throw t.digest=n,t}function isNotFoundError(t){return(null==t?void 0:t.digest)===n}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},8461:(t,r,n)=>{var a;Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{RedirectType:function(){return a},getRedirectError:function(){return getRedirectError},redirect:function(){return redirect},permanentRedirect:function(){return permanentRedirect},isRedirectError:function(){return isRedirectError},getURLFromRedirectError:function(){return getURLFromRedirectError},getRedirectTypeFromError:function(){return getRedirectTypeFromError}});let o=n(4580),i="NEXT_REDIRECT";function getRedirectError(t,r,n){void 0===n&&(n=!1);let a=Error(i);a.digest=i+";"+r+";"+t+";"+n;let s=o.requestAsyncStorage.getStore();return s&&(a.mutableCookies=s.mutableCookies),a}function redirect(t,r){throw void 0===r&&(r="replace"),getRedirectError(t,r,!1)}function permanentRedirect(t,r){throw void 0===r&&(r="replace"),getRedirectError(t,r,!0)}function isRedirectError(t){if("string"!=typeof(null==t?void 0:t.digest))return!1;let[r,n,a,o]=t.digest.split(";",4);return r===i&&("replace"===n||"push"===n)&&"string"==typeof a&&("true"===o||"false"===o)}function getURLFromRedirectError(t){return isRedirectError(t)?t.digest.split(";",3)[2]:null}function getRedirectTypeFromError(t){if(!isRedirectError(t))throw Error("Not a redirect error");return t.digest.split(";",3)[1]}(function(t){t.push="push",t.replace="replace"})(a||(a={})),("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},8204:(t,r)=>{function getSegmentValue(t){return Array.isArray(t)?t[1]:t}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getSegmentValue",{enumerable:!0,get:function(){return getSegmentValue}}),("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},3657:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"staticGenerationBailout",{enumerable:!0,get:function(){return staticGenerationBailout}});let a=n(9195),o=n(5869);let StaticGenBailoutError=class StaticGenBailoutError extends Error{constructor(...t){super(...t),this.code="NEXT_STATIC_GEN_BAILOUT"}};function formatErrorMessage(t,r){let{dynamic:n,link:a}=r||{};return"Page"+(n?' with `dynamic = "'+n+'"`':"")+" couldn't be rendered statically because it used `"+t+"`."+(a?" See more info here: "+a:"")}let staticGenerationBailout=(t,r)=>{let n=o.staticGenerationAsyncStorage.getStore();if(null==n?void 0:n.forceStatic)return!0;if(null==n?void 0:n.dynamicShouldError){var i;throw new StaticGenBailoutError(formatErrorMessage(t,{...r,dynamic:null!=(i=null==r?void 0:r.dynamic)?i:"error"}))}if(!n||(n.revalidate=0,(null==r?void 0:r.dynamic)||(n.staticPrefetchBailout=!0)),null==n?void 0:n.isStaticGeneration){let o=new a.DynamicServerError(formatErrorMessage(t,{...r,link:"https://nextjs.org/docs/messages/dynamic-server-error"}));throw n.dynamicUsageDescription=t,n.dynamicUsageStack=o.stack,o}return!1};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},989:t=>{var r=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,i={};function stringifyCookie(t){var r;let n=["path"in t&&t.path&&`Path=${t.path}`,"expires"in t&&(t.expires||0===t.expires)&&`Expires=${("number"==typeof t.expires?new Date(t.expires):t.expires).toUTCString()}`,"maxAge"in t&&"number"==typeof t.maxAge&&`Max-Age=${t.maxAge}`,"domain"in t&&t.domain&&`Domain=${t.domain}`,"secure"in t&&t.secure&&"Secure","httpOnly"in t&&t.httpOnly&&"HttpOnly","sameSite"in t&&t.sameSite&&`SameSite=${t.sameSite}`,"priority"in t&&t.priority&&`Priority=${t.priority}`].filter(Boolean);return`${t.name}=${encodeURIComponent(null!=(r=t.value)?r:"")}; ${n.join("; ")}`}function parseCookie(t){let r=new Map;for(let n of t.split(/; */)){if(!n)continue;let t=n.indexOf("=");if(-1===t){r.set(n,"true");continue}let[a,o]=[n.slice(0,t),n.slice(t+1)];try{r.set(a,decodeURIComponent(null!=o?o:"true"))}catch{}}return r}function parseSetCookie(t){var r,n;if(!t)return;let[[a,o],...i]=parseCookie(t),{domain:u,expires:c,httponly:d,maxage:h,path:p,samesite:y,secure:m,priority:g}=Object.fromEntries(i.map(([t,r])=>[t.toLowerCase(),r])),b={name:a,value:decodeURIComponent(o),domain:u,...c&&{expires:new Date(c)},...d&&{httpOnly:!0},..."string"==typeof h&&{maxAge:Number(h)},path:p,...y&&{sameSite:s.includes(r=(r=y).toLowerCase())?r:void 0},...m&&{secure:!0},...g&&{priority:l.includes(n=(n=g).toLowerCase())?n:void 0}};return function(t){let r={};for(let n in t)t[n]&&(r[n]=t[n]);return r}(b)}((t,n)=>{for(var a in n)r(t,a,{get:n[a],enumerable:!0})})(i,{RequestCookies:()=>u,ResponseCookies:()=>c,parseCookie:()=>parseCookie,parseSetCookie:()=>parseSetCookie,stringifyCookie:()=>stringifyCookie}),t.exports=((t,i,s,l)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let s of a(i))o.call(t,s)||void 0===s||r(t,s,{get:()=>i[s],enumerable:!(l=n(i,s))||l.enumerable});return t})(r({},"__esModule",{value:!0}),i);var s=["strict","lax","none"],l=["low","medium","high"],u=class{constructor(t){this._parsed=new Map,this._headers=t;let r=t.get("cookie");if(r){let t=parseCookie(r);for(let[r,n]of t)this._parsed.set(r,{name:r,value:n})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...t){let r="string"==typeof t[0]?t[0]:t[0].name;return this._parsed.get(r)}getAll(...t){var r;let n=Array.from(this._parsed);if(!t.length)return n.map(([t,r])=>r);let a="string"==typeof t[0]?t[0]:null==(r=t[0])?void 0:r.name;return n.filter(([t])=>t===a).map(([t,r])=>r)}has(t){return this._parsed.has(t)}set(...t){let[r,n]=1===t.length?[t[0].name,t[0].value]:t,a=this._parsed;return a.set(r,{name:r,value:n}),this._headers.set("cookie",Array.from(a).map(([t,r])=>stringifyCookie(r)).join("; ")),this}delete(t){let r=this._parsed,n=Array.isArray(t)?t.map(t=>r.delete(t)):r.delete(t);return this._headers.set("cookie",Array.from(r).map(([t,r])=>stringifyCookie(r)).join("; ")),n}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(t=>`${t.name}=${encodeURIComponent(t.value)}`).join("; ")}},c=class{constructor(t){var r,n,a;this._parsed=new Map,this._headers=t;let o=null!=(a=null!=(n=null==(r=t.getSetCookie)?void 0:r.call(t))?n:t.get("set-cookie"))?a:[],i=Array.isArray(o)?o:function(t){if(!t)return[];var r,n,a,o,i,s=[],l=0;function skipWhitespace(){for(;l<t.length&&/\s/.test(t.charAt(l));)l+=1;return l<t.length}for(;l<t.length;){for(r=l,i=!1;skipWhitespace();)if(","===(n=t.charAt(l))){for(a=l,l+=1,skipWhitespace(),o=l;l<t.length&&"="!==(n=t.charAt(l))&&";"!==n&&","!==n;)l+=1;l<t.length&&"="===t.charAt(l)?(i=!0,l=o,s.push(t.substring(r,a)),r=l):l=a+1}else l+=1;(!i||l>=t.length)&&s.push(t.substring(r,t.length))}return s}(o);for(let t of i){let r=parseSetCookie(t);r&&this._parsed.set(r.name,r)}}get(...t){let r="string"==typeof t[0]?t[0]:t[0].name;return this._parsed.get(r)}getAll(...t){var r;let n=Array.from(this._parsed.values());if(!t.length)return n;let a="string"==typeof t[0]?t[0]:null==(r=t[0])?void 0:r.name;return n.filter(t=>t.name===a)}has(t){return this._parsed.has(t)}set(...t){let[r,n,a]=1===t.length?[t[0].name,t[0].value,t[0]]:t,o=this._parsed;return o.set(r,function(t={name:"",value:""}){return"number"==typeof t.expires&&(t.expires=new Date(t.expires)),t.maxAge&&(t.expires=new Date(Date.now()+1e3*t.maxAge)),(null===t.path||void 0===t.path)&&(t.path="/"),t}({name:r,value:n,...a})),function(t,r){for(let[,n]of(r.delete("set-cookie"),t)){let t=stringifyCookie(n);r.append("set-cookie",t)}}(o,this._headers),this}delete(...t){let[r,n,a]="string"==typeof t[0]?[t[0]]:[t[0].name,t[0].path,t[0].domain];return this.set({name:r,path:n,domain:a,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(stringifyCookie).join("; ")}}},6132:(t,r)=>{var n;Object.defineProperty(r,"x",{enumerable:!0,get:function(){return n}}),function(t){t.PAGES="PAGES",t.PAGES_API="PAGES_API",t.APP_PAGE="APP_PAGE",t.APP_ROUTE="APP_ROUTE"}(n||(n={}))},7096:(t,r,n)=>{t.exports=n(399)},5781:(t,r,n)=>{t.exports=n(7096).vendored.contexts.AppRouterContext},8170:(t,r,n)=>{t.exports=n(7096).vendored.contexts.HooksClientContext},1626:(t,r,n)=>{t.exports=n(7096).vendored.contexts.ServerInsertedHtml},5951:(t,r,n)=>{t.exports=n(7096).vendored["react-rsc"].ReactServerDOMWebpackServerEdge},3542:(t,r,n)=>{t.exports=n(7096).vendored["react-rsc"].React},1445:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{PageSignatureError:function(){return PageSignatureError},RemovedPageError:function(){return RemovedPageError},RemovedUAError:function(){return RemovedUAError}});let PageSignatureError=class PageSignatureError extends Error{constructor({page:t}){super(`The middleware "${t}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}};let RemovedPageError=class RemovedPageError extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}};let RemovedUAError=class RemovedUAError extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},428:(t,r,n)=>{Object.defineProperty(r,"Z",{enumerable:!0,get:function(){return a.NextRequest}});let a=n(8569)},5798:(t,r,n)=>{Object.defineProperty(r,"Z",{enumerable:!0,get:function(){return a.NextResponse}});let a=n(3172)},6863:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextURL",{enumerable:!0,get:function(){return NextURL}});let a=n(5331),o=n(9387),i=n(3490),s=n(470),l=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function parseURL(t,r){return new URL(String(t).replace(l,"localhost"),r&&String(r).replace(l,"localhost"))}let u=Symbol("NextURLInternal");let NextURL=class NextURL{constructor(t,r,n){let a,o;"object"==typeof r&&"pathname"in r||"string"==typeof r?(a=r,o=n||{}):o=n||r||{},this[u]={url:parseURL(t,a??o.base),options:o,basePath:""},this.analyze()}analyze(){var t,r,n,o,l;let c=(0,s.getNextPathnameInfo)(this[u].url.pathname,{nextConfig:this[u].options.nextConfig,parseData:!0,i18nProvider:this[u].options.i18nProvider}),d=(0,i.getHostname)(this[u].url,this[u].options.headers);this[u].domainLocale=this[u].options.i18nProvider?this[u].options.i18nProvider.detectDomainLocale(d):(0,a.detectDomainLocale)(null==(r=this[u].options.nextConfig)?void 0:null==(t=r.i18n)?void 0:t.domains,d);let h=(null==(n=this[u].domainLocale)?void 0:n.defaultLocale)||(null==(l=this[u].options.nextConfig)?void 0:null==(o=l.i18n)?void 0:o.defaultLocale);this[u].url.pathname=c.pathname,this[u].defaultLocale=h,this[u].basePath=c.basePath??"",this[u].buildId=c.buildId,this[u].locale=c.locale??h,this[u].trailingSlash=c.trailingSlash}formatPathname(){return(0,o.formatNextPathnameInfo)({basePath:this[u].basePath,buildId:this[u].buildId,defaultLocale:this[u].options.forceLocale?void 0:this[u].defaultLocale,locale:this[u].locale,pathname:this[u].url.pathname,trailingSlash:this[u].trailingSlash})}formatSearch(){return this[u].url.search}get buildId(){return this[u].buildId}set buildId(t){this[u].buildId=t}get locale(){return this[u].locale??""}set locale(t){var r,n;if(!this[u].locale||!(null==(n=this[u].options.nextConfig)?void 0:null==(r=n.i18n)?void 0:r.locales.includes(t)))throw TypeError(`The NextURL configuration includes no locale "${t}"`);this[u].locale=t}get defaultLocale(){return this[u].defaultLocale}get domainLocale(){return this[u].domainLocale}get searchParams(){return this[u].url.searchParams}get host(){return this[u].url.host}set host(t){this[u].url.host=t}get hostname(){return this[u].url.hostname}set hostname(t){this[u].url.hostname=t}get port(){return this[u].url.port}set port(t){this[u].url.port=t}get protocol(){return this[u].url.protocol}set protocol(t){this[u].url.protocol=t}get href(){let t=this.formatPathname(),r=this.formatSearch();return`${this.protocol}//${this.host}${t}${r}${this.hash}`}set href(t){this[u].url=parseURL(t),this.analyze()}get origin(){return this[u].url.origin}get pathname(){return this[u].url.pathname}set pathname(t){this[u].url.pathname=t}get hash(){return this[u].url.hash}set hash(t){this[u].url.hash=t}get search(){return this[u].url.search}set search(t){this[u].url.search=t}get password(){return this[u].url.password}set password(t){this[u].url.password=t}get username(){return this[u].url.username}set username(t){this[u].url.username=t}get basePath(){return this[u].basePath}set basePath(t){this[u].basePath=t.startsWith("/")?t:`/${t}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new NextURL(String(this),this[u].options)}}},1306:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{ReadonlyHeadersError:function(){return ReadonlyHeadersError},HeadersAdapter:function(){return HeadersAdapter}});let a=n(9165);let ReadonlyHeadersError=class ReadonlyHeadersError extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new ReadonlyHeadersError}};let HeadersAdapter=class HeadersAdapter extends Headers{constructor(t){super(),this.headers=new Proxy(t,{get(r,n,o){if("symbol"==typeof n)return a.ReflectAdapter.get(r,n,o);let i=n.toLowerCase(),s=Object.keys(t).find(t=>t.toLowerCase()===i);if(void 0!==s)return a.ReflectAdapter.get(r,s,o)},set(r,n,o,i){if("symbol"==typeof n)return a.ReflectAdapter.set(r,n,o,i);let s=n.toLowerCase(),l=Object.keys(t).find(t=>t.toLowerCase()===s);return a.ReflectAdapter.set(r,l??n,o,i)},has(r,n){if("symbol"==typeof n)return a.ReflectAdapter.has(r,n);let o=n.toLowerCase(),i=Object.keys(t).find(t=>t.toLowerCase()===o);return void 0!==i&&a.ReflectAdapter.has(r,i)},deleteProperty(r,n){if("symbol"==typeof n)return a.ReflectAdapter.deleteProperty(r,n);let o=n.toLowerCase(),i=Object.keys(t).find(t=>t.toLowerCase()===o);return void 0===i||a.ReflectAdapter.deleteProperty(r,i)}})}static seal(t){return new Proxy(t,{get(t,r,n){switch(r){case"append":case"delete":case"set":return ReadonlyHeadersError.callable;default:return a.ReflectAdapter.get(t,r,n)}}})}merge(t){return Array.isArray(t)?t.join(", "):t}static from(t){return t instanceof Headers?t:new HeadersAdapter(t)}append(t,r){let n=this.headers[t];"string"==typeof n?this.headers[t]=[n,r]:Array.isArray(n)?n.push(r):this.headers[t]=r}delete(t){delete this.headers[t]}get(t){let r=this.headers[t];return void 0!==r?this.merge(r):null}has(t){return void 0!==this.headers[t]}set(t,r){this.headers[t]=r}forEach(t,r){for(let[n,a]of this.entries())t.call(r,a,n,this)}*entries(){for(let t of Object.keys(this.headers)){let r=t.toLowerCase(),n=this.get(r);yield[r,n]}}*keys(){for(let t of Object.keys(this.headers)){let r=t.toLowerCase();yield r}}*values(){for(let t of Object.keys(this.headers)){let r=this.get(t);yield r}}[Symbol.iterator](){return this.entries()}}},9165:(t,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"ReflectAdapter",{enumerable:!0,get:function(){return ReflectAdapter}});let ReflectAdapter=class ReflectAdapter{static get(t,r,n){let a=Reflect.get(t,r,n);return"function"==typeof a?a.bind(t):a}static set(t,r,n,a){return Reflect.set(t,r,n,a)}static has(t,r){return Reflect.has(t,r)}static deleteProperty(t,r){return Reflect.deleteProperty(t,r)}}},6888:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{ReadonlyRequestCookiesError:function(){return ReadonlyRequestCookiesError},RequestCookiesAdapter:function(){return RequestCookiesAdapter},getModifiedCookieValues:function(){return getModifiedCookieValues},appendMutableCookies:function(){return appendMutableCookies},MutableRequestCookiesAdapter:function(){return MutableRequestCookiesAdapter}});let a=n(6449),o=n(9165);let ReadonlyRequestCookiesError=class ReadonlyRequestCookiesError extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new ReadonlyRequestCookiesError}};let RequestCookiesAdapter=class RequestCookiesAdapter{static seal(t){return new Proxy(t,{get(t,r,n){switch(r){case"clear":case"delete":case"set":return ReadonlyRequestCookiesError.callable;default:return o.ReflectAdapter.get(t,r,n)}}})}};let i=Symbol.for("next.mutated.cookies");function getModifiedCookieValues(t){let r=t[i];return r&&Array.isArray(r)&&0!==r.length?r:[]}function appendMutableCookies(t,r){let n=getModifiedCookieValues(r);if(0===n.length)return!1;let o=new a.ResponseCookies(t),i=o.getAll();for(let t of n)o.set(t);for(let t of i)o.set(t);return!0}let MutableRequestCookiesAdapter=class MutableRequestCookiesAdapter{static wrap(t,r){let n=new a.ResponseCookies(new Headers);for(let r of t.getAll())n.set(r);let s=[],l=new Set,updateResponseCookies=()=>{var t;let o=null==fetch.__nextGetStaticStore?void 0:null==(t=fetch.__nextGetStaticStore.call(fetch))?void 0:t.getStore();o&&(o.pathWasRevalidated=!0);let i=n.getAll();if(s=i.filter(t=>l.has(t.name)),r){let t=[];for(let r of s){let n=new a.ResponseCookies(new Headers);n.set(r),t.push(n.toString())}r(t)}};return new Proxy(n,{get(t,r,n){switch(r){case i:return s;case"delete":return function(...r){l.add("string"==typeof r[0]?r[0]:r[0].name);try{t.delete(...r)}finally{updateResponseCookies()}};case"set":return function(...r){l.add("string"==typeof r[0]?r[0]:r[0].name);try{return t.set(...r)}finally{updateResponseCookies()}};default:return o.ReflectAdapter.get(t,r,n)}}})}}},6449:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{RequestCookies:function(){return a.RequestCookies},ResponseCookies:function(){return a.ResponseCookies}});let a=n(989)},8569:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{INTERNALS:function(){return l},NextRequest:function(){return NextRequest}});let a=n(6863),o=n(6729),i=n(1445),s=n(6449),l=Symbol("internal request");let NextRequest=class NextRequest extends Request{constructor(t,r={}){let n="string"!=typeof t&&"url"in t?t.url:String(t);(0,o.validateURL)(n),t instanceof Request?super(t,r):super(n,r);let i=new a.NextURL(n,{headers:(0,o.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:r.nextConfig});this[l]={cookies:new s.RequestCookies(this.headers),geo:r.geo||{},ip:r.ip,nextUrl:i,url:i.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[l].cookies}get geo(){return this[l].geo}get ip(){return this[l].ip}get nextUrl(){return this[l].nextUrl}get page(){throw new i.RemovedPageError}get ua(){throw new i.RemovedUAError}get url(){return this[l].url}}},3172:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"NextResponse",{enumerable:!0,get:function(){return NextResponse}});let a=n(6863),o=n(6729),i=n(6449),s=Symbol("internal response"),l=new Set([301,302,303,307,308]);function handleMiddlewareField(t,r){var n;if(null==t?void 0:null==(n=t.request)?void 0:n.headers){if(!(t.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let n=[];for(let[a,o]of t.request.headers)r.set("x-middleware-request-"+a,o),n.push(a);r.set("x-middleware-override-headers",n.join(","))}}let NextResponse=class NextResponse extends Response{constructor(t,r={}){super(t,r),this[s]={cookies:new i.ResponseCookies(this.headers),url:r.url?new a.NextURL(r.url,{headers:(0,o.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:r.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[s].cookies}static json(t,r){let n=Response.json(t,r);return new NextResponse(n.body,n)}static redirect(t,r){let n="number"==typeof r?r:(null==r?void 0:r.status)??307;if(!l.has(n))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let a="object"==typeof r?r:{},i=new Headers(null==a?void 0:a.headers);return i.set("Location",(0,o.validateURL)(t)),new NextResponse(null,{...a,headers:i,status:n})}static rewrite(t,r){let n=new Headers(null==r?void 0:r.headers);return n.set("x-middleware-rewrite",(0,o.validateURL)(t)),handleMiddlewareField(r,n),new NextResponse(null,{...r,headers:n})}static next(t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-next","1"),handleMiddlewareField(t,r),new NextResponse(null,{...t,headers:r})}}},6729:(t,r)=>{function fromNodeOutgoingHttpHeaders(t){let r=new Headers;for(let[n,a]of Object.entries(t)){let t=Array.isArray(a)?a:[a];for(let a of t)void 0!==a&&("number"==typeof a&&(a=a.toString()),r.append(n,a))}return r}function splitCookiesString(t){var r,n,a,o,i,s=[],l=0;function skipWhitespace(){for(;l<t.length&&/\s/.test(t.charAt(l));)l+=1;return l<t.length}for(;l<t.length;){for(r=l,i=!1;skipWhitespace();)if(","===(n=t.charAt(l))){for(a=l,l+=1,skipWhitespace(),o=l;l<t.length&&"="!==(n=t.charAt(l))&&";"!==n&&","!==n;)l+=1;l<t.length&&"="===t.charAt(l)?(i=!0,l=o,s.push(t.substring(r,a)),r=l):l=a+1}else l+=1;(!i||l>=t.length)&&s.push(t.substring(r,t.length))}return s}function toNodeOutgoingHttpHeaders(t){let r={},n=[];if(t)for(let[a,o]of t.entries())"set-cookie"===a.toLowerCase()?(n.push(...splitCookiesString(o)),r[a]=1===n.length?n[0]:n):r[a]=o;return r}function validateURL(t){try{return String(new URL(String(t)))}catch(r){throw Error(`URL is malformed "${String(t)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:r})}}Object.defineProperty(r,"__esModule",{value:!0}),function(t,r){for(var n in r)Object.defineProperty(t,n,{enumerable:!0,get:r[n]})}(r,{fromNodeOutgoingHttpHeaders:function(){return fromNodeOutgoingHttpHeaders},splitCookiesString:function(){return splitCookiesString},toNodeOutgoingHttpHeaders:function(){return toNodeOutgoingHttpHeaders},validateURL:function(){return validateURL}})},3490:(t,r)=>{function getHostname(t,r){let n;if((null==r?void 0:r.host)&&!Array.isArray(r.host))n=r.host.toString().split(":")[0];else{if(!t.hostname)return;n=t.hostname}return n.toLowerCase()}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getHostname",{enumerable:!0,get:function(){return getHostname}})},5331:(t,r)=>{function detectDomainLocale(t,r,n){if(t)for(let i of(n&&(n=n.toLowerCase()),t)){var a,o;let t=null==(a=i.domain)?void 0:a.split(":")[0].toLowerCase();if(r===t||n===i.defaultLocale.toLowerCase()||(null==(o=i.locales)?void 0:o.some(t=>t.toLowerCase()===n)))return i}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"detectDomainLocale",{enumerable:!0,get:function(){return detectDomainLocale}})},99:(t,r)=>{function normalizeLocalePath(t,r){let n;let a=t.split("/");return(r||[]).some(r=>!!a[1]&&a[1].toLowerCase()===r.toLowerCase()&&(n=r,a.splice(1,1),t=a.join("/")||"/",!0)),{pathname:t,detectedLocale:n}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"normalizeLocalePath",{enumerable:!0,get:function(){return normalizeLocalePath}})},66:(t,r,n)=>{let{createProxy:a}=n(5153);t.exports=a("/Users/michellekhanyi/Desktop/Side Projects/Behind-the-seams/node_modules/next/dist/shared/lib/lazy-dynamic/dynamic-no-ssr.js")},5477:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLocale",{enumerable:!0,get:function(){return addLocale}});let a=n(2721),o=n(9203);function addLocale(t,r,n,i){if(!r||r===n)return t;let s=t.toLowerCase();return!i&&((0,o.pathHasPrefix)(s,"/api")||(0,o.pathHasPrefix)(s,"/"+r.toLowerCase()))?t:(0,a.addPathPrefix)(t,"/"+r)}},2721:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathPrefix",{enumerable:!0,get:function(){return addPathPrefix}});let a=n(1193);function addPathPrefix(t,r){if(!t.startsWith("/")||!r)return t;let{pathname:n,query:o,hash:i}=(0,a.parsePath)(t);return""+r+n+o+i}},9428:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addPathSuffix",{enumerable:!0,get:function(){return addPathSuffix}});let a=n(1193);function addPathSuffix(t,r){if(!t.startsWith("/")||!r)return t;let{pathname:n,query:o,hash:i}=(0,a.parsePath)(t);return""+n+r+o+i}},9387:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"formatNextPathnameInfo",{enumerable:!0,get:function(){return formatNextPathnameInfo}});let a=n(4419),o=n(2721),i=n(9428),s=n(5477);function formatNextPathnameInfo(t){let r=(0,s.addLocale)(t.pathname,t.locale,t.buildId?void 0:t.defaultLocale,t.ignorePrefix);return(t.buildId||!t.trailingSlash)&&(r=(0,a.removeTrailingSlash)(r)),t.buildId&&(r=(0,i.addPathSuffix)((0,o.addPathPrefix)(r,"/_next/data/"+t.buildId),"/"===t.pathname?"index.json":".json")),r=(0,o.addPathPrefix)(r,t.basePath),!t.buildId&&t.trailingSlash?r.endsWith("/")?r:(0,i.addPathSuffix)(r,"/"):(0,a.removeTrailingSlash)(r)}},470:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"getNextPathnameInfo",{enumerable:!0,get:function(){return getNextPathnameInfo}});let a=n(99),o=n(8200),i=n(9203);function getNextPathnameInfo(t,r){var n,s;let{basePath:l,i18n:u,trailingSlash:c}=null!=(n=r.nextConfig)?n:{},d={pathname:t,trailingSlash:"/"!==t?t.endsWith("/"):c};l&&(0,i.pathHasPrefix)(d.pathname,l)&&(d.pathname=(0,o.removePathPrefix)(d.pathname,l),d.basePath=l);let h=d.pathname;if(d.pathname.startsWith("/_next/data/")&&d.pathname.endsWith(".json")){let t=d.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),n=t[0];d.buildId=n,h="index"!==t[1]?"/"+t.slice(1).join("/"):"/",!0===r.parseData&&(d.pathname=h)}if(u){let t=r.i18nProvider?r.i18nProvider.analyze(d.pathname):(0,a.normalizeLocalePath)(d.pathname,u.locales);d.locale=t.detectedLocale,d.pathname=null!=(s=t.pathname)?s:d.pathname,!t.detectedLocale&&d.buildId&&(t=r.i18nProvider?r.i18nProvider.analyze(h):(0,a.normalizeLocalePath)(h,u.locales)).detectedLocale&&(d.locale=t.detectedLocale)}return d}},1193:(t,r)=>{function parsePath(t){let r=t.indexOf("#"),n=t.indexOf("?"),a=n>-1&&(r<0||n<r);return a||r>-1?{pathname:t.substring(0,a?n:r),query:a?t.substring(n,r>-1?r:void 0):"",hash:r>-1?t.slice(r):""}:{pathname:t,query:"",hash:""}}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"parsePath",{enumerable:!0,get:function(){return parsePath}})},9203:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"pathHasPrefix",{enumerable:!0,get:function(){return pathHasPrefix}});let a=n(1193);function pathHasPrefix(t,r){if("string"!=typeof t)return!1;let{pathname:n}=(0,a.parsePath)(t);return n===r||n.startsWith(r+"/")}},8200:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removePathPrefix",{enumerable:!0,get:function(){return removePathPrefix}});let a=n(9203);function removePathPrefix(t,r){if(!(0,a.pathHasPrefix)(t,r))return t;let n=t.slice(r.length);return n.startsWith("/")?n:"/"+n}},4419:(t,r)=>{function removeTrailingSlash(t){return t.replace(/\/$/,"")||"/"}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"removeTrailingSlash",{enumerable:!0,get:function(){return removeTrailingSlash}})},4596:(t,r,n)=>{t.exports=n(2491)},1412:(t,r,n)=>{t.exports=n(3859)},2535:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.noCase=void 0;var a=n(3255),o=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],i=/[^A-Z0-9]+/gi;function replace(t,r,n){return r instanceof RegExp?t.replace(r,n):r.reduce(function(t,r){return t.replace(r,n)},t)}r.noCase=function(t,r){void 0===r&&(r={});for(var n=r.splitRegexp,s=r.stripRegexp,l=r.transform,u=void 0===l?a.lowerCase:l,c=r.delimiter,d=void 0===c?" ":c,h=replace(replace(t,void 0===n?o:n,"$1\x00$2"),void 0===s?i:s,"\x00"),p=0,y=h.length;"\x00"===h.charAt(p);)p++;for(;"\x00"===h.charAt(y-1);)y--;return h.slice(p,y).split("\x00").map(u).join(d)}},8330:(t,r)=>{function escapeString(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function flags(t){return t&&t.sensitive?"":"i"}r.Bo=void 0,r.Bo=function pathToRegexp(t,r,n){var a;return t instanceof RegExp?function(t,r){if(!r)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,a=0,o=n.exec(t.source);o;)r.push({name:o[1]||a++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(t.source);return t}(t,r):Array.isArray(t)?(a=t.map(function(t){return pathToRegexp(t,r,n).source}),new RegExp("(?:".concat(a.join("|"),")"),flags(n))):function(t,r,n){void 0===n&&(n={});for(var a=n.strict,o=void 0!==a&&a,i=n.start,s=n.end,l=n.encode,u=void 0===l?function(t){return t}:l,c=n.delimiter,d=n.endsWith,h="[".concat(escapeString(void 0===d?"":d),"]|$"),p="[".concat(escapeString(void 0===c?"/#?":c),"]"),y=void 0===i||i?"^":"",m=0;m<t.length;m++){var g=t[m];if("string"==typeof g)y+=escapeString(u(g));else{var b=escapeString(u(g.prefix)),v=escapeString(u(g.suffix));if(g.pattern){if(r&&r.push(g),b||v){if("+"===g.modifier||"*"===g.modifier){var S="*"===g.modifier?"?":"";y+="(?:".concat(b,"((?:").concat(g.pattern,")(?:").concat(v).concat(b,"(?:").concat(g.pattern,"))*)").concat(v,")").concat(S)}else y+="(?:".concat(b,"(").concat(g.pattern,")").concat(v,")").concat(g.modifier)}else"+"===g.modifier||"*"===g.modifier?y+="((?:".concat(g.pattern,")").concat(g.modifier,")"):y+="(".concat(g.pattern,")").concat(g.modifier)}else y+="(?:".concat(b).concat(v,")").concat(g.modifier)}}if(void 0===s||s)o||(y+="".concat(p,"?")),y+=n.endsWith?"(?=".concat(h,")"):"$";else{var C=t[t.length-1],w="string"==typeof C?p.indexOf(C[C.length-1])>-1:void 0===C;o||(y+="(?:".concat(p,"(?=").concat(h,"))?")),w||(y+="(?=".concat(p,"|").concat(h,")"))}return new RegExp(y,flags(n))}(function(t,r){void 0===r&&(r={});for(var n=function(t){for(var r=[],n=0;n<t.length;){var a=t[n];if("*"===a||"+"===a||"?"===a){r.push({type:"MODIFIER",index:n,value:t[n++]});continue}if("\\"===a){r.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});continue}if("{"===a){r.push({type:"OPEN",index:n,value:t[n++]});continue}if("}"===a){r.push({type:"CLOSE",index:n,value:t[n++]});continue}if(":"===a){for(var o="",i=n+1;i<t.length;){var s=t.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s){o+=t[i++];continue}break}if(!o)throw TypeError("Missing parameter name at ".concat(n));r.push({type:"NAME",index:n,value:o}),n=i;continue}if("("===a){var l=1,u="",i=n+1;if("?"===t[i])throw TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<t.length;){if("\\"===t[i]){u+=t[i++]+t[i++];continue}if(")"===t[i]){if(0==--l){i++;break}}else if("("===t[i]&&(l++,"?"!==t[i+1]))throw TypeError("Capturing groups are not allowed at ".concat(i));u+=t[i++]}if(l)throw TypeError("Unbalanced pattern at ".concat(n));if(!u)throw TypeError("Missing pattern at ".concat(n));r.push({type:"PATTERN",index:n,value:u}),n=i;continue}r.push({type:"CHAR",index:n,value:t[n++]})}return r.push({type:"END",index:n,value:""}),r}(t),a=r.prefixes,o=void 0===a?"./":a,i="[^".concat(escapeString(r.delimiter||"/#?"),"]+?"),s=[],l=0,u=0,c="",tryConsume=function(t){if(u<n.length&&n[u].type===t)return n[u++].value},mustConsume=function(t){var r=tryConsume(t);if(void 0!==r)return r;var a=n[u],o=a.type,i=a.index;throw TypeError("Unexpected ".concat(o," at ").concat(i,", expected ").concat(t))},consumeText=function(){for(var t,r="";t=tryConsume("CHAR")||tryConsume("ESCAPED_CHAR");)r+=t;return r};u<n.length;){var d=tryConsume("CHAR"),h=tryConsume("NAME"),p=tryConsume("PATTERN");if(h||p){var y=d||"";-1===o.indexOf(y)&&(c+=y,y=""),c&&(s.push(c),c=""),s.push({name:h||l++,prefix:y,suffix:"",pattern:p||i,modifier:tryConsume("MODIFIER")||""});continue}var m=d||tryConsume("ESCAPED_CHAR");if(m){c+=m;continue}if(c&&(s.push(c),c=""),tryConsume("OPEN")){var y=consumeText(),g=tryConsume("NAME")||"",b=tryConsume("PATTERN")||"",v=consumeText();mustConsume("CLOSE"),s.push({name:g||(b?l++:""),pattern:g&&!b?i:b,prefix:y,suffix:v,modifier:tryConsume("MODIFIER")||""});continue}mustConsume("END")}return s}(t,n),r,n)}},5693:(t,r)=>{let BufferSourceConverter=class BufferSourceConverter{static isArrayBuffer(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)}static toArrayBuffer(t){return this.isArrayBuffer(t)?t:t.byteLength===t.buffer.byteLength||0===t.byteOffset&&t.byteLength===t.buffer.byteLength?t.buffer:this.toUint8Array(t.buffer).slice(t.byteOffset,t.byteOffset+t.byteLength).buffer}static toUint8Array(t){return this.toView(t,Uint8Array)}static toView(t,r){if(t.constructor===r)return t;if(this.isArrayBuffer(t))return new r(t);if(this.isArrayBufferView(t))return new r(t.buffer,t.byteOffset,t.byteLength);throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(t){return this.isArrayBufferView(t)||this.isArrayBuffer(t)}static isArrayBufferView(t){return ArrayBuffer.isView(t)||t&&this.isArrayBuffer(t.buffer)}static isEqual(t,r){let n=BufferSourceConverter.toUint8Array(t),a=BufferSourceConverter.toUint8Array(r);if(n.length!==a.byteLength)return!1;for(let t=0;t<n.length;t++)if(n[t]!==a[t])return!1;return!0}static concat(...t){let r;r=!Array.isArray(t[0])||t[1]instanceof Function?Array.isArray(t[0])&&t[1]instanceof Function?t[0]:t[t.length-1]instanceof Function?t.slice(0,t.length-1):t:t[0];let n=0;for(let t of r)n+=t.byteLength;let a=new Uint8Array(n),o=0;for(let t of r){let r=this.toUint8Array(t);a.set(r,o),o+=r.length}return t[t.length-1]instanceof Function?this.toView(a,t[t.length-1]):a.buffer}};let n="string",a=/^[0-9a-f]+$/i,o=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,i=/^[a-zA-Z0-9-_]+$/;let Utf8Converter=class Utf8Converter{static fromString(t){let r=unescape(encodeURIComponent(t)),n=new Uint8Array(r.length);for(let t=0;t<r.length;t++)n[t]=r.charCodeAt(t);return n.buffer}static toString(t){let r=BufferSourceConverter.toUint8Array(t),n="";for(let t=0;t<r.length;t++)n+=String.fromCharCode(r[t]);let a=decodeURIComponent(escape(n));return a}};let Utf16Converter=class Utf16Converter{static toString(t,r=!1){let n=BufferSourceConverter.toArrayBuffer(t),a=new DataView(n),o="";for(let t=0;t<n.byteLength;t+=2){let n=a.getUint16(t,r);o+=String.fromCharCode(n)}return o}static fromString(t,r=!1){let n=new ArrayBuffer(2*t.length),a=new DataView(n);for(let n=0;n<t.length;n++)a.setUint16(2*n,t.charCodeAt(n),r);return n}};let Convert=class Convert{static isHex(t){return typeof t===n&&a.test(t)}static isBase64(t){return typeof t===n&&o.test(t)}static isBase64Url(t){return typeof t===n&&i.test(t)}static ToString(t,r="utf8"){let n=BufferSourceConverter.toUint8Array(t);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return Utf16Converter.toString(n,!0);case"utf16":case"utf16be":return Utf16Converter.toString(n);default:throw Error(`Unknown type of encoding '${r}'`)}}static FromString(t,r="utf8"){if(!t)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(t);case"binary":return this.FromBinary(t);case"hex":return this.FromHex(t);case"base64":return this.FromBase64(t);case"base64url":return this.FromBase64Url(t);case"utf16le":return Utf16Converter.fromString(t,!0);case"utf16":case"utf16be":return Utf16Converter.fromString(t);default:throw Error(`Unknown type of encoding '${r}'`)}}static ToBase64(t){let r=BufferSourceConverter.toUint8Array(t);if("undefined"==typeof btoa)return Buffer.from(r).toString("base64");{let t=this.ToString(r,"binary");return btoa(t)}}static FromBase64(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!Convert.isBase64(r))throw TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!Convert.isBase64Url(r))throw TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(t){return this.ToBase64(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(t,r=Convert.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(t);case"utf8":return Utf8Converter.fromString(t);case"utf16":case"utf16be":return Utf16Converter.fromString(t);case"utf16le":case"usc2":return Utf16Converter.fromString(t,!0);default:throw Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(t,r=Convert.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(t);case"utf8":return Utf8Converter.toString(t);case"utf16":case"utf16be":return Utf16Converter.toString(t);case"utf16le":case"usc2":return Utf16Converter.toString(t,!0);default:throw Error(`Unknown type of encoding '${r}'`)}}static FromBinary(t){let r=t.length,n=new Uint8Array(r);for(let a=0;a<r;a++)n[a]=t.charCodeAt(a);return n.buffer}static ToBinary(t){let r=BufferSourceConverter.toUint8Array(t),n="";for(let t=0;t<r.length;t++)n+=String.fromCharCode(r[t]);return n}static ToHex(t){let r=BufferSourceConverter.toUint8Array(t),n="",a=r.length;for(let t=0;t<a;t++){let a=r[t];a<16&&(n+="0"),n+=a.toString(16)}return n}static FromHex(t){let r=this.formatString(t);if(!r)return new ArrayBuffer(0);if(!Convert.isHex(r))throw TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);let n=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2){let a=r.slice(t,t+2);n[t/2]=parseInt(a,16)}return n.buffer}static ToUtf16String(t,r=!1){return Utf16Converter.toString(t,r)}static FromUtf16String(t,r=!1){return Utf16Converter.fromString(t,r)}static Base64Padding(t){let r=4-t.length%4;if(r<4)for(let n=0;n<r;n++)t+="=";return t}static formatString(t){return(null==t?void 0:t.replace(/[\n\r\t ]/g,""))||""}};Convert.DEFAULT_UTF8_ENCODING="utf8",r.BufferSourceConverter=BufferSourceConverter,r.Convert=Convert,r.assign=function(t,...r){let n=arguments[0];for(let t=1;t<arguments.length;t++){let r=arguments[t];for(let t in r)n[t]=r[t]}return n},r.combine=function(...t){let r=t.map(t=>t.byteLength).reduce((t,r)=>t+r),n=new Uint8Array(r),a=0;return t.map(t=>new Uint8Array(t)).forEach(t=>{for(let r of t)n[a++]=r}),n.buffer},r.isEqual=function(t,r){if(!(t&&r)||t.byteLength!==r.byteLength)return!1;let n=new Uint8Array(t),a=new Uint8Array(r);for(let r=0;r<t.byteLength;r++)if(n[r]!==a[r])return!1;return!0}},2562:(t,r)=>{function utilFromBase(t,r){let n=0;if(1===t.length)return t[0];for(let a=t.length-1;a>=0;a--)n+=t[t.length-1-a]*Math.pow(2,r*a);return n}function utilToBase(t,r,n=-1){let a=t,o=0,i=Math.pow(2,r);for(let s=1;s<8;s++){if(t<i){let t;if(n<0)t=new ArrayBuffer(s),o=s;else{if(n<s)return new ArrayBuffer(0);t=new ArrayBuffer(n),o=n}let i=new Uint8Array(t);for(let t=s-1;t>=0;t--){let n=Math.pow(2,t*r);i[o-t-1]=Math.floor(a/n),a-=i[o-t-1]*n}return t}i*=Math.pow(2,r)}return new ArrayBuffer(0)}/*!
 Copyright (c) Peculiar Ventures, LLC
*/Object.defineProperty(r,"__esModule",{value:!0});let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",o=Math.log(2);r.arrayBufferToString=function(t){let r="",n=new Uint8Array(t);for(let t of n)r+=String.fromCharCode(t);return r},r.bufferToHexCodes=function(t,r=0,n=t.byteLength-r,a=!1){let o="";for(let i of new Uint8Array(t,r,n)){let t=i.toString(16).toUpperCase();1===t.length&&(o+="0"),o+=t,a&&(o+=" ")}return o.trim()},r.checkBufferParams=function(t,r,n,a){return r instanceof ArrayBuffer?r.byteLength?n<0?(t.error="Wrong parameter: inputOffset less than zero",!1):a<0?(t.error="Wrong parameter: inputLength less than zero",!1):!(r.byteLength-n-a<0)||(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error='Wrong parameter: inputBuffer must be "ArrayBuffer"',!1)},r.clearProps=function(t,r){for(let n of r)delete t[n]},r.fromBase64=function(t,r=!1,o=!1){let i=r?a:n;function indexOf(t){for(let r=0;r<64;r++)if(i.charAt(r)===t)return r;return 64}function test(t){return 64===t?0:t}let s=0,l="";for(;s<t.length;){let r=indexOf(t.charAt(s++)),n=s>=t.length?0:indexOf(t.charAt(s++)),a=s>=t.length?0:indexOf(t.charAt(s++)),o=s>=t.length?0:indexOf(t.charAt(s++)),i=test(r)<<2|test(n)>>4,u=(15&test(n))<<4|test(a)>>2,c=(3&test(a))<<6|test(o);l+=String.fromCharCode(i),64!==a&&(l+=String.fromCharCode(u)),64!==o&&(l+=String.fromCharCode(c))}if(o){let t=l.length,r=-1;for(let n=t-1;n>=0;n--)if(0!==l.charCodeAt(n)){r=n;break}l=-1!==r?l.slice(0,r+1):""}return l},r.getParametersValue=function(t,r,n){var a;return t instanceof Object==!1?n:null!==(a=t[r])&&void 0!==a?a:n},r.getUTCDate=function(t){return new Date(t.getTime()+6e4*t.getTimezoneOffset())},r.isEqualBuffer=function(t,r){if(t.byteLength!==r.byteLength)return!1;let n=new Uint8Array(t),a=new Uint8Array(r);for(let t=0;t<n.length;t++)if(n[t]!==a[t])return!1;return!0},r.nearestPowerOf2=function(t){let r=Math.log(t)/o,n=Math.floor(r),a=Math.round(r);return n===a?n:a},r.padNumber=function(t,r){let n=t.toString(10);if(r<n.length)return"";let a=r-n.length,o=Array(a);for(let t=0;t<a;t++)o[t]="0";let i=o.join("");return i.concat(n)},r.stringToArrayBuffer=function(t){let r=t.length,n=new ArrayBuffer(r),a=new Uint8Array(n);for(let n=0;n<r;n++)a[n]=t.charCodeAt(n);return n},r.toBase64=function(t,r=!1,o=!1,i=!1){let s=0,l=0,u=0,c="",d=r?a:n;if(i){let r=0;for(let n=0;n<t.length;n++)if(0!==t.charCodeAt(n)){r=n;break}t=t.slice(r)}for(;s<t.length;){let r=t.charCodeAt(s++);s>=t.length&&(l=1);let n=t.charCodeAt(s++);s>=t.length&&(u=1);let a=t.charCodeAt(s++),i=r>>2,h=(3&r)<<4|n>>4,p=(15&n)<<2|a>>6,y=63&a;1===l?p=y=64:1===u&&(y=64),o?64===p?c+=`${d.charAt(i)}${d.charAt(h)}`:64===y?c+=`${d.charAt(i)}${d.charAt(h)}${d.charAt(p)}`:c+=`${d.charAt(i)}${d.charAt(h)}${d.charAt(p)}${d.charAt(y)}`:c+=`${d.charAt(i)}${d.charAt(h)}${d.charAt(p)}${d.charAt(y)}`}return c},r.utilConcatBuf=function(...t){let r=0,n=0;for(let n of t)r+=n.byteLength;let a=new ArrayBuffer(r),o=new Uint8Array(a);for(let r of t)o.set(new Uint8Array(r),n),n+=r.byteLength;return a},r.utilConcatView=function(...t){let r=0,n=0;for(let n of t)r+=n.length;let a=new ArrayBuffer(r),o=new Uint8Array(a);for(let r of t)o.set(r,n),n+=r.length;return o},r.utilDecodeTC=function(){let t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){let r=255===t[0]&&128&t[1],n=0===t[0]&&(128&t[1])==0;(r||n)&&this.warnings.push("Needlessly long format")}let r=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(r);for(let t=0;t<this.valueHex.byteLength;t++)n[t]=0;n[0]=128&t[0];let a=utilFromBase(n,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let r=0;r<this.valueHex.byteLength;r++)i[r]=t[r];i[0]&=127;let s=utilFromBase(i,8);return s-a},r.utilEncodeTC=function(t){let r=t<0?-1*t:t,n=128;for(let a=1;a<8;a++){if(r<=n){if(t<0){let t=n-r,o=utilToBase(t,8,a),i=new Uint8Array(o);return i[0]|=128,o}let o=utilToBase(r,8,a),i=new Uint8Array(o);if(128&i[0]){let t=o.slice(0),r=new Uint8Array(t);o=new ArrayBuffer(o.byteLength+1),i=new Uint8Array(o);for(let n=0;n<t.byteLength;n++)i[n+1]=r[n];i[0]=0}return o}n*=256}return new ArrayBuffer(0)},r.utilFromBase=utilFromBase,r.utilToBase=utilToBase},2708:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.snakeCase=void 0;var a=n(7175),o=n(187);r.snakeCase=function(t,r){return void 0===r&&(r={}),o.dotCase(t,a.__assign({delimiter:"_"},r))}},8903:(t,r,n)=>{let a=n(1966),{snakeCase:o}=n(2708);t.exports=function(t,r){return a(t,function(t,n){return[r.exclude.some(function(r){return"string"==typeof r?r===t:r.test(t)})?t:o(t,r.parsingOptions),n]},r=Object.assign({deep:!0,exclude:[],parsingOptions:{}},r))}},7321:(t,r,n)=>{/*!
 Copyright (c) Peculiar Ventures, LLC
*/var a=n(5693),o=n(1087),i=n(7175),s=n(5854),l=function(t){var r=Object.create(null);return t&&Object.keys(t).forEach(function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}}),r.default=t,Object.freeze(r)}(n(9525));let CryptoError=class CryptoError extends Error{};let AlgorithmError=class AlgorithmError extends CryptoError{};let UnsupportedOperationError=class UnsupportedOperationError extends CryptoError{constructor(t){super(`Unsupported operation: ${t?`${t}`:""}`)}};let OperationError=class OperationError extends CryptoError{};let RequiredPropertyError=class RequiredPropertyError extends CryptoError{constructor(t){super(`${t}: Missing required property`)}};function isJWK(t){return"object"==typeof t&&"kty"in t}let ProviderCrypto=class ProviderCrypto{async digest(...t){return this.checkDigest.apply(this,t),this.onDigest.apply(this,t)}checkDigest(t,r){this.checkAlgorithmName(t)}async onDigest(t,r){throw new UnsupportedOperationError("digest")}async generateKey(...t){return this.checkGenerateKey.apply(this,t),this.onGenerateKey.apply(this,t)}checkGenerateKey(t,r,n,...a){let o;if(this.checkAlgorithmName(t),this.checkGenerateKeyParams(t),!(n&&n.length))throw TypeError("Usages cannot be empty when creating a key.");o=Array.isArray(this.usages)?this.usages:this.usages.privateKey.concat(this.usages.publicKey),this.checkKeyUsages(n,o)}checkGenerateKeyParams(t){}async onGenerateKey(t,r,n,...a){throw new UnsupportedOperationError("generateKey")}async sign(...t){return this.checkSign.apply(this,t),this.onSign.apply(this,t)}checkSign(t,r,n,...a){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,"sign")}async onSign(t,r,n,...a){throw new UnsupportedOperationError("sign")}async verify(...t){return this.checkVerify.apply(this,t),this.onVerify.apply(this,t)}checkVerify(t,r,n,a,...o){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,"verify")}async onVerify(t,r,n,a,...o){throw new UnsupportedOperationError("verify")}async encrypt(...t){return this.checkEncrypt.apply(this,t),this.onEncrypt.apply(this,t)}checkEncrypt(t,r,n,a={},...o){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,a.keyUsage?"encrypt":void 0)}async onEncrypt(t,r,n,...a){throw new UnsupportedOperationError("encrypt")}async decrypt(...t){return this.checkDecrypt.apply(this,t),this.onDecrypt.apply(this,t)}checkDecrypt(t,r,n,a={},...o){this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,a.keyUsage?"decrypt":void 0)}async onDecrypt(t,r,n,...a){throw new UnsupportedOperationError("decrypt")}async deriveBits(...t){return this.checkDeriveBits.apply(this,t),this.onDeriveBits.apply(this,t)}checkDeriveBits(t,r,n,a={},...o){if(this.checkAlgorithmName(t),this.checkAlgorithmParams(t),this.checkCryptoKey(r,a.keyUsage?"deriveBits":void 0),n%8!=0)throw new OperationError("length: Is not multiple of 8")}async onDeriveBits(t,r,n,...a){throw new UnsupportedOperationError("deriveBits")}async exportKey(...t){return this.checkExportKey.apply(this,t),this.onExportKey.apply(this,t)}checkExportKey(t,r,...n){if(this.checkKeyFormat(t),this.checkCryptoKey(r),!r.extractable)throw new CryptoError("key: Is not extractable")}async onExportKey(t,r,...n){throw new UnsupportedOperationError("exportKey")}async importKey(...t){return this.checkImportKey.apply(this,t),this.onImportKey.apply(this,t)}checkImportKey(t,r,n,a,o,...i){this.checkKeyFormat(t),this.checkKeyData(t,r),this.checkAlgorithmName(n),this.checkImportParams(n),Array.isArray(this.usages)&&this.checkKeyUsages(o,this.usages)}async onImportKey(t,r,n,a,o,...i){throw new UnsupportedOperationError("importKey")}checkAlgorithmName(t){if(t.name.toLowerCase()!==this.name.toLowerCase())throw new AlgorithmError("Unrecognized name")}checkAlgorithmParams(t){}checkDerivedKeyParams(t){}checkKeyUsages(t,r){for(let n of t)if(-1===r.indexOf(n))throw TypeError("Cannot create a key using the specified key usages")}checkCryptoKey(t,r){if(this.checkAlgorithmName(t.algorithm),r&&-1===t.usages.indexOf(r))throw new CryptoError("key does not match that of operation")}checkRequiredProperty(t,r){if(!(r in t))throw new RequiredPropertyError(r)}checkHashAlgorithm(t,r){for(let n of r)if(n.toLowerCase()===t.name.toLowerCase())return;throw new OperationError(`hash: Must be one of ${r.join(", ")}`)}checkImportParams(t){}checkKeyFormat(t){switch(t){case"raw":case"pkcs8":case"spki":case"jwk":break;default:throw TypeError("format: Is invalid value. Must be 'jwk', 'raw', 'spki', or 'pkcs8'")}}checkKeyData(t,r){if(!r)throw TypeError("keyData: Cannot be empty on empty on key importing");if("jwk"===t){if(!isJWK(r))throw TypeError("keyData: Is not JsonWebToken")}else if(!a.BufferSourceConverter.isBufferSource(r))throw TypeError("keyData: Is not ArrayBufferView or ArrayBuffer")}prepareData(t){return a.BufferSourceConverter.toArrayBuffer(t)}};let AesProvider=class AesProvider extends ProviderCrypto{checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not of type Number");switch(t.length){case 128:case 192:case 256:break;default:throw TypeError("length: Must be 128, 192, or 256")}}checkDerivedKeyParams(t){this.checkGenerateKeyParams(t)}};let RsaProvider=class RsaProvider extends ProviderCrypto{constructor(){super(...arguments),this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"]}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),this.checkRequiredProperty(t,"publicExponent"),!(t.publicExponent&&t.publicExponent instanceof Uint8Array))throw TypeError("publicExponent: Missing or not a Uint8Array");let r=a.Convert.ToBase64(t.publicExponent);if(!("Aw=="===r||"AQAB"===r))throw TypeError("publicExponent: Must be [3] or [1,0,1]");if(this.checkRequiredProperty(t,"modulusLength"),t.modulusLength%8||t.modulusLength<256||t.modulusLength>16384)throw TypeError("The modulus length must be a multiple of 8 bits and >= 256 and <= 16384")}checkImportParams(t){this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms)}};let EllipticProvider=class EllipticProvider extends ProviderCrypto{checkGenerateKeyParams(t){this.checkRequiredProperty(t,"namedCurve"),this.checkNamedCurve(t.namedCurve)}checkNamedCurve(t){for(let r of this.namedCurves)if(r.toLowerCase()===t.toLowerCase())return;throw new OperationError(`namedCurve: Must be one of ${this.namedCurves.join(", ")}`)}};let u=["secret","private","public"];let CryptoKey=class CryptoKey{static create(t,r,n,a){let o=new this;return o.algorithm=t,o.type=r,o.extractable=n,o.usages=a,o}static isKeyType(t){return -1!==u.indexOf(t)}get[Symbol.toStringTag](){return"CryptoKey"}};let EcdhProvider=class EcdhProvider extends EllipticProvider{constructor(){super(...arguments),this.name="ECDH",this.usages={privateKey:["deriveBits","deriveKey"],publicKey:[]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"public"),!(t.public instanceof CryptoKey))throw TypeError("public: Is not a CryptoKey");if("public"!==t.public.type)throw new OperationError("public: Is not a public key");if(t.public.algorithm.name!==this.name)throw new OperationError(`public: Is not ${this.name} key`)}};let c=class{constructor(t){t&&(this.value=t)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.ObjectIdentifier})],c.prototype,"value",void 0),c=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],c);let AlgorithmIdentifier=class AlgorithmIdentifier{constructor(t){Object.assign(this,t)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.ObjectIdentifier})],AlgorithmIdentifier.prototype,"algorithm",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Any,optional:!0})],AlgorithmIdentifier.prototype,"parameters",void 0);let PrivateKeyInfo=class PrivateKeyInfo{constructor(){this.version=0,this.privateKeyAlgorithm=new AlgorithmIdentifier,this.privateKey=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer})],PrivateKeyInfo.prototype,"version",void 0),i.__decorate([o.AsnProp({type:AlgorithmIdentifier})],PrivateKeyInfo.prototype,"privateKeyAlgorithm",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],PrivateKeyInfo.prototype,"privateKey",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Any,optional:!0})],PrivateKeyInfo.prototype,"attributes",void 0);let PublicKeyInfo=class PublicKeyInfo{constructor(){this.publicKeyAlgorithm=new AlgorithmIdentifier,this.publicKey=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:AlgorithmIdentifier})],PublicKeyInfo.prototype,"publicKeyAlgorithm",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.BitString})],PublicKeyInfo.prototype,"publicKey",void 0);let d={fromJSON:t=>a.Convert.FromBase64Url(t),toJSON:t=>a.Convert.ToBase64Url(new Uint8Array(t))},h={fromASN:t=>{let r=t.valueBlock.valueHex;return new Uint8Array(r)[0]?t.valueBlock.valueHex:t.valueBlock.valueHex.slice(1)},toASN:t=>{let r=new Uint8Array(t)[0]>127?a.combine(new Uint8Array([0]).buffer,t):t;return new l.Integer({valueHex:r})}};var p=Object.freeze({__proto__:null,AsnIntegerArrayBufferConverter:h,JsonBase64UrlArrayBufferConverter:d});let RsaPrivateKey=class RsaPrivateKey{constructor(){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:o.AsnIntegerConverter})],RsaPrivateKey.prototype,"version",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"n",converter:d})],RsaPrivateKey.prototype,"modulus",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"e",converter:d})],RsaPrivateKey.prototype,"publicExponent",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"d",converter:d})],RsaPrivateKey.prototype,"privateExponent",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"p",converter:d})],RsaPrivateKey.prototype,"prime1",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"q",converter:d})],RsaPrivateKey.prototype,"prime2",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"dp",converter:d})],RsaPrivateKey.prototype,"exponent1",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"dq",converter:d})],RsaPrivateKey.prototype,"exponent2",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"qi",converter:d})],RsaPrivateKey.prototype,"coefficient",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Any,optional:!0})],RsaPrivateKey.prototype,"otherPrimeInfos",void 0);let RsaPublicKey=class RsaPublicKey{constructor(){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0)}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"n",converter:d})],RsaPublicKey.prototype,"modulus",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:h}),s.JsonProp({name:"e",converter:d})],RsaPublicKey.prototype,"publicExponent",void 0);let y=class{constructor(t){this.value=new ArrayBuffer(0),t&&(this.value=t)}toJSON(){let t=new Uint8Array(this.value);if(4!==t[0])throw new CryptoError("Wrong ECPoint. Current version supports only Uncompressed (0x04) point");t=new Uint8Array(this.value.slice(1));let r=t.length/2,n={x:a.Convert.ToBase64Url(t.buffer.slice(0,0+r)),y:a.Convert.ToBase64Url(t.buffer.slice(0+r,0+r+r))};return n}fromJSON(t){if(!("x"in t))throw Error("x: Missing required property");if(!("y"in t))throw Error("y: Missing required property");let r=a.Convert.FromBase64Url(t.x),n=a.Convert.FromBase64Url(t.y),o=a.combine(new Uint8Array([4]).buffer,r,n);return this.value=new Uint8Array(o).buffer,this}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],y.prototype,"value",void 0),y=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],y);let EcPrivateKey=class EcPrivateKey{constructor(){this.version=1,this.privateKey=new ArrayBuffer(0)}fromJSON(t){if(!("d"in t))throw Error("d: Missing required property");if(this.privateKey=a.Convert.FromBase64Url(t.d),"x"in t){let r=new y;r.fromJSON(t);let n=o.AsnSerializer.toASN(r);"valueHex"in n.valueBlock&&(this.publicKey=n.valueBlock.valueHex)}return this}toJSON(){let t={};return t.d=a.Convert.ToBase64Url(this.privateKey),this.publicKey&&Object.assign(t,new y(this.publicKey).toJSON()),t}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:o.AsnIntegerConverter})],EcPrivateKey.prototype,"version",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],EcPrivateKey.prototype,"privateKey",void 0),i.__decorate([o.AsnProp({context:0,type:o.AsnPropTypes.Any,optional:!0})],EcPrivateKey.prototype,"parameters",void 0),i.__decorate([o.AsnProp({context:1,type:o.AsnPropTypes.BitString,optional:!0})],EcPrivateKey.prototype,"publicKey",void 0);let m={fromASN:t=>{let r=new Uint8Array(t.valueBlock.valueHex);return 0===r[0]?r.buffer.slice(1):r.buffer},toASN:t=>{let r=new Uint8Array(t);if(r[0]>127){let t=new Uint8Array(r.length+1);return t.set(r,1),new l.Integer({valueHex:t.buffer})}return new l.Integer({valueHex:t})}};var g=Object.freeze({__proto__:null,AsnIntegerWithoutPaddingConverter:m});let EcUtils=class EcUtils{static decodePoint(t,r){let n=a.BufferSourceConverter.toUint8Array(t);if(0===n.length||4!==n[0])throw Error("Only uncompressed point format supported");let o=(n.length-1)/2;if(o!==Math.ceil(r/8))throw Error("Point does not match field size");let i=n.slice(1,o+1),s=n.slice(o+1,o+1+o);return{x:i,y:s}}static encodePoint(t,r){let n=Math.ceil(r/8);if(t.x.byteLength!==n||t.y.byteLength!==n)throw Error("X,Y coordinates don't match point size criteria");let o=a.BufferSourceConverter.toUint8Array(t.x),i=a.BufferSourceConverter.toUint8Array(t.y),s=new Uint8Array(2*n+1);return s[0]=4,s.set(o,1),s.set(i,n+1),s}static getSize(t){return Math.ceil(t/8)}static encodeSignature(t,r){let n=this.getSize(r),o=a.BufferSourceConverter.toUint8Array(t.r),i=a.BufferSourceConverter.toUint8Array(t.s),s=new Uint8Array(2*n);return s.set(this.padStart(o,n)),s.set(this.padStart(i,n),n),s}static decodeSignature(t,r){let n=this.getSize(r),o=a.BufferSourceConverter.toUint8Array(t);if(o.length!==2*n)throw Error("Incorrect size of the signature");let i=o.slice(0,n),s=o.slice(n);return{r:this.trimStart(i),s:this.trimStart(s)}}static trimStart(t){let r=0;for(;r<t.length-1&&0===t[r];)r++;return 0===r?t:t.slice(r,t.length)}static padStart(t,r){if(r===t.length)return t;let n=new Uint8Array(r);return n.set(t,r-t.length),n}};let EcDsaSignature=class EcDsaSignature{constructor(){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0)}static fromWebCryptoSignature(t){let r=t.byteLength/2,n=EcUtils.decodeSignature(t,8*r),o=new EcDsaSignature;return o.r=a.BufferSourceConverter.toArrayBuffer(n.r),o.s=a.BufferSourceConverter.toArrayBuffer(n.s),o}toWebCryptoSignature(t){null!=t||(t=8*Math.max(this.r.byteLength,this.s.byteLength));let r=EcUtils.encodeSignature(this,t);return r.buffer}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:m})],EcDsaSignature.prototype,"r",void 0),i.__decorate([o.AsnProp({type:o.AsnPropTypes.Integer,converter:m})],EcDsaSignature.prototype,"s",void 0);let OneAsymmetricKey=class OneAsymmetricKey extends PrivateKeyInfo{};i.__decorate([o.AsnProp({context:1,implicit:!0,type:o.AsnPropTypes.BitString,optional:!0})],OneAsymmetricKey.prototype,"publicKey",void 0);let b=class{constructor(){this.value=new ArrayBuffer(0)}fromJSON(t){if(!t.d)throw Error("d: Missing required property");return this.value=a.Convert.FromBase64Url(t.d),this}toJSON(){let t={d:a.Convert.ToBase64Url(this.value)};return t}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString})],b.prototype,"value",void 0),b=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],b);let v=class{constructor(t){this.value=new ArrayBuffer(0),t&&(this.value=t)}toJSON(){let t={x:a.Convert.ToBase64Url(this.value)};return t}fromJSON(t){if(!("x"in t))throw Error("x: Missing required property");return this.value=a.Convert.FromBase64Url(t.x),this}};i.__decorate([o.AsnProp({type:o.AsnPropTypes.BitString})],v.prototype,"value",void 0),v=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],v);let S=class{};i.__decorate([o.AsnProp({type:o.AsnPropTypes.OctetString}),s.JsonProp({type:s.JsonPropTypes.String,converter:d})],S.prototype,"d",void 0),S=i.__decorate([o.AsnType({type:o.AsnTypeTypes.Choice})],S);let C="1.2.840.10045.3.1.7",w="1.3.132.0",A=`${w}.34`,E=`${w}.35`,P=`${w}.10`,k="1.3.36.3.3.2.8.1.1",_=`${k}.1`,B=`${k}.2`,R=`${k}.3`,T=`${k}.4`,O=`${k}.5`,I=`${k}.6`,K=`${k}.7`,U=`${k}.8`,N=`${k}.9`,L=`${k}.10`,j=`${k}.11`,D=`${k}.12`,q=`${k}.13`,M=`${k}.14`;var W=Object.freeze({__proto__:null,AlgorithmIdentifier:AlgorithmIdentifier,get CurvePrivateKey(){return S},EcDsaSignature:EcDsaSignature,EcPrivateKey:EcPrivateKey,get EcPublicKey(){return y},get EdPrivateKey(){return b},get EdPublicKey(){return v},get ObjectIdentifier(){return c},OneAsymmetricKey:OneAsymmetricKey,PrivateKeyInfo:PrivateKeyInfo,PublicKeyInfo:PublicKeyInfo,RsaPrivateKey:RsaPrivateKey,RsaPublicKey:RsaPublicKey,converters:g,idBrainpoolP160r1:_,idBrainpoolP160t1:B,idBrainpoolP192r1:R,idBrainpoolP192t1:T,idBrainpoolP224r1:O,idBrainpoolP224t1:I,idBrainpoolP256r1:K,idBrainpoolP256t1:U,idBrainpoolP320r1:N,idBrainpoolP320t1:L,idBrainpoolP384r1:j,idBrainpoolP384t1:D,idBrainpoolP512r1:q,idBrainpoolP512t1:M,idEd25519:"1.3.101.112",idEd448:"1.3.101.113",idEllipticCurve:w,idSecp256k1:P,idSecp256r1:C,idSecp384r1:A,idSecp521r1:E,idVersionOne:k,idX25519:"1.3.101.110",idX448:"1.3.101.111"});let EcCurves=class EcCurves{constructor(){}static register(t){let r=new c;r.value=t.id;let n=o.AsnConvert.serialize(r);this.items.push({...t,raw:n}),this.names.push(t.name)}static find(t){for(let r of(t=t.toUpperCase(),this.items))if(r.name.toUpperCase()===t||r.id.toUpperCase()===t)return r;return null}static get(t){let r=this.find(t);if(!r)throw Error(`Unsupported EC named curve '${t}'`);return r}};EcCurves.items=[],EcCurves.names=[],EcCurves.register({name:"P-256",id:C,size:256}),EcCurves.register({name:"P-384",id:A,size:384}),EcCurves.register({name:"P-521",id:E,size:521}),EcCurves.register({name:"K-256",id:P,size:256}),EcCurves.register({name:"brainpoolP160r1",id:_,size:160}),EcCurves.register({name:"brainpoolP160t1",id:B,size:160}),EcCurves.register({name:"brainpoolP192r1",id:R,size:192}),EcCurves.register({name:"brainpoolP192t1",id:T,size:192}),EcCurves.register({name:"brainpoolP224r1",id:O,size:224}),EcCurves.register({name:"brainpoolP224t1",id:I,size:224}),EcCurves.register({name:"brainpoolP256r1",id:K,size:256}),EcCurves.register({name:"brainpoolP256t1",id:U,size:256}),EcCurves.register({name:"brainpoolP320r1",id:N,size:320}),EcCurves.register({name:"brainpoolP320t1",id:L,size:320}),EcCurves.register({name:"brainpoolP384r1",id:j,size:384}),EcCurves.register({name:"brainpoolP384t1",id:D,size:384}),EcCurves.register({name:"brainpoolP512r1",id:q,size:512}),EcCurves.register({name:"brainpoolP512t1",id:M,size:512});let ShakeProvider=class ShakeProvider extends ProviderCrypto{constructor(){super(...arguments),this.usages=[],this.defaultLength=0}digest(...t){return t[0]={length:this.defaultLength,...t[0]},super.digest.apply(this,t)}checkDigest(t,r){super.checkDigest(t,r);let n=t.length||0;if("number"!=typeof n)throw TypeError("length: Is not a Number");if(n<0)throw TypeError("length: Is negative")}};let Crypto=class Crypto{get[Symbol.toStringTag](){return"Crypto"}randomUUID(){let t=this.getRandomValues(new Uint8Array(16));t[6]=15&t[6]|64,t[8]=63&t[8]|128;let r=a.Convert.ToHex(t).toLowerCase();return`${r.substring(0,8)}-${r.substring(8,12)}-${r.substring(12,16)}-${r.substring(16,20)}-${r.substring(20)}`}};let ProviderStorage=class ProviderStorage{constructor(){this.items={}}get(t){return this.items[t.toLowerCase()]||null}set(t){this.items[t.name.toLowerCase()]=t}removeAt(t){let r=this.get(t.toLowerCase());return r&&delete this.items[t],r}has(t){return!!this.get(t)}get length(){return Object.keys(this.items).length}get algorithms(){let t=[];for(let r in this.items){let n=this.items[r];t.push(n.name)}return t.sort()}};let H={jwk:["private","public","secret"],pkcs8:["private"],spki:["public"],raw:["secret","public"]},z=["pkcs8","spki","raw"];let SubtleCrypto=class SubtleCrypto{constructor(){this.providers=new ProviderStorage}static isHashedAlgorithm(t){return!!t&&"object"==typeof t&&"name"in t&&"hash"in t}get[Symbol.toStringTag](){return"SubtleCrypto"}async digest(...t){this.checkRequiredArguments(t,2,"digest");let[r,n,...o]=t,i=this.prepareAlgorithm(r),s=a.BufferSourceConverter.toArrayBuffer(n),l=this.getProvider(i.name),u=await l.digest(i,s,...o);return u}async generateKey(...t){this.checkRequiredArguments(t,3,"generateKey");let[r,n,a,...o]=t,i=this.prepareAlgorithm(r),s=this.getProvider(i.name),l=await s.generateKey({...i,name:s.name},n,a,...o);return l}async sign(...t){this.checkRequiredArguments(t,3,"sign");let[r,n,o,...i]=t;this.checkCryptoKey(n);let s=this.prepareAlgorithm(r),l=a.BufferSourceConverter.toArrayBuffer(o),u=this.getProvider(s.name),c=await u.sign({...s,name:u.name},n,l,...i);return c}async verify(...t){this.checkRequiredArguments(t,4,"verify");let[r,n,o,i,...s]=t;this.checkCryptoKey(n);let l=this.prepareAlgorithm(r),u=a.BufferSourceConverter.toArrayBuffer(i),c=a.BufferSourceConverter.toArrayBuffer(o),d=this.getProvider(l.name),h=await d.verify({...l,name:d.name},n,c,u,...s);return h}async encrypt(...t){this.checkRequiredArguments(t,3,"encrypt");let[r,n,o,...i]=t;this.checkCryptoKey(n);let s=this.prepareAlgorithm(r),l=a.BufferSourceConverter.toArrayBuffer(o),u=this.getProvider(s.name),c=await u.encrypt({...s,name:u.name},n,l,{keyUsage:!0},...i);return c}async decrypt(...t){this.checkRequiredArguments(t,3,"decrypt");let[r,n,o,...i]=t;this.checkCryptoKey(n);let s=this.prepareAlgorithm(r),l=a.BufferSourceConverter.toArrayBuffer(o),u=this.getProvider(s.name),c=await u.decrypt({...s,name:u.name},n,l,{keyUsage:!0},...i);return c}async deriveBits(...t){this.checkRequiredArguments(t,3,"deriveBits");let[r,n,a,...o]=t;this.checkCryptoKey(n);let i=this.prepareAlgorithm(r),s=this.getProvider(i.name),l=await s.deriveBits({...i,name:s.name},n,a,{keyUsage:!0},...o);return l}async deriveKey(...t){this.checkRequiredArguments(t,5,"deriveKey");let[r,n,a,o,i,...s]=t,l=this.prepareAlgorithm(a),u=this.getProvider(l.name);u.checkDerivedKeyParams(l);let c=this.prepareAlgorithm(r),d=this.getProvider(c.name);d.checkCryptoKey(n,"deriveKey");let h=await d.deriveBits({...c,name:d.name},n,a.length||512,{keyUsage:!1},...s);return this.importKey("raw",h,a,o,i,...s)}async exportKey(...t){this.checkRequiredArguments(t,2,"exportKey");let[r,n,...a]=t;if(this.checkCryptoKey(n),!H[r])throw TypeError("Invalid keyFormat argument");if(!H[r].includes(n.type))throw new DOMException("The key is not of the expected type");let o=this.getProvider(n.algorithm.name),i=await o.exportKey(r,n,...a);return i}async importKey(...t){this.checkRequiredArguments(t,5,"importKey");let[r,n,o,i,s,...l]=t,u=this.prepareAlgorithm(o),c=this.getProvider(u.name);if("jwk"===r){if("object"!=typeof n||!n.kty)throw TypeError("Key data must be an object for JWK import")}else if(z.includes(r)){if(!a.BufferSourceConverter.isBufferSource(n))throw TypeError("Key data must be a BufferSource for non-JWK formats")}else throw TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView or JsonWebKey)'");return c.importKey(r,n,{...u,name:c.name},i,s,...l)}async wrapKey(t,r,n,o,...i){let s=await this.exportKey(t,r,...i);if("jwk"===t){let t=JSON.stringify(s);s=a.Convert.FromUtf8String(t)}let l=this.prepareAlgorithm(o),u=a.BufferSourceConverter.toArrayBuffer(s),c=this.getProvider(l.name);return c.encrypt({...l,name:c.name},n,u,{keyUsage:!1},...i)}async unwrapKey(t,r,n,o,i,s,l,...u){let c=this.prepareAlgorithm(o),d=a.BufferSourceConverter.toArrayBuffer(r),h=this.getProvider(c.name),p=await h.decrypt({...c,name:h.name},n,d,{keyUsage:!1},...u);if("jwk"===t)try{p=JSON.parse(a.Convert.ToUtf8String(p))}catch(r){let t=TypeError("wrappedKey: Is not a JSON");throw t.internal=r,t}return this.importKey(t,p,i,s,l,...u)}checkRequiredArguments(t,r,n){if(t.length<r)throw TypeError(`Failed to execute '${n}' on 'SubtleCrypto': ${r} arguments required, but only ${t.length} present`)}prepareAlgorithm(t){if("string"==typeof t)return{name:t};if(SubtleCrypto.isHashedAlgorithm(t)){let r={...t};return r.hash=this.prepareAlgorithm(t.hash),r}return{...t}}getProvider(t){let r=this.providers.get(t);if(!r)throw new AlgorithmError("Unrecognized name");return r}checkCryptoKey(t){if(!(t instanceof CryptoKey))throw TypeError("Key is not of type 'CryptoKey'")}};var F=Object.freeze({__proto__:null,converters:p});let V=["crv","e","k","kty","n","x","y"];Object.defineProperty(r,"BufferSourceConverter",{enumerable:!0,get:function(){return a.BufferSourceConverter}}),r.AesCbcProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-CBC",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"iv"),!(t.iv instanceof ArrayBuffer||ArrayBuffer.isView(t.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==t.iv.byteLength)throw TypeError("iv: Must have length 16 bytes")}},r.AesCmacProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-CMAC",this.usages=["sign","verify"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not a Number");if(t.length<1)throw new OperationError("length: Must be more than 0")}},r.AesCtrProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-CTR",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"counter"),!(t.counter instanceof ArrayBuffer||ArrayBuffer.isView(t.counter)))throw TypeError("counter: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(16!==t.counter.byteLength)throw TypeError("iv: Must have length 16 bytes");if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not a Number");if(t.length<1)throw new OperationError("length: Must be more than 0")}},r.AesEcbProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-ECB",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}},r.AesGcmProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-GCM",this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){var r;if(this.checkRequiredProperty(t,"iv"),!(t.iv instanceof ArrayBuffer||ArrayBuffer.isView(t.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(t.iv.byteLength<1)throw new OperationError("iv: Must have length more than 0 and less than 2^64 - 1");switch(null!==(r=t.tagLength)&&void 0!==r||(t.tagLength=128),t.tagLength){case 32:case 64:case 96:case 104:case 112:case 120:case 128:break;default:throw new OperationError("tagLength: Must be one of 32, 64, 96, 104, 112, 120 or 128")}}},r.AesKwProvider=class extends AesProvider{constructor(){super(...arguments),this.name="AES-KW",this.usages=["wrapKey","unwrapKey"]}},r.AesProvider=AesProvider,r.AlgorithmError=AlgorithmError,r.Crypto=Crypto,r.CryptoError=CryptoError,r.CryptoKey=CryptoKey,r.DesProvider=class extends ProviderCrypto{constructor(){super(...arguments),this.usages=["encrypt","decrypt","wrapKey","unwrapKey"]}checkAlgorithmParams(t){if(this.ivSize){if(this.checkRequiredProperty(t,"iv"),!(t.iv instanceof ArrayBuffer||ArrayBuffer.isView(t.iv)))throw TypeError("iv: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(t.iv.byteLength!==this.ivSize)throw TypeError(`iv: Must have length ${this.ivSize} bytes`)}}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"length"),"number"!=typeof t.length)throw TypeError("length: Is not of type Number");if(t.length!==this.keySizeBits)throw new OperationError(`algorithm.length: Must be ${this.keySizeBits}`)}checkDerivedKeyParams(t){this.checkGenerateKeyParams(t)}},r.EcCurves=EcCurves,r.EcUtils=EcUtils,r.EcdhEsProvider=class extends EcdhProvider{constructor(){super(...arguments),this.name="ECDH-ES",this.namedCurves=["X25519","X448"]}},r.EcdhProvider=EcdhProvider,r.EcdsaProvider=class extends EllipticProvider{constructor(){super(...arguments),this.name="ECDSA",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["P-256","P-384","P-521","K-256"]}checkAlgorithmParams(t){this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms)}},r.Ed25519Provider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="Ed25519",this.usages={privateKey:["sign"],publicKey:["verify"]}}},r.EdDsaProvider=class extends EllipticProvider{constructor(){super(...arguments),this.name="EdDSA",this.usages={privateKey:["sign"],publicKey:["verify"]},this.namedCurves=["Ed25519","Ed448"]}},r.EllipticProvider=EllipticProvider,r.HkdfProvider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="HKDF",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveKey","deriveBits"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),this.checkRequiredProperty(t,"salt"),!a.BufferSourceConverter.isBufferSource(t.salt)||(this.checkRequiredProperty(t,"info"),!a.BufferSourceConverter.isBufferSource(t.info)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'")}checkImportKey(t,r,n,a,o,...i){if(super.checkImportKey(t,r,n,a,o,...i),a)throw SyntaxError("extractable: Must be 'false'")}},r.HmacProvider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="HMAC",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["sign","verify"]}getDefaultLength(t){switch(t.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":return 512;default:throw Error(`Unknown algorithm name '${t}'`)}}checkGenerateKeyParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),"length"in t){if("number"!=typeof t.length)throw TypeError("length: Is not a Number");if(t.length<1)throw RangeError("length: Number is out of range")}}checkImportParams(t){this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms)}},r.JwkUtils=class{static async thumbprint(t,r,n){let o=this.format(r,!0);return n.subtle.digest(t,a.Convert.FromBinary(JSON.stringify(o)))}static format(t,r=!1){let n=Object.entries(t);return r&&(n=n.filter(t=>V.includes(t[0]))),Object.fromEntries(n=n.sort(([t],[r])=>t>r?1:t<r?-1:0))}},r.OperationError=OperationError,r.Pbkdf2Provider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="PBKDF2",this.hashAlgorithms=["SHA-1","SHA-256","SHA-384","SHA-512"],this.usages=["deriveBits","deriveKey"]}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"hash"),this.checkHashAlgorithm(t.hash,this.hashAlgorithms),this.checkRequiredProperty(t,"salt"),!(t.salt instanceof ArrayBuffer||ArrayBuffer.isView(t.salt)))throw TypeError("salt: Is not of type '(ArrayBuffer or ArrayBufferView)'");if(this.checkRequiredProperty(t,"iterations"),"number"!=typeof t.iterations)throw TypeError("iterations: Is not a Number");if(t.iterations<1)throw TypeError("iterations: Is less than 1")}checkImportKey(t,r,n,a,o,...i){if(super.checkImportKey(t,r,n,a,o,...i),a)throw SyntaxError("extractable: Must be 'false'")}},r.PemConverter=class{static toArrayBuffer(t){let r=t.replace(/-{5}(BEGIN|END) .*-{5}/g,"").replace("\r","").replace("\n","");return a.Convert.FromBase64(r)}static toUint8Array(t){let r=this.toArrayBuffer(t);return new Uint8Array(r)}static fromBufferSource(t,r){let n;let o=a.Convert.ToBase64(t),i=0,s=[];for(;i<o.length&&(n=o.slice(i,i+64)).length;)s.push(n),i+=64;let l=r.toUpperCase();return`-----BEGIN ${l}-----
${s.join("\n")}
-----END ${l}-----`}static isPEM(t){return/-----BEGIN .+-----[A-Za-z0-9+/+=\s\n]+-----END .+-----/i.test(t)}static getTagName(t){if(!this.isPEM(t))throw Error("Bad parameter. Incoming data is not right PEM");let r=/-----BEGIN (.+)-----/.exec(t);if(!r)throw Error("Cannot get tag from PEM");return r[1]}static hasTagName(t,r){let n=this.getTagName(t);return r.toLowerCase()===n.toLowerCase()}static isCertificate(t){return this.hasTagName(t,"certificate")}static isCertificateRequest(t){return this.hasTagName(t,"certificate request")}static isCRL(t){return this.hasTagName(t,"x509 crl")}static isPublicKey(t){return this.hasTagName(t,"public key")}},r.ProviderCrypto=ProviderCrypto,r.ProviderStorage=ProviderStorage,r.RequiredPropertyError=RequiredPropertyError,r.RsaOaepProvider=class extends RsaProvider{constructor(){super(...arguments),this.name="RSA-OAEP",this.usages={privateKey:["decrypt","unwrapKey"],publicKey:["encrypt","wrapKey"]}}checkAlgorithmParams(t){if(t.label&&!(t.label instanceof ArrayBuffer||ArrayBuffer.isView(t.label)))throw TypeError("label: Is not of type '(ArrayBuffer or ArrayBufferView)'")}},r.RsaProvider=RsaProvider,r.RsaPssProvider=class extends RsaProvider{constructor(){super(...arguments),this.name="RSA-PSS",this.usages={privateKey:["sign"],publicKey:["verify"]}}checkAlgorithmParams(t){if(this.checkRequiredProperty(t,"saltLength"),"number"!=typeof t.saltLength)throw TypeError("saltLength: Is not a Number");if(t.saltLength<0)throw RangeError("saltLength: Must be positive number")}},r.RsaSsaProvider=class extends RsaProvider{constructor(){super(...arguments),this.name="RSASSA-PKCS1-v1_5",this.usages={privateKey:["sign"],publicKey:["verify"]}}},r.Shake128Provider=class extends ShakeProvider{constructor(){super(...arguments),this.name="shake128",this.defaultLength=16}},r.Shake256Provider=class extends ShakeProvider{constructor(){super(...arguments),this.name="shake256",this.defaultLength=32}},r.ShakeProvider=ShakeProvider,r.SubtleCrypto=SubtleCrypto,r.UnsupportedOperationError=UnsupportedOperationError,r.X25519Provider=class extends ProviderCrypto{constructor(){super(...arguments),this.name="X25519",this.usages={privateKey:["deriveKey","deriveBits"],publicKey:[]}}checkAlgorithmParams(t){this.checkRequiredProperty(t,"public")}},r.asn1=W,r.isJWK=isJWK,r.json=F},2455:(t,r)=>{r._=r._interop_require_default=function(t){return t&&t.__esModule?t:{default:t}}},5276:(t,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0});let a=n(8192),o=n(7561),i=n(9411);n(8849),n(2286),n(5628),n(4492),n(2254),n(7261),n(1041),n(7503);let{stat:s}=o.promises,fromBlob=(t,r,n="")=>new a._Blob([new BlobDataItem({path:r,size:t.size,lastModified:t.mtimeMs,start:0})],{type:n}),fromFile=(t,r,n="")=>new a.File([new BlobDataItem({path:r,size:t.size,lastModified:t.mtimeMs,start:0})],i.basename(r),{type:n,lastModified:t.mtimeMs});let BlobDataItem=class BlobDataItem{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified,this.originalSize=void 0===t.originalSize?t.size:t.originalSize}slice(t,r){return new BlobDataItem({path:this.#e,lastModified:this.lastModified,originalSize:this.originalSize,size:r-t,start:this.#t+t})}async *stream(){let{mtimeMs:t,size:r}=await s(this.#e);if(t>this.lastModified||this.originalSize!==r)throw new a.nodeDomexception("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*o.createReadStream(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}};let l=globalThis.fetch||a.fetch,u=globalThis.Blob||a._Blob,c=globalThis.File||a.File,d=globalThis.FormData||a.FormData,h=globalThis.Headers||a.Headers,p=globalThis.Request||a.Request,y=globalThis.Response||a.Response,m=globalThis.AbortController||a.AbortController;r.AbortError=a.AbortError,r.FetchError=a.FetchError,r.isRedirect=a.isRedirect,r.AbortController=m,r.Blob=u,r.File=c,r.FormData=d,r.Headers=h,r.Request=p,r.Response=y,r.blobFrom=(t,r)=>s(t).then(n=>fromBlob(n,t,r)),r.blobFromSync=(t,r)=>fromBlob(o.statSync(t),t,r),r.default=l,r.fetch=l,r.fileFrom=(t,r)=>s(t).then(n=>fromFile(n,t,r)),r.fileFromSync=(t,r)=>fromFile(o.statSync(t),t,r)},8192:(t,r,n)=>{let a=n(8849),o=n(2286),i=n(5628),s=n(4492),l=n(2254),u=n(7261),c=n(1041),d=n(7503);n(7561),n(9411);var h,p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},y={exports:{}};if(!globalThis.ReadableStream)try{let t=n(7742),{emitWarning:r}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,n(2477)),t.emitWarning=r}catch(n){throw t.emitWarning=r,n}}catch(t){Object.assign(globalThis,(h||(h=1,function(t){let r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?Symbol:t=>`Symbol(${t})`;function noop(){}let n="undefined"!=typeof self?self:void 0!==p?p:void 0;function typeIsObject(t){return"object"==typeof t&&null!==t||"function"==typeof t}let a=Promise,o=Promise.prototype.then,i=Promise.resolve.bind(a),s=Promise.reject.bind(a);function newPromise(t){return new a(t)}function PerformPromiseThen(t,r,n){return o.call(t,r,n)}function uponPromise(t,r,n){PerformPromiseThen(PerformPromiseThen(t,r,n),void 0,noop)}function uponRejection(t,r){uponPromise(t,void 0,r)}function setPromiseIsHandledToTrue(t){PerformPromiseThen(t,void 0,noop)}let l=(()=>{let t=n&&n.queueMicrotask;if("function"==typeof t)return t;let r=i(void 0);return t=>PerformPromiseThen(r,t)})();function reflectCall(t,r,n){if("function"!=typeof t)throw TypeError("Argument is not a function");return Function.prototype.apply.call(t,r,n)}function promiseCall(t,r,n){try{var a;return a=reflectCall(t,r,n),i(a)}catch(t){return s(t)}}let SimpleQueue=class SimpleQueue{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let r=this._back,n=r;16383===r._elements.length&&(n={_elements:[],_next:void 0}),r._elements.push(t),n!==r&&(this._back=n,r._next=n),++this._size}shift(){let t=this._front,r=t,n=this._cursor,a=n+1,o=t._elements,i=o[n];return 16384===a&&(r=t._next,a=0),--this._size,this._cursor=a,t!==r&&(this._front=r),o[n]=void 0,i}forEach(t){let r=this._cursor,n=this._front,a=n._elements;for(;(r!==a.length||void 0!==n._next)&&(r!==a.length||(a=(n=n._next)._elements,r=0,0!==a.length));)t(a[r]),++r}peek(){let t=this._front,r=this._cursor;return t._elements[r]}};function ReadableStreamReaderGenericInitialize(t,r){var n;t._ownerReadableStream=r,r._reader=t,"readable"===r._state?defaultReaderClosedPromiseInitialize(t):"closed"===r._state?(defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseResolve(t)):(n=r._storedError,defaultReaderClosedPromiseInitialize(t),defaultReaderClosedPromiseReject(t,n))}function ReadableStreamReaderGenericCancel(t,r){let n=t._ownerReadableStream;return ReadableStreamCancel(n,r)}function ReadableStreamReaderGenericRelease(t){var r,n;"readable"===t._ownerReadableStream._state?defaultReaderClosedPromiseReject(t,TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):(r=t,n=TypeError("Reader was released and can no longer be used to monitor the stream's closedness"),defaultReaderClosedPromiseInitialize(r),defaultReaderClosedPromiseReject(r,n)),t._ownerReadableStream._reader=void 0,t._ownerReadableStream=void 0}function readerLockException(t){return TypeError("Cannot "+t+" a stream using a released reader")}function defaultReaderClosedPromiseInitialize(t){t._closedPromise=newPromise((r,n)=>{t._closedPromise_resolve=r,t._closedPromise_reject=n})}function defaultReaderClosedPromiseReject(t,r){void 0!==t._closedPromise_reject&&(setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}function defaultReaderClosedPromiseResolve(t){void 0!==t._closedPromise_resolve&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0)}let u=r("[[AbortSteps]]"),c=r("[[ErrorSteps]]"),d=r("[[CancelSteps]]"),h=r("[[PullSteps]]"),y=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},m=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function assertDictionary(t,r){if(void 0!==t&&!("object"==typeof t||"function"==typeof t))throw TypeError(`${r} is not an object.`)}function assertFunction(t,r){if("function"!=typeof t)throw TypeError(`${r} is not a function.`)}function assertObject(t,r){if(!("object"==typeof t&&null!==t||"function"==typeof t))throw TypeError(`${r} is not an object.`)}function assertRequiredArgument(t,r,n){if(void 0===t)throw TypeError(`Parameter ${r} is required in '${n}'.`)}function assertRequiredField(t,r,n){if(void 0===t)throw TypeError(`${r} is required in '${n}'.`)}function convertUnrestrictedDouble(t){return Number(t)}function convertUnsignedLongLongWithEnforceRange(t,r){var n,a;let o=Number.MAX_SAFE_INTEGER,i=Number(t);if(!y(i=0===(n=i)?0:n))throw TypeError(`${r} is not a finite number`);if((i=0===(a=m(i))?0:a)<0||i>o)throw TypeError(`${r} is outside the accepted range of 0 to ${o}, inclusive`);return y(i)&&0!==i?i:0}function assertReadableStream(t,r){if(!IsReadableStream(t))throw TypeError(`${r} is not a ReadableStream.`)}function AcquireReadableStreamDefaultReader(t){return new ReadableStreamDefaultReader(t)}function ReadableStreamAddReadRequest(t,r){t._reader._readRequests.push(r)}function ReadableStreamFulfillReadRequest(t,r,n){let a=t._reader,o=a._readRequests.shift();n?o._closeSteps():o._chunkSteps(r)}function ReadableStreamGetNumReadRequests(t){return t._reader._readRequests.length}function ReadableStreamHasDefaultReader(t){let r=t._reader;return!!(void 0!==r&&IsReadableStreamDefaultReader(r))}let ReadableStreamDefaultReader=class ReadableStreamDefaultReader{constructor(t){if(assertRequiredArgument(t,1,"ReadableStreamDefaultReader"),assertReadableStream(t,"First parameter"),IsReadableStreamLocked(t))throw TypeError("This stream has already been locked for exclusive reading by another reader");ReadableStreamReaderGenericInitialize(this,t),this._readRequests=new SimpleQueue}get closed(){return IsReadableStreamDefaultReader(this)?this._closedPromise:s(defaultReaderBrandCheckException("closed"))}cancel(t){return IsReadableStreamDefaultReader(this)?void 0===this._ownerReadableStream?s(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):s(defaultReaderBrandCheckException("cancel"))}read(){let t,r;if(!IsReadableStreamDefaultReader(this))return s(defaultReaderBrandCheckException("read"));if(void 0===this._ownerReadableStream)return s(readerLockException("read from"));let n=newPromise((n,a)=>{t=n,r=a});return ReadableStreamDefaultReaderRead(this,{_chunkSteps:r=>t({value:r,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:t=>r(t)}),n}releaseLock(){if(!IsReadableStreamDefaultReader(this))throw defaultReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}}};function IsReadableStreamDefaultReader(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_readRequests"))&&t instanceof ReadableStreamDefaultReader}function ReadableStreamDefaultReaderRead(t,r){let n=t._ownerReadableStream;n._disturbed=!0,"closed"===n._state?r._closeSteps():"errored"===n._state?r._errorSteps(n._storedError):n._readableStreamController[h](r)}function defaultReaderBrandCheckException(t){return TypeError(`ReadableStreamDefaultReader.prototype.${t} can only be used on a ReadableStreamDefaultReader`)}Object.defineProperties(ReadableStreamDefaultReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamDefaultReader.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});let g=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);let ReadableStreamAsyncIteratorImpl=class ReadableStreamAsyncIteratorImpl{constructor(t,r){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=r}next(){let nextSteps=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?PerformPromiseThen(this._ongoingPromise,nextSteps,nextSteps):nextSteps(),this._ongoingPromise}return(t){let returnSteps=()=>this._returnSteps(t);return this._ongoingPromise?PerformPromiseThen(this._ongoingPromise,returnSteps,returnSteps):returnSteps()}_nextSteps(){let t,r;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(void 0===n._ownerReadableStream)return s(readerLockException("iterate"));let a=newPromise((n,a)=>{t=n,r=a});return ReadableStreamDefaultReaderRead(n,{_chunkSteps:r=>{this._ongoingPromise=void 0,l(()=>t({value:r,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,ReadableStreamReaderGenericRelease(n),t({value:void 0,done:!0})},_errorSteps:t=>{this._ongoingPromise=void 0,this._isFinished=!0,ReadableStreamReaderGenericRelease(n),r(t)}}),a}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let r=this._reader;if(void 0===r._ownerReadableStream)return s(readerLockException("finish iterating"));if(!this._preventCancel){let n=ReadableStreamReaderGenericCancel(r,t);return ReadableStreamReaderGenericRelease(r),PerformPromiseThen(n,()=>({value:t,done:!0}),void 0)}return ReadableStreamReaderGenericRelease(r),i({value:t,done:!0})}};let b={next(){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.next():s(streamAsyncIteratorBrandCheckException("next"))},return(t){return IsReadableStreamAsyncIterator(this)?this._asyncIteratorImpl.return(t):s(streamAsyncIteratorBrandCheckException("return"))}};function IsReadableStreamAsyncIterator(t){if(!typeIsObject(t)||!Object.prototype.hasOwnProperty.call(t,"_asyncIteratorImpl"))return!1;try{return t._asyncIteratorImpl instanceof ReadableStreamAsyncIteratorImpl}catch(t){return!1}}function streamAsyncIteratorBrandCheckException(t){return TypeError(`ReadableStreamAsyncIterator.${t} can only be used on a ReadableSteamAsyncIterator`)}void 0!==g&&Object.setPrototypeOf(b,g);let v=Number.isNaN||function(t){return t!=t};function CreateArrayFromList(t){return t.slice()}function CopyDataBlockBytes(t,r,n,a,o){new Uint8Array(t).set(new Uint8Array(n,a,o),r)}function ArrayBufferSlice(t,r,n){if(t.slice)return t.slice(r,n);let a=n-r,o=new ArrayBuffer(a);return CopyDataBlockBytes(o,0,t,r,a),o}function CloneAsUint8Array(t){let r=ArrayBufferSlice(t.buffer,t.byteOffset,t.byteOffset+t.byteLength);return new Uint8Array(r)}function DequeueValue(t){let r=t._queue.shift();return t._queueTotalSize-=r.size,t._queueTotalSize<0&&(t._queueTotalSize=0),r.value}function EnqueueValueWithSize(t,r,n){if(!(!("number"!=typeof n||v(n))&&!(n<0))||n===1/0)throw RangeError("Size must be a finite, non-NaN, non-negative number.");t._queue.push({value:r,size:n}),t._queueTotalSize+=n}function ResetQueue(t){t._queue=new SimpleQueue,t._queueTotalSize=0}let ReadableStreamBYOBRequest=class ReadableStreamBYOBRequest{constructor(){throw TypeError("Illegal constructor")}get view(){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("view");return this._view}respond(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respond");if(assertRequiredArgument(t,1,"respond"),t=convertUnsignedLongLongWithEnforceRange(t,"First parameter"),void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");this._view.buffer,ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!IsReadableStreamBYOBRequest(this))throw byobRequestBrandCheckException("respondWithNewView");if(assertRequiredArgument(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw TypeError("You can only respond with array buffer views");if(void 0===this._associatedReadableByteStreamController)throw TypeError("This BYOB request has been invalidated");t.buffer,ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController,t)}};Object.defineProperties(ReadableStreamBYOBRequest.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamBYOBRequest.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});let ReadableByteStreamController=class ReadableByteStreamController{constructor(){throw TypeError("Illegal constructor")}get byobRequest(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("byobRequest");return ReadableByteStreamControllerGetBYOBRequest(this)}get desiredSize(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("desiredSize");return ReadableByteStreamControllerGetDesiredSize(this)}close(){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("close");if(this._closeRequested)throw TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if("readable"!==t)throw TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);ReadableByteStreamControllerClose(this)}enqueue(t){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("enqueue");if(assertRequiredArgument(t,1,"enqueue"),!ArrayBuffer.isView(t))throw TypeError("chunk must be an array buffer view");if(0===t.byteLength)throw TypeError("chunk must have non-zero byteLength");if(0===t.buffer.byteLength)throw TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw TypeError("stream is closed or draining");let r=this._controlledReadableByteStream._state;if("readable"!==r)throw TypeError(`The stream (in ${r} state) is not in the readable state and cannot be enqueued to`);ReadableByteStreamControllerEnqueue(this,t)}error(t){if(!IsReadableByteStreamController(this))throw byteStreamControllerBrandCheckException("error");ReadableByteStreamControllerError(this,t)}[d](t){ReadableByteStreamControllerClearPendingPullIntos(this),ResetQueue(this);let r=this._cancelAlgorithm(t);return ReadableByteStreamControllerClearAlgorithms(this),r}[h](t){let r=this._controlledReadableByteStream;if(this._queueTotalSize>0){let r=this._queue.shift();this._queueTotalSize-=r.byteLength,ReadableByteStreamControllerHandleQueueDrain(this);let n=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);t._chunkSteps(n);return}let n=this._autoAllocateChunkSize;if(void 0!==n){let r;try{r=new ArrayBuffer(n)}catch(r){t._errorSteps(r);return}let a={buffer:r,bufferByteLength:n,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(a)}ReadableStreamAddReadRequest(r,t),ReadableByteStreamControllerCallPullIfNeeded(this)}};function IsReadableByteStreamController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledReadableByteStream"))&&t instanceof ReadableByteStreamController}function IsReadableStreamBYOBRequest(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_associatedReadableByteStreamController"))&&t instanceof ReadableStreamBYOBRequest}function ReadableByteStreamControllerCallPullIfNeeded(t){let r=function(t){let r=t._controlledReadableByteStream;if("readable"!==r._state||t._closeRequested||!t._started)return!1;if(ReadableStreamHasDefaultReader(r)&&ReadableStreamGetNumReadRequests(r)>0||ReadableStreamHasBYOBReader(r)&&ReadableStreamGetNumReadIntoRequests(r)>0)return!0;let n=ReadableByteStreamControllerGetDesiredSize(t);return n>0}(t);if(!r)return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let n=t._pullAlgorithm();uponPromise(n,()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ReadableByteStreamControllerCallPullIfNeeded(t))},r=>{ReadableByteStreamControllerError(t,r)})}function ReadableByteStreamControllerClearPendingPullIntos(t){ReadableByteStreamControllerInvalidateBYOBRequest(t),t._pendingPullIntos=new SimpleQueue}function ReadableByteStreamControllerCommitPullIntoDescriptor(t,r){let n=!1;"closed"===t._state&&(n=!0);let a=ReadableByteStreamControllerConvertPullIntoDescriptor(r);"default"===r.readerType?ReadableStreamFulfillReadRequest(t,a,n):function(t,r,n){let a=t._reader,o=a._readIntoRequests.shift();n?o._closeSteps(r):o._chunkSteps(r)}(t,a,n)}function ReadableByteStreamControllerConvertPullIntoDescriptor(t){let r=t.bytesFilled,n=t.elementSize;return new t.viewConstructor(t.buffer,t.byteOffset,r/n)}function ReadableByteStreamControllerEnqueueChunkToQueue(t,r,n,a){t._queue.push({buffer:r,byteOffset:n,byteLength:a}),t._queueTotalSize+=a}function ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r){let n=r.elementSize,a=r.bytesFilled-r.bytesFilled%n,o=Math.min(t._queueTotalSize,r.byteLength-r.bytesFilled),i=r.bytesFilled+o,s=i-i%n,l=o,u=!1;s>a&&(l=s-r.bytesFilled,u=!0);let c=t._queue;for(;l>0;){let n=c.peek(),a=Math.min(l,n.byteLength),o=r.byteOffset+r.bytesFilled;CopyDataBlockBytes(r.buffer,o,n.buffer,n.byteOffset,a),n.byteLength===a?c.shift():(n.byteOffset+=a,n.byteLength-=a),t._queueTotalSize-=a,ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,a,r),l-=a}return u}function ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,n){n.bytesFilled+=r}function ReadableByteStreamControllerHandleQueueDrain(t){0===t._queueTotalSize&&t._closeRequested?(ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(t._controlledReadableByteStream)):ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerInvalidateBYOBRequest(t){null!==t._byobRequest&&(t._byobRequest._associatedReadableByteStreamController=void 0,t._byobRequest._view=null,t._byobRequest=null)}function ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t){for(;t._pendingPullIntos.length>0;){if(0===t._queueTotalSize)return;let r=t._pendingPullIntos.peek();ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,r)&&(ReadableByteStreamControllerShiftPendingPullInto(t),ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,r))}}function ReadableByteStreamControllerRespondInternal(t,r){let n=t._pendingPullIntos.peek();ReadableByteStreamControllerInvalidateBYOBRequest(t);let a=t._controlledReadableByteStream._state;"closed"===a?function(t,r){let n=t._controlledReadableByteStream;if(ReadableStreamHasBYOBReader(n))for(;ReadableStreamGetNumReadIntoRequests(n)>0;){let r=ReadableByteStreamControllerShiftPendingPullInto(t);ReadableByteStreamControllerCommitPullIntoDescriptor(n,r)}}(t):function(t,r,n){if(ReadableByteStreamControllerFillHeadPullIntoDescriptor(t,r,n),n.bytesFilled<n.elementSize)return;ReadableByteStreamControllerShiftPendingPullInto(t);let a=n.bytesFilled%n.elementSize;if(a>0){let r=n.byteOffset+n.bytesFilled,o=ArrayBufferSlice(n.buffer,r-a,r);ReadableByteStreamControllerEnqueueChunkToQueue(t,o,0,o.byteLength)}n.bytesFilled-=a,ReadableByteStreamControllerCommitPullIntoDescriptor(t._controlledReadableByteStream,n),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)}(t,r,n),ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerShiftPendingPullInto(t){let r=t._pendingPullIntos.shift();return r}function ReadableByteStreamControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0}function ReadableByteStreamControllerClose(t){let r=t._controlledReadableByteStream;if(!t._closeRequested&&"readable"===r._state){if(t._queueTotalSize>0){t._closeRequested=!0;return}if(t._pendingPullIntos.length>0){let r=t._pendingPullIntos.peek();if(r.bytesFilled>0){let r=TypeError("Insufficient bytes to fill elements in the given buffer");throw ReadableByteStreamControllerError(t,r),r}}ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamClose(r)}}function ReadableByteStreamControllerEnqueue(t,r){let n=t._controlledReadableByteStream;if(t._closeRequested||"readable"!==n._state)return;let a=r.buffer,o=r.byteOffset,i=r.byteLength;if(t._pendingPullIntos.length>0){let r=t._pendingPullIntos.peek();r.buffer,r.buffer=r.buffer}if(ReadableByteStreamControllerInvalidateBYOBRequest(t),ReadableStreamHasDefaultReader(n)){if(0===ReadableStreamGetNumReadRequests(n))ReadableByteStreamControllerEnqueueChunkToQueue(t,a,o,i);else{t._pendingPullIntos.length>0&&ReadableByteStreamControllerShiftPendingPullInto(t);let r=new Uint8Array(a,o,i);ReadableStreamFulfillReadRequest(n,r,!1)}}else ReadableStreamHasBYOBReader(n)?(ReadableByteStreamControllerEnqueueChunkToQueue(t,a,o,i),ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(t)):ReadableByteStreamControllerEnqueueChunkToQueue(t,a,o,i);ReadableByteStreamControllerCallPullIfNeeded(t)}function ReadableByteStreamControllerError(t,r){let n=t._controlledReadableByteStream;"readable"===n._state&&(ReadableByteStreamControllerClearPendingPullIntos(t),ResetQueue(t),ReadableByteStreamControllerClearAlgorithms(t),ReadableStreamError(n,r))}function ReadableByteStreamControllerGetBYOBRequest(t){if(null===t._byobRequest&&t._pendingPullIntos.length>0){let r=t._pendingPullIntos.peek(),n=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),a=Object.create(ReadableStreamBYOBRequest.prototype);a._associatedReadableByteStreamController=t,a._view=n,t._byobRequest=a}return t._byobRequest}function ReadableByteStreamControllerGetDesiredSize(t){let r=t._controlledReadableByteStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableByteStreamControllerRespond(t,r){let n=t._pendingPullIntos.peek(),a=t._controlledReadableByteStream._state;if("closed"===a){if(0!==r)throw TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(0===r)throw TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+r>n.byteLength)throw RangeError("bytesWritten out of range")}n.buffer=n.buffer,ReadableByteStreamControllerRespondInternal(t,r)}function ReadableByteStreamControllerRespondWithNewView(t,r){let n=t._pendingPullIntos.peek(),a=t._controlledReadableByteStream._state;if("closed"===a){if(0!==r.byteLength)throw TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(0===r.byteLength)throw TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==r.byteOffset)throw RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==r.buffer.byteLength)throw RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+r.byteLength>n.byteLength)throw RangeError("The region specified by view is larger than byobRequest");let o=r.byteLength;n.buffer=r.buffer,ReadableByteStreamControllerRespondInternal(t,o)}function SetUpReadableByteStreamController(t,r,n,a,o,s,l){r._controlledReadableByteStream=t,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,ResetQueue(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=s,r._pullAlgorithm=a,r._cancelAlgorithm=o,r._autoAllocateChunkSize=l,r._pendingPullIntos=new SimpleQueue,t._readableStreamController=r;let u=n();uponPromise(i(u),()=>{r._started=!0,ReadableByteStreamControllerCallPullIfNeeded(r)},t=>{ReadableByteStreamControllerError(r,t)})}function byobRequestBrandCheckException(t){return TypeError(`ReadableStreamBYOBRequest.prototype.${t} can only be used on a ReadableStreamBYOBRequest`)}function byteStreamControllerBrandCheckException(t){return TypeError(`ReadableByteStreamController.prototype.${t} can only be used on a ReadableByteStreamController`)}function ReadableStreamAddReadIntoRequest(t,r){t._reader._readIntoRequests.push(r)}function ReadableStreamGetNumReadIntoRequests(t){return t._reader._readIntoRequests.length}function ReadableStreamHasBYOBReader(t){let r=t._reader;return!!(void 0!==r&&IsReadableStreamBYOBReader(r))}Object.defineProperties(ReadableByteStreamController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableByteStreamController.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});let ReadableStreamBYOBReader=class ReadableStreamBYOBReader{constructor(t){if(assertRequiredArgument(t,1,"ReadableStreamBYOBReader"),assertReadableStream(t,"First parameter"),IsReadableStreamLocked(t))throw TypeError("This stream has already been locked for exclusive reading by another reader");if(!IsReadableByteStreamController(t._readableStreamController))throw TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ReadableStreamReaderGenericInitialize(this,t),this._readIntoRequests=new SimpleQueue}get closed(){return IsReadableStreamBYOBReader(this)?this._closedPromise:s(byobReaderBrandCheckException("closed"))}cancel(t){return IsReadableStreamBYOBReader(this)?void 0===this._ownerReadableStream?s(readerLockException("cancel")):ReadableStreamReaderGenericCancel(this,t):s(byobReaderBrandCheckException("cancel"))}read(t){let r,n;if(!IsReadableStreamBYOBReader(this))return s(byobReaderBrandCheckException("read"));if(!ArrayBuffer.isView(t))return s(TypeError("view must be an array buffer view"));if(0===t.byteLength)return s(TypeError("view must have non-zero byteLength"));if(0===t.buffer.byteLength)return s(TypeError("view's buffer must have non-zero byteLength"));if(t.buffer,void 0===this._ownerReadableStream)return s(readerLockException("read from"));let a=newPromise((t,a)=>{r=t,n=a});return ReadableStreamBYOBReaderRead(this,t,{_chunkSteps:t=>r({value:t,done:!1}),_closeSteps:t=>r({value:t,done:!0}),_errorSteps:t=>n(t)}),a}releaseLock(){if(!IsReadableStreamBYOBReader(this))throw byobReaderBrandCheckException("releaseLock");if(void 0!==this._ownerReadableStream){if(this._readIntoRequests.length>0)throw TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");ReadableStreamReaderGenericRelease(this)}}};function IsReadableStreamBYOBReader(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_readIntoRequests"))&&t instanceof ReadableStreamBYOBReader}function ReadableStreamBYOBReaderRead(t,r,n){let a=t._ownerReadableStream;a._disturbed=!0,"errored"===a._state?n._errorSteps(a._storedError):function(t,r,n){let a=t._controlledReadableByteStream,o=1;r.constructor!==DataView&&(o=r.constructor.BYTES_PER_ELEMENT);let i=r.constructor,s=r.buffer,l={buffer:s,bufferByteLength:s.byteLength,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:o,viewConstructor:i,readerType:"byob"};if(t._pendingPullIntos.length>0){t._pendingPullIntos.push(l),ReadableStreamAddReadIntoRequest(a,n);return}if("closed"===a._state){let t=new i(l.buffer,l.byteOffset,0);n._closeSteps(t);return}if(t._queueTotalSize>0){if(ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(t,l)){let r=ReadableByteStreamControllerConvertPullIntoDescriptor(l);ReadableByteStreamControllerHandleQueueDrain(t),n._chunkSteps(r);return}if(t._closeRequested){let r=TypeError("Insufficient bytes to fill elements in the given buffer");ReadableByteStreamControllerError(t,r),n._errorSteps(r);return}}t._pendingPullIntos.push(l),ReadableStreamAddReadIntoRequest(a,n),ReadableByteStreamControllerCallPullIfNeeded(t)}(a._readableStreamController,r,n)}function byobReaderBrandCheckException(t){return TypeError(`ReadableStreamBYOBReader.prototype.${t} can only be used on a ReadableStreamBYOBReader`)}function ExtractHighWaterMark(t,r){let{highWaterMark:n}=t;if(void 0===n)return r;if(v(n)||n<0)throw RangeError("Invalid highWaterMark");return n}function ExtractSizeAlgorithm(t){let{size:r}=t;return r||(()=>1)}function convertQueuingStrategy(t,r){assertDictionary(t,r);let n=null==t?void 0:t.highWaterMark,a=null==t?void 0:t.size;return{highWaterMark:void 0===n?void 0:convertUnrestrictedDouble(n),size:void 0===a?void 0:(assertFunction(a,`${r} has member 'size' that`),t=>convertUnrestrictedDouble(a(t)))}}function assertWritableStream(t,r){if(!IsWritableStream(t))throw TypeError(`${r} is not a WritableStream.`)}Object.defineProperties(ReadableStreamBYOBReader.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamBYOBReader.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});let S="function"==typeof AbortController;let WritableStream=class WritableStream{constructor(t={},r={}){void 0===t?t=null:assertObject(t,"First parameter");let n=convertQueuingStrategy(r,"Second parameter"),a=function(t,r){assertDictionary(t,r);let n=null==t?void 0:t.abort,a=null==t?void 0:t.close,o=null==t?void 0:t.start,i=null==t?void 0:t.type,s=null==t?void 0:t.write;return{abort:void 0===n?void 0:(assertFunction(n,`${r} has member 'abort' that`),r=>promiseCall(n,t,[r])),close:void 0===a?void 0:(assertFunction(a,`${r} has member 'close' that`),()=>promiseCall(a,t,[])),start:void 0===o?void 0:(assertFunction(o,`${r} has member 'start' that`),r=>reflectCall(o,t,[r])),write:void 0===s?void 0:(assertFunction(s,`${r} has member 'write' that`),(r,n)=>promiseCall(s,t,[r,n])),type:i}}(t,"First parameter");InitializeWritableStream(this);let o=a.type;if(void 0!==o)throw RangeError("Invalid type is specified");let s=ExtractSizeAlgorithm(n),l=ExtractHighWaterMark(n,1);(function(t,r,n,a){let o=Object.create(WritableStreamDefaultController.prototype),startAlgorithm=()=>void 0,writeAlgorithm=()=>i(void 0),closeAlgorithm=()=>i(void 0),abortAlgorithm=()=>i(void 0);void 0!==r.start&&(startAlgorithm=()=>r.start(o)),void 0!==r.write&&(writeAlgorithm=t=>r.write(t,o)),void 0!==r.close&&(closeAlgorithm=()=>r.close()),void 0!==r.abort&&(abortAlgorithm=t=>r.abort(t)),SetUpWritableStreamDefaultController(t,o,startAlgorithm,writeAlgorithm,closeAlgorithm,abortAlgorithm,n,a)})(this,a,l,s)}get locked(){if(!IsWritableStream(this))throw streamBrandCheckException$2("locked");return IsWritableStreamLocked(this)}abort(t){return IsWritableStream(this)?IsWritableStreamLocked(this)?s(TypeError("Cannot abort a stream that already has a writer")):WritableStreamAbort(this,t):s(streamBrandCheckException$2("abort"))}close(){return IsWritableStream(this)?IsWritableStreamLocked(this)?s(TypeError("Cannot close a stream that already has a writer")):WritableStreamCloseQueuedOrInFlight(this)?s(TypeError("Cannot close an already-closing stream")):WritableStreamClose(this):s(streamBrandCheckException$2("close"))}getWriter(){if(!IsWritableStream(this))throw streamBrandCheckException$2("getWriter");return new WritableStreamDefaultWriter(this)}};function InitializeWritableStream(t){t._state="writable",t._storedError=void 0,t._writer=void 0,t._writableStreamController=void 0,t._writeRequests=new SimpleQueue,t._inFlightWriteRequest=void 0,t._closeRequest=void 0,t._inFlightCloseRequest=void 0,t._pendingAbortRequest=void 0,t._backpressure=!1}function IsWritableStream(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_writableStreamController"))&&t instanceof WritableStream}function IsWritableStreamLocked(t){return void 0!==t._writer}function WritableStreamAbort(t,r){var n;if("closed"===t._state||"errored"===t._state)return i(void 0);t._writableStreamController._abortReason=r,null===(n=t._writableStreamController._abortController)||void 0===n||n.abort();let a=t._state;if("closed"===a||"errored"===a)return i(void 0);if(void 0!==t._pendingAbortRequest)return t._pendingAbortRequest._promise;let o=!1;"erroring"===a&&(o=!0,r=void 0);let s=newPromise((n,a)=>{t._pendingAbortRequest={_promise:void 0,_resolve:n,_reject:a,_reason:r,_wasAlreadyErroring:o}});return t._pendingAbortRequest._promise=s,o||WritableStreamStartErroring(t,r),s}function WritableStreamClose(t){var r;let n=t._state;if("closed"===n||"errored"===n)return s(TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=newPromise((r,n)=>{t._closeRequest={_resolve:r,_reject:n}}),o=t._writer;return void 0!==o&&t._backpressure&&"writable"===n&&defaultWriterReadyPromiseResolve(o),EnqueueValueWithSize(r=t._writableStreamController,C,0),WritableStreamDefaultControllerAdvanceQueueIfNeeded(r),a}function WritableStreamDealWithRejection(t,r){let n=t._state;if("writable"===n){WritableStreamStartErroring(t,r);return}WritableStreamFinishErroring(t)}function WritableStreamStartErroring(t,r){let n=t._writableStreamController;t._state="erroring",t._storedError=r;let a=t._writer;void 0!==a&&WritableStreamDefaultWriterEnsureReadyPromiseRejected(a,r),!(void 0!==t._inFlightWriteRequest||void 0!==t._inFlightCloseRequest)&&n._started&&WritableStreamFinishErroring(t)}function WritableStreamFinishErroring(t){t._state="errored",t._writableStreamController[c]();let r=t._storedError;if(t._writeRequests.forEach(t=>{t._reject(r)}),t._writeRequests=new SimpleQueue,void 0===t._pendingAbortRequest){WritableStreamRejectCloseAndClosedPromiseIfNeeded(t);return}let n=t._pendingAbortRequest;if(t._pendingAbortRequest=void 0,n._wasAlreadyErroring){n._reject(r),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t);return}let a=t._writableStreamController[u](n._reason);uponPromise(a,()=>{n._resolve(),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)},r=>{n._reject(r),WritableStreamRejectCloseAndClosedPromiseIfNeeded(t)})}function WritableStreamCloseQueuedOrInFlight(t){return void 0!==t._closeRequest||void 0!==t._inFlightCloseRequest}function WritableStreamRejectCloseAndClosedPromiseIfNeeded(t){void 0!==t._closeRequest&&(t._closeRequest._reject(t._storedError),t._closeRequest=void 0);let r=t._writer;void 0!==r&&defaultWriterClosedPromiseReject(r,t._storedError)}function WritableStreamUpdateBackpressure(t,r){let n=t._writer;void 0!==n&&r!==t._backpressure&&(r?defaultWriterReadyPromiseInitialize(n):defaultWriterReadyPromiseResolve(n)),t._backpressure=r}Object.defineProperties(WritableStream.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(WritableStream.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});let WritableStreamDefaultWriter=class WritableStreamDefaultWriter{constructor(t){if(assertRequiredArgument(t,1,"WritableStreamDefaultWriter"),assertWritableStream(t,"First parameter"),IsWritableStreamLocked(t))throw TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let r=t._state;if("writable"===r)!WritableStreamCloseQueuedOrInFlight(t)&&t._backpressure?defaultWriterReadyPromiseInitialize(this):(defaultWriterReadyPromiseInitialize(this),defaultWriterReadyPromiseResolve(this)),defaultWriterClosedPromiseInitialize(this);else if("erroring"===r)defaultWriterReadyPromiseInitializeAsRejected(this,t._storedError),defaultWriterClosedPromiseInitialize(this);else if("closed"===r)defaultWriterReadyPromiseInitialize(this),defaultWriterReadyPromiseResolve(this),defaultWriterClosedPromiseInitialize(this),defaultWriterClosedPromiseResolve(this);else{let r=t._storedError;defaultWriterReadyPromiseInitializeAsRejected(this,r),defaultWriterClosedPromiseInitialize(this),defaultWriterClosedPromiseReject(this,r)}}get closed(){return IsWritableStreamDefaultWriter(this)?this._closedPromise:s(defaultWriterBrandCheckException("closed"))}get desiredSize(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("desiredSize");if(void 0===this._ownerWritableStream)throw defaultWriterLockException("desiredSize");return function(t){let r=t._ownerWritableStream,n=r._state;return"errored"===n||"erroring"===n?null:"closed"===n?0:WritableStreamDefaultControllerGetDesiredSize(r._writableStreamController)}(this)}get ready(){return IsWritableStreamDefaultWriter(this)?this._readyPromise:s(defaultWriterBrandCheckException("ready"))}abort(t){return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?s(defaultWriterLockException("abort")):function(t,r){let n=t._ownerWritableStream;return WritableStreamAbort(n,r)}(this,t):s(defaultWriterBrandCheckException("abort"))}close(){if(!IsWritableStreamDefaultWriter(this))return s(defaultWriterBrandCheckException("close"));let t=this._ownerWritableStream;return void 0===t?s(defaultWriterLockException("close")):WritableStreamCloseQueuedOrInFlight(t)?s(TypeError("Cannot close an already-closing stream")):WritableStreamDefaultWriterClose(this)}releaseLock(){if(!IsWritableStreamDefaultWriter(this))throw defaultWriterBrandCheckException("releaseLock");let t=this._ownerWritableStream;void 0!==t&&WritableStreamDefaultWriterRelease(this)}write(t){return IsWritableStreamDefaultWriter(this)?void 0===this._ownerWritableStream?s(defaultWriterLockException("write to")):WritableStreamDefaultWriterWrite(this,t):s(defaultWriterBrandCheckException("write"))}};function IsWritableStreamDefaultWriter(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_ownerWritableStream"))&&t instanceof WritableStreamDefaultWriter}function WritableStreamDefaultWriterClose(t){let r=t._ownerWritableStream;return WritableStreamClose(r)}function WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,r){"pending"===t._readyPromiseState?defaultWriterReadyPromiseReject(t,r):defaultWriterReadyPromiseInitializeAsRejected(t,r)}function WritableStreamDefaultWriterRelease(t){var r,n;let a=t._ownerWritableStream,o=TypeError("Writer was released and can no longer be used to monitor the stream's closedness");WritableStreamDefaultWriterEnsureReadyPromiseRejected(t,o),"pending"===t._closedPromiseState?defaultWriterClosedPromiseReject(t,o):(r=t,n=o,defaultWriterClosedPromiseInitialize(r),defaultWriterClosedPromiseReject(r,n)),a._writer=void 0,t._ownerWritableStream=void 0}function WritableStreamDefaultWriterWrite(t,r){let n=t._ownerWritableStream,a=n._writableStreamController,o=function(t,r){try{return t._strategySizeAlgorithm(r)}catch(r){return WritableStreamDefaultControllerErrorIfNeeded(t,r),1}}(a,r);if(n!==t._ownerWritableStream)return s(defaultWriterLockException("write to"));let i=n._state;if("errored"===i)return s(n._storedError);if(WritableStreamCloseQueuedOrInFlight(n)||"closed"===i)return s(TypeError("The stream is closing or closed and cannot be written to"));if("erroring"===i)return s(n._storedError);let l=function(t){let r=newPromise((r,n)=>{t._writeRequests.push({_resolve:r,_reject:n})});return r}(n);return function(t,r,n){try{EnqueueValueWithSize(t,r,n)}catch(r){WritableStreamDefaultControllerErrorIfNeeded(t,r);return}let a=t._controlledWritableStream;if(!WritableStreamCloseQueuedOrInFlight(a)&&"writable"===a._state){let r=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(a,r)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)}(a,r,o),l}Object.defineProperties(WritableStreamDefaultWriter.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(WritableStreamDefaultWriter.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});let C={};let WritableStreamDefaultController=class WritableStreamDefaultController{constructor(){throw TypeError("Illegal constructor")}get abortReason(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("abortReason");return this._abortReason}get signal(){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("signal");if(void 0===this._abortController)throw TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t){if(!IsWritableStreamDefaultController(this))throw defaultControllerBrandCheckException$2("error");let r=this._controlledWritableStream._state;"writable"===r&&WritableStreamDefaultControllerError(this,t)}[u](t){let r=this._abortAlgorithm(t);return WritableStreamDefaultControllerClearAlgorithms(this),r}[c](){ResetQueue(this)}};function IsWritableStreamDefaultController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledWritableStream"))&&t instanceof WritableStreamDefaultController}function SetUpWritableStreamDefaultController(t,r,n,a,o,s,l,u){r._controlledWritableStream=t,t._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._abortReason=void 0,r._abortController=function(){if(S)return new AbortController}(),r._started=!1,r._strategySizeAlgorithm=u,r._strategyHWM=l,r._writeAlgorithm=a,r._closeAlgorithm=o,r._abortAlgorithm=s;let c=WritableStreamDefaultControllerGetBackpressure(r);WritableStreamUpdateBackpressure(t,c);let d=n(),h=i(d);uponPromise(h,()=>{r._started=!0,WritableStreamDefaultControllerAdvanceQueueIfNeeded(r)},n=>{r._started=!0,WritableStreamDealWithRejection(t,n)})}function WritableStreamDefaultControllerClearAlgorithms(t){t._writeAlgorithm=void 0,t._closeAlgorithm=void 0,t._abortAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function WritableStreamDefaultControllerGetDesiredSize(t){return t._strategyHWM-t._queueTotalSize}function WritableStreamDefaultControllerAdvanceQueueIfNeeded(t){let r=t._controlledWritableStream;if(!t._started||void 0!==r._inFlightWriteRequest)return;let n=r._state;if("erroring"===n){WritableStreamFinishErroring(r);return}if(0===t._queue.length)return;let a=function(t){let r=t._queue.peek();return r.value}(t);a===C?function(t){let r=t._controlledWritableStream;r._inFlightCloseRequest=r._closeRequest,r._closeRequest=void 0,DequeueValue(t);let n=t._closeAlgorithm();WritableStreamDefaultControllerClearAlgorithms(t),uponPromise(n,()=>{!function(t){t._inFlightCloseRequest._resolve(void 0),t._inFlightCloseRequest=void 0;let r=t._state;"erroring"===r&&(t._storedError=void 0,void 0!==t._pendingAbortRequest&&(t._pendingAbortRequest._resolve(),t._pendingAbortRequest=void 0)),t._state="closed";let n=t._writer;void 0!==n&&defaultWriterClosedPromiseResolve(n)}(r)},t=>{r._inFlightCloseRequest._reject(t),r._inFlightCloseRequest=void 0,void 0!==r._pendingAbortRequest&&(r._pendingAbortRequest._reject(t),r._pendingAbortRequest=void 0),WritableStreamDealWithRejection(r,t)})}(t):function(t,r){let n=t._controlledWritableStream;n._inFlightWriteRequest=n._writeRequests.shift();let a=t._writeAlgorithm(r);uponPromise(a,()=>{n._inFlightWriteRequest._resolve(void 0),n._inFlightWriteRequest=void 0;let r=n._state;if(DequeueValue(t),!WritableStreamCloseQueuedOrInFlight(n)&&"writable"===r){let r=WritableStreamDefaultControllerGetBackpressure(t);WritableStreamUpdateBackpressure(n,r)}WritableStreamDefaultControllerAdvanceQueueIfNeeded(t)},r=>{"writable"===n._state&&WritableStreamDefaultControllerClearAlgorithms(t),n._inFlightWriteRequest._reject(r),n._inFlightWriteRequest=void 0,WritableStreamDealWithRejection(n,r)})}(t,a)}function WritableStreamDefaultControllerErrorIfNeeded(t,r){"writable"===t._controlledWritableStream._state&&WritableStreamDefaultControllerError(t,r)}function WritableStreamDefaultControllerGetBackpressure(t){let r=WritableStreamDefaultControllerGetDesiredSize(t);return r<=0}function WritableStreamDefaultControllerError(t,r){let n=t._controlledWritableStream;WritableStreamDefaultControllerClearAlgorithms(t),WritableStreamStartErroring(n,r)}function streamBrandCheckException$2(t){return TypeError(`WritableStream.prototype.${t} can only be used on a WritableStream`)}function defaultControllerBrandCheckException$2(t){return TypeError(`WritableStreamDefaultController.prototype.${t} can only be used on a WritableStreamDefaultController`)}function defaultWriterBrandCheckException(t){return TypeError(`WritableStreamDefaultWriter.prototype.${t} can only be used on a WritableStreamDefaultWriter`)}function defaultWriterLockException(t){return TypeError("Cannot "+t+" a stream using a released writer")}function defaultWriterClosedPromiseInitialize(t){t._closedPromise=newPromise((r,n)=>{t._closedPromise_resolve=r,t._closedPromise_reject=n,t._closedPromiseState="pending"})}function defaultWriterClosedPromiseReject(t,r){void 0!==t._closedPromise_reject&&(setPromiseIsHandledToTrue(t._closedPromise),t._closedPromise_reject(r),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="rejected")}function defaultWriterClosedPromiseResolve(t){void 0!==t._closedPromise_resolve&&(t._closedPromise_resolve(void 0),t._closedPromise_resolve=void 0,t._closedPromise_reject=void 0,t._closedPromiseState="resolved")}function defaultWriterReadyPromiseInitialize(t){t._readyPromise=newPromise((r,n)=>{t._readyPromise_resolve=r,t._readyPromise_reject=n}),t._readyPromiseState="pending"}function defaultWriterReadyPromiseInitializeAsRejected(t,r){defaultWriterReadyPromiseInitialize(t),defaultWriterReadyPromiseReject(t,r)}function defaultWriterReadyPromiseReject(t,r){void 0!==t._readyPromise_reject&&(setPromiseIsHandledToTrue(t._readyPromise),t._readyPromise_reject(r),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="rejected")}function defaultWriterReadyPromiseResolve(t){void 0!==t._readyPromise_resolve&&(t._readyPromise_resolve(void 0),t._readyPromise_resolve=void 0,t._readyPromise_reject=void 0,t._readyPromiseState="fulfilled")}Object.defineProperties(WritableStreamDefaultController.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(WritableStreamDefaultController.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});let w="undefined"!=typeof DOMException?DOMException:void 0,A=!function(t){if(!("function"==typeof t||"object"==typeof t))return!1;try{return new t,!0}catch(t){return!1}}(w)?function(){let ctor=function(t,r){this.message=t||"",this.name=r||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return ctor.prototype=Object.create(Error.prototype),Object.defineProperty(ctor.prototype,"constructor",{value:ctor,writable:!0,configurable:!0}),ctor}():w;function ReadableStreamPipeTo(t,r,n,a,o,l){let u=AcquireReadableStreamDefaultReader(t),c=new WritableStreamDefaultWriter(r);t._disturbed=!0;let d=!1,h=i(void 0);return newPromise((p,y)=>{var m,g;let b;if(void 0!==l){if(b=()=>{let n=new A("Aborted","AbortError"),s=[];a||s.push(()=>"writable"===r._state?WritableStreamAbort(r,n):i(void 0)),o||s.push(()=>"readable"===t._state?ReadableStreamCancel(t,n):i(void 0)),shutdownWithAction(()=>Promise.all(s.map(t=>t())),!0,n)},l.aborted){b();return}l.addEventListener("abort",b)}if(isOrBecomesErrored(t,u._closedPromise,t=>{a?shutdown(!0,t):shutdownWithAction(()=>WritableStreamAbort(r,t),!0,t)}),isOrBecomesErrored(r,c._closedPromise,r=>{o?shutdown(!0,r):shutdownWithAction(()=>ReadableStreamCancel(t,r),!0,r)}),m=u._closedPromise,g=()=>{n?shutdown():shutdownWithAction(()=>(function(t){let r=t._ownerWritableStream,n=r._state;return WritableStreamCloseQueuedOrInFlight(r)||"closed"===n?i(void 0):"errored"===n?s(r._storedError):WritableStreamDefaultWriterClose(t)})(c))},"closed"===t._state?g():uponPromise(m,g),WritableStreamCloseQueuedOrInFlight(r)||"closed"===r._state){let r=TypeError("the destination writable stream closed before all data could be piped to it");o?shutdown(!0,r):shutdownWithAction(()=>ReadableStreamCancel(t,r),!0,r)}function waitForWritesToFinish(){let t=h;return PerformPromiseThen(h,()=>t!==h?waitForWritesToFinish():void 0)}function isOrBecomesErrored(t,r,n){"errored"===t._state?n(t._storedError):uponRejection(r,n)}function shutdownWithAction(t,n,a){!d&&((d=!0,"writable"!==r._state||WritableStreamCloseQueuedOrInFlight(r))?doTheRest():uponPromise(waitForWritesToFinish(),doTheRest));function doTheRest(){uponPromise(t(),()=>finalize(n,a),t=>finalize(!0,t))}}function shutdown(t,n){!d&&((d=!0,"writable"!==r._state||WritableStreamCloseQueuedOrInFlight(r))?finalize(t,n):uponPromise(waitForWritesToFinish(),()=>finalize(t,n)))}function finalize(t,r){WritableStreamDefaultWriterRelease(c),ReadableStreamReaderGenericRelease(u),void 0!==l&&l.removeEventListener("abort",b),t?y(r):p(void 0)}setPromiseIsHandledToTrue(newPromise((t,r)=>{!function next(n){n?t():PerformPromiseThen(d?i(!0):PerformPromiseThen(c._readyPromise,()=>newPromise((t,r)=>{ReadableStreamDefaultReaderRead(u,{_chunkSteps:r=>{h=PerformPromiseThen(WritableStreamDefaultWriterWrite(c,r),void 0,noop),t(!1)},_closeSteps:()=>t(!0),_errorSteps:r})})),next,r)}(!1)}))})}let ReadableStreamDefaultController=class ReadableStreamDefaultController{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("desiredSize");return ReadableStreamDefaultControllerGetDesiredSize(this)}close(){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("close");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("The stream is not in a state that permits close");ReadableStreamDefaultControllerClose(this)}enqueue(t){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("enqueue");if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("The stream is not in a state that permits enqueue");return ReadableStreamDefaultControllerEnqueue(this,t)}error(t){if(!IsReadableStreamDefaultController(this))throw defaultControllerBrandCheckException$1("error");ReadableStreamDefaultControllerError(this,t)}[d](t){ResetQueue(this);let r=this._cancelAlgorithm(t);return ReadableStreamDefaultControllerClearAlgorithms(this),r}[h](t){let r=this._controlledReadableStream;if(this._queue.length>0){let n=DequeueValue(this);this._closeRequested&&0===this._queue.length?(ReadableStreamDefaultControllerClearAlgorithms(this),ReadableStreamClose(r)):ReadableStreamDefaultControllerCallPullIfNeeded(this),t._chunkSteps(n)}else ReadableStreamAddReadRequest(r,t),ReadableStreamDefaultControllerCallPullIfNeeded(this)}};function IsReadableStreamDefaultController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledReadableStream"))&&t instanceof ReadableStreamDefaultController}function ReadableStreamDefaultControllerCallPullIfNeeded(t){let r=ReadableStreamDefaultControllerShouldCallPull(t);if(!r)return;if(t._pulling){t._pullAgain=!0;return}t._pulling=!0;let n=t._pullAlgorithm();uponPromise(n,()=>{t._pulling=!1,t._pullAgain&&(t._pullAgain=!1,ReadableStreamDefaultControllerCallPullIfNeeded(t))},r=>{ReadableStreamDefaultControllerError(t,r)})}function ReadableStreamDefaultControllerShouldCallPull(t){let r=t._controlledReadableStream;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(t)||!t._started)return!1;if(IsReadableStreamLocked(r)&&ReadableStreamGetNumReadRequests(r)>0)return!0;let n=ReadableStreamDefaultControllerGetDesiredSize(t);return n>0}function ReadableStreamDefaultControllerClearAlgorithms(t){t._pullAlgorithm=void 0,t._cancelAlgorithm=void 0,t._strategySizeAlgorithm=void 0}function ReadableStreamDefaultControllerClose(t){if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(t))return;let r=t._controlledReadableStream;t._closeRequested=!0,0===t._queue.length&&(ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamClose(r))}function ReadableStreamDefaultControllerEnqueue(t,r){if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(t))return;let n=t._controlledReadableStream;if(IsReadableStreamLocked(n)&&ReadableStreamGetNumReadRequests(n)>0)ReadableStreamFulfillReadRequest(n,r,!1);else{let n;try{n=t._strategySizeAlgorithm(r)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}try{EnqueueValueWithSize(t,r,n)}catch(r){throw ReadableStreamDefaultControllerError(t,r),r}}ReadableStreamDefaultControllerCallPullIfNeeded(t)}function ReadableStreamDefaultControllerError(t,r){let n=t._controlledReadableStream;"readable"===n._state&&(ResetQueue(t),ReadableStreamDefaultControllerClearAlgorithms(t),ReadableStreamError(n,r))}function ReadableStreamDefaultControllerGetDesiredSize(t){let r=t._controlledReadableStream._state;return"errored"===r?null:"closed"===r?0:t._strategyHWM-t._queueTotalSize}function ReadableStreamDefaultControllerCanCloseOrEnqueue(t){let r=t._controlledReadableStream._state;return!t._closeRequested&&"readable"===r}function SetUpReadableStreamDefaultController(t,r,n,a,o,s,l){r._controlledReadableStream=t,r._queue=void 0,r._queueTotalSize=void 0,ResetQueue(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=l,r._strategyHWM=s,r._pullAlgorithm=a,r._cancelAlgorithm=o,t._readableStreamController=r;let u=n();uponPromise(i(u),()=>{r._started=!0,ReadableStreamDefaultControllerCallPullIfNeeded(r)},t=>{ReadableStreamDefaultControllerError(r,t)})}function defaultControllerBrandCheckException$1(t){return TypeError(`ReadableStreamDefaultController.prototype.${t} can only be used on a ReadableStreamDefaultController`)}function convertPipeOptions(t,r){assertDictionary(t,r);let n=null==t?void 0:t.preventAbort,a=null==t?void 0:t.preventCancel,o=null==t?void 0:t.preventClose,i=null==t?void 0:t.signal;return void 0!==i&&function(t,r){if(!function(t){if("object"!=typeof t||null===t)return!1;try{return"boolean"==typeof t.aborted}catch(t){return!1}}(t))throw TypeError(`${r} is not an AbortSignal.`)}(i,`${r} has member 'signal' that`),{preventAbort:!!n,preventCancel:!!a,preventClose:!!o,signal:i}}Object.defineProperties(ReadableStreamDefaultController.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStreamDefaultController.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});let ReadableStream1=class ReadableStream1{constructor(t={},r={}){void 0===t?t=null:assertObject(t,"First parameter");let n=convertQueuingStrategy(r,"Second parameter"),a=function(t,r){assertDictionary(t,r);let n=null==t?void 0:t.autoAllocateChunkSize,a=null==t?void 0:t.cancel,o=null==t?void 0:t.pull,i=null==t?void 0:t.start,s=null==t?void 0:t.type;return{autoAllocateChunkSize:void 0===n?void 0:convertUnsignedLongLongWithEnforceRange(n,`${r} has member 'autoAllocateChunkSize' that`),cancel:void 0===a?void 0:(assertFunction(a,`${r} has member 'cancel' that`),r=>promiseCall(a,t,[r])),pull:void 0===o?void 0:(assertFunction(o,`${r} has member 'pull' that`),r=>promiseCall(o,t,[r])),start:void 0===i?void 0:(assertFunction(i,`${r} has member 'start' that`),r=>reflectCall(i,t,[r])),type:void 0===s?void 0:function(t,r){if("bytes"!=(t=`${t}`))throw TypeError(`${r} '${t}' is not a valid enumeration value for ReadableStreamType`);return t}(s,`${r} has member 'type' that`)}}(t,"First parameter");if(InitializeReadableStream(this),"bytes"===a.type){if(void 0!==n.size)throw RangeError("The strategy for a byte stream cannot have a size function");let t=ExtractHighWaterMark(n,0);!function(t,r,n){let a=Object.create(ReadableByteStreamController.prototype),startAlgorithm=()=>void 0,pullAlgorithm=()=>i(void 0),cancelAlgorithm=()=>i(void 0);void 0!==r.start&&(startAlgorithm=()=>r.start(a)),void 0!==r.pull&&(pullAlgorithm=()=>r.pull(a)),void 0!==r.cancel&&(cancelAlgorithm=t=>r.cancel(t));let o=r.autoAllocateChunkSize;if(0===o)throw TypeError("autoAllocateChunkSize must be greater than 0");SetUpReadableByteStreamController(t,a,startAlgorithm,pullAlgorithm,cancelAlgorithm,n,o)}(this,a,t)}else{let t=ExtractSizeAlgorithm(n),r=ExtractHighWaterMark(n,1);!function(t,r,n,a){let o=Object.create(ReadableStreamDefaultController.prototype),startAlgorithm=()=>void 0,pullAlgorithm=()=>i(void 0),cancelAlgorithm=()=>i(void 0);void 0!==r.start&&(startAlgorithm=()=>r.start(o)),void 0!==r.pull&&(pullAlgorithm=()=>r.pull(o)),void 0!==r.cancel&&(cancelAlgorithm=t=>r.cancel(t)),SetUpReadableStreamDefaultController(t,o,startAlgorithm,pullAlgorithm,cancelAlgorithm,n,a)}(this,a,r,t)}}get locked(){if(!IsReadableStream(this))throw streamBrandCheckException$1("locked");return IsReadableStreamLocked(this)}cancel(t){return IsReadableStream(this)?IsReadableStreamLocked(this)?s(TypeError("Cannot cancel a stream that already has a reader")):ReadableStreamCancel(this,t):s(streamBrandCheckException$1("cancel"))}getReader(t){if(!IsReadableStream(this))throw streamBrandCheckException$1("getReader");let r=function(t,r){assertDictionary(t,r);let n=null==t?void 0:t.mode;return{mode:void 0===n?void 0:function(t,r){if("byob"!=(t=`${t}`))throw TypeError(`${r} '${t}' is not a valid enumeration value for ReadableStreamReaderMode`);return t}(n,`${r} has member 'mode' that`)}}(t,"First parameter");return void 0===r.mode?AcquireReadableStreamDefaultReader(this):new ReadableStreamBYOBReader(this)}pipeThrough(t,r={}){if(!IsReadableStream(this))throw streamBrandCheckException$1("pipeThrough");assertRequiredArgument(t,1,"pipeThrough");let n=function(t,r){assertDictionary(t,r);let n=null==t?void 0:t.readable;assertRequiredField(n,"readable","ReadableWritablePair"),assertReadableStream(n,`${r} has member 'readable' that`);let a=null==t?void 0:t.writable;return assertRequiredField(a,"writable","ReadableWritablePair"),assertWritableStream(a,`${r} has member 'writable' that`),{readable:n,writable:a}}(t,"First parameter"),a=convertPipeOptions(r,"Second parameter");if(IsReadableStreamLocked(this))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(IsWritableStreamLocked(n.writable))throw TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let o=ReadableStreamPipeTo(this,n.writable,a.preventClose,a.preventAbort,a.preventCancel,a.signal);return setPromiseIsHandledToTrue(o),n.readable}pipeTo(t,r={}){let n;if(!IsReadableStream(this))return s(streamBrandCheckException$1("pipeTo"));if(void 0===t)return s("Parameter 1 is required in 'pipeTo'.");if(!IsWritableStream(t))return s(TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));try{n=convertPipeOptions(r,"Second parameter")}catch(t){return s(t)}return IsReadableStreamLocked(this)?s(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):IsWritableStreamLocked(t)?s(TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):ReadableStreamPipeTo(this,t,n.preventClose,n.preventAbort,n.preventCancel,n.signal)}tee(){if(!IsReadableStream(this))throw streamBrandCheckException$1("tee");let t=IsReadableByteStreamController(this._readableStreamController)?function(t){let r,n,a,o,s,u=AcquireReadableStreamDefaultReader(t),c=!1,d=!1,h=!1,p=!1,y=!1,m=newPromise(t=>{s=t});function forwardReaderError(t){uponRejection(t._closedPromise,r=>{t===u&&(ReadableByteStreamControllerError(a._readableStreamController,r),ReadableByteStreamControllerError(o._readableStreamController,r),p&&y||s(void 0))})}function pullWithDefaultReader(){IsReadableStreamBYOBReader(u)&&(ReadableStreamReaderGenericRelease(u),forwardReaderError(u=AcquireReadableStreamDefaultReader(t))),ReadableStreamDefaultReaderRead(u,{_chunkSteps:r=>{l(()=>{d=!1,h=!1;let n=r;if(!p&&!y)try{n=CloneAsUint8Array(r)}catch(r){ReadableByteStreamControllerError(a._readableStreamController,r),ReadableByteStreamControllerError(o._readableStreamController,r),s(ReadableStreamCancel(t,r));return}p||ReadableByteStreamControllerEnqueue(a._readableStreamController,r),y||ReadableByteStreamControllerEnqueue(o._readableStreamController,n),c=!1,d?pull1Algorithm():h&&pull2Algorithm()})},_closeSteps:()=>{c=!1,p||ReadableByteStreamControllerClose(a._readableStreamController),y||ReadableByteStreamControllerClose(o._readableStreamController),a._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(a._readableStreamController,0),o._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(o._readableStreamController,0),p&&y||s(void 0)},_errorSteps:()=>{c=!1}})}function pullWithBYOBReader(r,n){IsReadableStreamDefaultReader(u)&&(ReadableStreamReaderGenericRelease(u),forwardReaderError(u=new ReadableStreamBYOBReader(t)));let i=n?o:a,m=n?a:o;ReadableStreamBYOBReaderRead(u,r,{_chunkSteps:r=>{l(()=>{d=!1,h=!1;let a=n?y:p,o=n?p:y;if(o)a||ReadableByteStreamControllerRespondWithNewView(i._readableStreamController,r);else{let n;try{n=CloneAsUint8Array(r)}catch(r){ReadableByteStreamControllerError(i._readableStreamController,r),ReadableByteStreamControllerError(m._readableStreamController,r),s(ReadableStreamCancel(t,r));return}a||ReadableByteStreamControllerRespondWithNewView(i._readableStreamController,r),ReadableByteStreamControllerEnqueue(m._readableStreamController,n)}c=!1,d?pull1Algorithm():h&&pull2Algorithm()})},_closeSteps:t=>{c=!1;let r=n?y:p,a=n?p:y;r||ReadableByteStreamControllerClose(i._readableStreamController),a||ReadableByteStreamControllerClose(m._readableStreamController),void 0!==t&&(r||ReadableByteStreamControllerRespondWithNewView(i._readableStreamController,t),!a&&m._readableStreamController._pendingPullIntos.length>0&&ReadableByteStreamControllerRespond(m._readableStreamController,0)),r&&a||s(void 0)},_errorSteps:()=>{c=!1}})}function pull1Algorithm(){if(c)return d=!0,i(void 0);c=!0;let t=ReadableByteStreamControllerGetBYOBRequest(a._readableStreamController);return null===t?pullWithDefaultReader():pullWithBYOBReader(t._view,!1),i(void 0)}function pull2Algorithm(){if(c)return h=!0,i(void 0);c=!0;let t=ReadableByteStreamControllerGetBYOBRequest(o._readableStreamController);return null===t?pullWithDefaultReader():pullWithBYOBReader(t._view,!0),i(void 0)}function startAlgorithm(){}return a=CreateReadableByteStream(startAlgorithm,pull1Algorithm,function(a){if(p=!0,r=a,y){let a=CreateArrayFromList([r,n]),o=ReadableStreamCancel(t,a);s(o)}return m}),o=CreateReadableByteStream(startAlgorithm,pull2Algorithm,function(a){if(y=!0,n=a,p){let a=CreateArrayFromList([r,n]),o=ReadableStreamCancel(t,a);s(o)}return m}),forwardReaderError(u),[a,o]}(this):function(t,r){let n,a,o,s,u;let c=AcquireReadableStreamDefaultReader(t),d=!1,h=!1,p=!1,y=!1,m=newPromise(t=>{u=t});function pullAlgorithm(){return d?h=!0:(d=!0,ReadableStreamDefaultReaderRead(c,{_chunkSteps:t=>{l(()=>{h=!1,p||ReadableStreamDefaultControllerEnqueue(o._readableStreamController,t),y||ReadableStreamDefaultControllerEnqueue(s._readableStreamController,t),d=!1,h&&pullAlgorithm()})},_closeSteps:()=>{d=!1,p||ReadableStreamDefaultControllerClose(o._readableStreamController),y||ReadableStreamDefaultControllerClose(s._readableStreamController),p&&y||u(void 0)},_errorSteps:()=>{d=!1}})),i(void 0)}function startAlgorithm(){}return o=CreateReadableStream(startAlgorithm,pullAlgorithm,function(r){if(p=!0,n=r,y){let r=CreateArrayFromList([n,a]),o=ReadableStreamCancel(t,r);u(o)}return m}),s=CreateReadableStream(startAlgorithm,pullAlgorithm,function(r){if(y=!0,a=r,p){let r=CreateArrayFromList([n,a]),o=ReadableStreamCancel(t,r);u(o)}return m}),uponRejection(c._closedPromise,t=>{ReadableStreamDefaultControllerError(o._readableStreamController,t),ReadableStreamDefaultControllerError(s._readableStreamController,t),p&&y||u(void 0)}),[o,s]}(this);return CreateArrayFromList(t)}values(t){if(!IsReadableStream(this))throw streamBrandCheckException$1("values");let r=function(t,r){assertDictionary(t,r);let n=null==t?void 0:t.preventCancel;return{preventCancel:!!n}}(t,"First parameter");return function(t,r){let n=AcquireReadableStreamDefaultReader(t),a=new ReadableStreamAsyncIteratorImpl(n,r),o=Object.create(b);return o._asyncIteratorImpl=a,o}(this,r.preventCancel)}};function CreateReadableStream(t,r,n,a=1,o=()=>1){let i=Object.create(ReadableStream1.prototype);InitializeReadableStream(i);let s=Object.create(ReadableStreamDefaultController.prototype);return SetUpReadableStreamDefaultController(i,s,t,r,n,a,o),i}function CreateReadableByteStream(t,r,n){let a=Object.create(ReadableStream1.prototype);InitializeReadableStream(a);let o=Object.create(ReadableByteStreamController.prototype);return SetUpReadableByteStreamController(a,o,t,r,n,0,void 0),a}function InitializeReadableStream(t){t._state="readable",t._reader=void 0,t._storedError=void 0,t._disturbed=!1}function IsReadableStream(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_readableStreamController"))&&t instanceof ReadableStream1}function IsReadableStreamLocked(t){return void 0!==t._reader}function ReadableStreamCancel(t,r){if(t._disturbed=!0,"closed"===t._state)return i(void 0);if("errored"===t._state)return s(t._storedError);ReadableStreamClose(t);let n=t._reader;void 0!==n&&IsReadableStreamBYOBReader(n)&&(n._readIntoRequests.forEach(t=>{t._closeSteps(void 0)}),n._readIntoRequests=new SimpleQueue);let a=t._readableStreamController[d](r);return PerformPromiseThen(a,noop,void 0)}function ReadableStreamClose(t){t._state="closed";let r=t._reader;void 0!==r&&(defaultReaderClosedPromiseResolve(r),IsReadableStreamDefaultReader(r)&&(r._readRequests.forEach(t=>{t._closeSteps()}),r._readRequests=new SimpleQueue))}function ReadableStreamError(t,r){t._state="errored",t._storedError=r;let n=t._reader;void 0!==n&&(defaultReaderClosedPromiseReject(n,r),IsReadableStreamDefaultReader(n)?(n._readRequests.forEach(t=>{t._errorSteps(r)}),n._readRequests=new SimpleQueue):(n._readIntoRequests.forEach(t=>{t._errorSteps(r)}),n._readIntoRequests=new SimpleQueue))}function streamBrandCheckException$1(t){return TypeError(`ReadableStream.prototype.${t} can only be used on a ReadableStream`)}function convertQueuingStrategyInit(t,r){assertDictionary(t,r);let n=null==t?void 0:t.highWaterMark;return assertRequiredField(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:convertUnrestrictedDouble(n)}}Object.defineProperties(ReadableStream1.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ReadableStream1.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),"symbol"==typeof r.asyncIterator&&Object.defineProperty(ReadableStream1.prototype,r.asyncIterator,{value:ReadableStream1.prototype.values,writable:!0,configurable:!0});let byteLengthSizeFunction=t=>t.byteLength;try{Object.defineProperty(byteLengthSizeFunction,"name",{value:"size",configurable:!0})}catch(t){}let ByteLengthQueuingStrategy=class ByteLengthQueuingStrategy{constructor(t){assertRequiredArgument(t,1,"ByteLengthQueuingStrategy"),t=convertQueuingStrategyInit(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!IsByteLengthQueuingStrategy(this))throw byteLengthBrandCheckException("size");return byteLengthSizeFunction}};function byteLengthBrandCheckException(t){return TypeError(`ByteLengthQueuingStrategy.prototype.${t} can only be used on a ByteLengthQueuingStrategy`)}function IsByteLengthQueuingStrategy(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_byteLengthQueuingStrategyHighWaterMark"))&&t instanceof ByteLengthQueuingStrategy}Object.defineProperties(ByteLengthQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(ByteLengthQueuingStrategy.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});let countSizeFunction=()=>1;try{Object.defineProperty(countSizeFunction,"name",{value:"size",configurable:!0})}catch(t){}let CountQueuingStrategy=class CountQueuingStrategy{constructor(t){assertRequiredArgument(t,1,"CountQueuingStrategy"),t=convertQueuingStrategyInit(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!IsCountQueuingStrategy(this))throw countBrandCheckException("size");return countSizeFunction}};function countBrandCheckException(t){return TypeError(`CountQueuingStrategy.prototype.${t} can only be used on a CountQueuingStrategy`)}function IsCountQueuingStrategy(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_countQueuingStrategyHighWaterMark"))&&t instanceof CountQueuingStrategy}Object.defineProperties(CountQueuingStrategy.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(CountQueuingStrategy.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});let TransformStream=class TransformStream{constructor(t={},r={},n={}){let a;void 0===t&&(t=null);let o=convertQueuingStrategy(r,"Second parameter"),l=convertQueuingStrategy(n,"Third parameter"),u=function(t,r){assertDictionary(t,r);let n=null==t?void 0:t.flush,a=null==t?void 0:t.readableType,o=null==t?void 0:t.start,i=null==t?void 0:t.transform,s=null==t?void 0:t.writableType;return{flush:void 0===n?void 0:(assertFunction(n,`${r} has member 'flush' that`),r=>promiseCall(n,t,[r])),readableType:a,start:void 0===o?void 0:(assertFunction(o,`${r} has member 'start' that`),r=>reflectCall(o,t,[r])),transform:void 0===i?void 0:(assertFunction(i,`${r} has member 'transform' that`),(r,n)=>promiseCall(i,t,[r,n])),writableType:s}}(t,"First parameter");if(void 0!==u.readableType)throw RangeError("Invalid readableType specified");if(void 0!==u.writableType)throw RangeError("Invalid writableType specified");let c=ExtractHighWaterMark(l,0),d=ExtractSizeAlgorithm(l),h=ExtractHighWaterMark(o,1),p=ExtractSizeAlgorithm(o),y=newPromise(t=>{a=t});(function(t,r,n,a,o,s){function startAlgorithm(){return r}t._writable=function(t,r,n,a,o=1,i=()=>1){let s=Object.create(WritableStream.prototype);InitializeWritableStream(s);let l=Object.create(WritableStreamDefaultController.prototype);return SetUpWritableStreamDefaultController(s,l,t,r,n,a,o,i),s}(startAlgorithm,function(r){return function(t,r){let n=t._transformStreamController;if(t._backpressure){let a=t._backpressureChangePromise;return PerformPromiseThen(a,()=>{let a=t._writable,o=a._state;if("erroring"===o)throw a._storedError;return TransformStreamDefaultControllerPerformTransform(n,r)},void 0)}return TransformStreamDefaultControllerPerformTransform(n,r)}(t,r)},function(){return function(t){let r=t._readable,n=t._transformStreamController,a=n._flushAlgorithm();return TransformStreamDefaultControllerClearAlgorithms(n),PerformPromiseThen(a,()=>{if("errored"===r._state)throw r._storedError;ReadableStreamDefaultControllerClose(r._readableStreamController)},n=>{throw TransformStreamError(t,n),r._storedError})}(t)},function(r){return TransformStreamError(t,r),i(void 0)},n,a),t._readable=CreateReadableStream(startAlgorithm,function(){return TransformStreamSetBackpressure(t,!1),t._backpressureChangePromise},function(r){return TransformStreamErrorWritableAndUnblockWrite(t,r),i(void 0)},o,s),t._backpressure=void 0,t._backpressureChangePromise=void 0,t._backpressureChangePromise_resolve=void 0,TransformStreamSetBackpressure(t,!0),t._transformStreamController=void 0})(this,y,h,p,c,d),function(t,r){var n,a;let o=Object.create(TransformStreamDefaultController.prototype),transformAlgorithm=t=>{try{return TransformStreamDefaultControllerEnqueue(o,t),i(void 0)}catch(t){return s(t)}},flushAlgorithm=()=>i(void 0);void 0!==r.transform&&(transformAlgorithm=t=>r.transform(t,o)),void 0!==r.flush&&(flushAlgorithm=()=>r.flush(o)),n=transformAlgorithm,a=flushAlgorithm,o._controlledTransformStream=t,t._transformStreamController=o,o._transformAlgorithm=n,o._flushAlgorithm=a}(this,u),void 0!==u.start?a(u.start(this._transformStreamController)):a(void 0)}get readable(){if(!IsTransformStream(this))throw streamBrandCheckException("readable");return this._readable}get writable(){if(!IsTransformStream(this))throw streamBrandCheckException("writable");return this._writable}};function IsTransformStream(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_transformStreamController"))&&t instanceof TransformStream}function TransformStreamError(t,r){ReadableStreamDefaultControllerError(t._readable._readableStreamController,r),TransformStreamErrorWritableAndUnblockWrite(t,r)}function TransformStreamErrorWritableAndUnblockWrite(t,r){TransformStreamDefaultControllerClearAlgorithms(t._transformStreamController),WritableStreamDefaultControllerErrorIfNeeded(t._writable._writableStreamController,r),t._backpressure&&TransformStreamSetBackpressure(t,!1)}function TransformStreamSetBackpressure(t,r){void 0!==t._backpressureChangePromise&&t._backpressureChangePromise_resolve(),t._backpressureChangePromise=newPromise(r=>{t._backpressureChangePromise_resolve=r}),t._backpressure=r}Object.defineProperties(TransformStream.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(TransformStream.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});let TransformStreamDefaultController=class TransformStreamDefaultController{constructor(){throw TypeError("Illegal constructor")}get desiredSize(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return ReadableStreamDefaultControllerGetDesiredSize(t)}enqueue(t){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("enqueue");TransformStreamDefaultControllerEnqueue(this,t)}error(t){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("error");TransformStreamError(this._controlledTransformStream,t)}terminate(){if(!IsTransformStreamDefaultController(this))throw defaultControllerBrandCheckException("terminate");(function(t){let r=t._controlledTransformStream,n=r._readable._readableStreamController;ReadableStreamDefaultControllerClose(n);let a=TypeError("TransformStream terminated");TransformStreamErrorWritableAndUnblockWrite(r,a)})(this)}};function IsTransformStreamDefaultController(t){return!!(typeIsObject(t)&&Object.prototype.hasOwnProperty.call(t,"_controlledTransformStream"))&&t instanceof TransformStreamDefaultController}function TransformStreamDefaultControllerClearAlgorithms(t){t._transformAlgorithm=void 0,t._flushAlgorithm=void 0}function TransformStreamDefaultControllerEnqueue(t,r){let n=t._controlledTransformStream,a=n._readable._readableStreamController;if(!ReadableStreamDefaultControllerCanCloseOrEnqueue(a))throw TypeError("Readable side is not in a state that permits enqueue");try{ReadableStreamDefaultControllerEnqueue(a,r)}catch(t){throw TransformStreamErrorWritableAndUnblockWrite(n,t),n._readable._storedError}let o=!ReadableStreamDefaultControllerShouldCallPull(a);o!==n._backpressure&&TransformStreamSetBackpressure(n,!0)}function TransformStreamDefaultControllerPerformTransform(t,r){let n=t._transformAlgorithm(r);return PerformPromiseThen(n,void 0,r=>{throw TransformStreamError(t._controlledTransformStream,r),r})}function defaultControllerBrandCheckException(t){return TypeError(`TransformStreamDefaultController.prototype.${t} can only be used on a TransformStreamDefaultController`)}function streamBrandCheckException(t){return TypeError(`TransformStream.prototype.${t} can only be used on a TransformStream`)}Object.defineProperties(TransformStreamDefaultController.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),"symbol"==typeof r.toStringTag&&Object.defineProperty(TransformStreamDefaultController.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0}),t.ByteLengthQueuingStrategy=ByteLengthQueuingStrategy,t.CountQueuingStrategy=CountQueuingStrategy,t.ReadableByteStreamController=ReadableByteStreamController,t.ReadableStream=ReadableStream1,t.ReadableStreamBYOBReader=ReadableStreamBYOBReader,t.ReadableStreamBYOBRequest=ReadableStreamBYOBRequest,t.ReadableStreamDefaultController=ReadableStreamDefaultController,t.ReadableStreamDefaultReader=ReadableStreamDefaultReader,t.TransformStream=TransformStream,t.TransformStreamDefaultController=TransformStreamDefaultController,t.WritableStream=WritableStream,t.WritableStreamDefaultController=WritableStreamDefaultController,t.WritableStreamDefaultWriter=WritableStreamDefaultWriter,Object.defineProperty(t,"__esModule",{value:!0})}(y.exports)),y.exports))}try{let{Blob:t}=n(4300);t&&!t.prototype.stream&&(t.prototype.stream=function(t){let r=0,n=this;return new ReadableStream({type:"bytes",async pull(t){let a=n.slice(r,Math.min(n.size,r+65536)),o=await a.arrayBuffer();r+=o.byteLength,t.enqueue(new Uint8Array(o)),r===n.size&&t.close()}})})}catch(t){}async function*toIterator(t,r=!0){for(let n of t)if("stream"in n)yield*n.stream();else if(ArrayBuffer.isView(n)){if(r){let t=n.byteOffset,r=n.byteOffset+n.byteLength;for(;t!==r;){let a=Math.min(r-t,65536),o=n.buffer.slice(t,t+a);t+=o.byteLength,yield new Uint8Array(o)}}else yield n}else{let t=0;for(;t!==n.size;){let r=n.slice(t,Math.min(n.size,t+65536)),a=await r.arrayBuffer();t+=a.byteLength,yield new Uint8Array(a)}}}let m=class Blob{#r;#n;#a;#o;constructor(t=[],r={}){if(this.#r=[],this.#n="",this.#a=0,this.#o="transparent","object"!=typeof t||null===t)throw TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if("function"!=typeof t[Symbol.iterator])throw TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");null===r&&(r={});let n=new TextEncoder;for(let r of t){let t;t=ArrayBuffer.isView(r)?new Uint8Array(r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)):r instanceof ArrayBuffer?new Uint8Array(r.slice(0)):r instanceof Blob?r:n.encode(`${r}`);let a=ArrayBuffer.isView(t)?t.byteLength:t.size;a&&(this.#a+=a,this.#r.push(t))}this.#o=`${void 0===r.endings?"transparent":r.endings}`;let a=void 0===r.type?"":String(r.type);this.#n=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#a}get type(){return this.#n}async text(){let t=new TextDecoder,r="";for await(let n of toIterator(this.#r,!1))r+=t.decode(n,{stream:!0});return r+t.decode()}async arrayBuffer(){let t=new Uint8Array(this.size),r=0;for await(let n of toIterator(this.#r,!1))t.set(n,r),r+=n.length;return t.buffer}stream(){let t=toIterator(this.#r,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await t.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await t.return()}})}slice(t=0,r=this.size,n=""){let{size:a}=this,o=t<0?Math.max(a+t,0):Math.min(t,a),i=r<0?Math.max(a+r,0):Math.min(r,a),s=Math.max(i-o,0),l=this.#r,u=[],c=0;for(let t of l){if(c>=s)break;let r=ArrayBuffer.isView(t)?t.byteLength:t.size;if(o&&r<=o)o-=r,i-=r;else{let n;ArrayBuffer.isView(t)?c+=(n=t.subarray(o,Math.min(r,i))).byteLength:c+=(n=t.slice(o,Math.min(r,i))).size,i-=r,u.push(n),o=0}}let d=new Blob([],{type:String(n).toLowerCase()});return d.#a=s,d.#r=u,d}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&"object"==typeof t&&"function"==typeof t.constructor&&("function"==typeof t.stream||"function"==typeof t.arrayBuffer)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(m.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});let g=m,b=class extends g{#i;#s;constructor(t,r,n={}){if(arguments.length<2)throw TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,n),this.#i=0,this.#s="",null===n&&(n={});let a=void 0===n.lastModified?Date.now():Number(n.lastModified);Number.isNaN(a)||(this.#i=a),this.#s=String(r)}get name(){return this.#s}get lastModified(){return this.#i}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof g&&/^(File)$/.test(t[Symbol.toStringTag])}};/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */var{toStringTag:v,iterator:S,hasInstance:C}=Symbol,w=Math.random,A="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),f=(t,r,n)=>(t+="",/^(Blob|File)$/.test(r&&r[v])?[(n=void 0!==n?n+"":"File"==r[v]?r.name:"blob",t),r.name!==n||"blob"==r[v]?new b([r],n,r):r]:[t,r+""]),e=(t,r)=>(r?t:t.replace(/\r?\n|\r/g,"\r\n")).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),x=(t,r,n)=>{if(r.length<n)throw TypeError(`Failed to execute '${t}' on 'FormData': ${n} arguments required, but only ${r.length} present.`)};let E=class{#l;constructor(...t){if(this.#l=[],t.length)throw TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[v](){return"FormData"}[S](){return this.entries()}static[C](t){return t&&"object"==typeof t&&"FormData"===t[v]&&!A.some(r=>"function"!=typeof t[r])}append(...t){x("append",arguments,2),this.#l.push(f(...t))}delete(t){x("delete",arguments,1),t+="",this.#l=this.#l.filter(([r])=>r!==t)}get(t){x("get",arguments,1),t+="";for(var r=this.#l,n=r.length,a=0;a<n;a++)if(r[a][0]===t)return r[a][1];return null}getAll(t,r){return x("getAll",arguments,1),r=[],t+="",this.#l.forEach(n=>n[0]===t&&r.push(n[1])),r}has(t){return x("has",arguments,1),t+="",this.#l.some(r=>r[0]===t)}forEach(t,r){for(var[n,a]of(x("forEach",arguments,1),this))t.call(r,a,n,this)}set(...t){x("set",arguments,2);var r=[],n=!0;t=f(...t),this.#l.forEach(a=>{a[0]===t[0]?n&&(n=!r.push(t)):r.push(a)}),n&&r.push(t),this.#l=r}*entries(){yield*this.#l}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}};let FetchBaseError=class FetchBaseError extends Error{constructor(t,r){super(t),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};let FetchError=class FetchError extends FetchBaseError{constructor(t,r,n){super(t,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};let P=Symbol.toStringTag,isURLSearchParameters=t=>"object"==typeof t&&"function"==typeof t.append&&"function"==typeof t.delete&&"function"==typeof t.get&&"function"==typeof t.getAll&&"function"==typeof t.has&&"function"==typeof t.set&&"function"==typeof t.sort&&"URLSearchParams"===t[P],isBlob=t=>t&&"object"==typeof t&&"function"==typeof t.arrayBuffer&&"string"==typeof t.type&&"function"==typeof t.stream&&"function"==typeof t.constructor&&/^(Blob|File)$/.test(t[P]),isAbortSignal=t=>"object"==typeof t&&("AbortSignal"===t[P]||"EventTarget"===t[P]),isDomainOrSubdomain=(t,r)=>{let n=new URL(r).hostname,a=new URL(t).hostname;return n===a||n.endsWith(`.${a}`)},isSameProtocol=(t,r)=>{let n=new URL(r).protocol,a=new URL(t).protocol;return n===a},k=u.promisify(s.pipeline),_=Symbol("Body internals");let Body=class Body{constructor(t,{size:r=0}={}){let n=null;null===t?t=null:isURLSearchParameters(t)?t=l.Buffer.from(t.toString()):isBlob(t)||l.Buffer.isBuffer(t)||(u.types.isAnyArrayBuffer(t)?t=l.Buffer.from(t):ArrayBuffer.isView(t)?t=l.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof s||(t instanceof E?n=(t=function(t,r=g){var n=`${w()}${w()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),a=[],o=`--${n}\r
Content-Disposition: form-data; name="`;return t.forEach((t,r)=>"string"==typeof t?a.push(o+e(r)+`"\r
\r
${t.replace(/\r(?!\n)|(?<!\r)\n/g,"\r\n")}\r
`):a.push(o+e(r)+`"; filename="${e(t.name,1)}"\r
Content-Type: ${t.type||"application/octet-stream"}\r
\r
`,t,"\r\n")),a.push(`--${n}--`),new r(a,{type:"multipart/form-data; boundary="+n})}(t)).type.split("=")[1]:t=l.Buffer.from(String(t))));let a=t;l.Buffer.isBuffer(t)?a=s.Readable.from(t):isBlob(t)&&(a=s.Readable.from(t.stream())),this[_]={body:t,stream:a,boundary:n,disturbed:!1,error:null},this.size=r,t instanceof s&&t.on("error",t=>{let r=t instanceof FetchBaseError?t:new FetchError(`Invalid response body while trying to fetch ${this.url}: ${t.message}`,"system",t);this[_].error=r})}get body(){return this[_].stream}get bodyUsed(){return this[_].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:r,byteLength:n}=await consumeBody(this);return t.slice(r,r+n)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let t=new E,r=new URLSearchParams(await this.text());for(let[n,a]of r)t.append(n,a);return t}let{toFormData:r}=await n.e(109).then(n.t.bind(n,9109,19));return r(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[_].body&&this[_].body.type||"",r=await this.arrayBuffer();return new g([r],{type:t})}async json(){let t=await this.text();return JSON.parse(t)}async text(){let t=await consumeBody(this);return new TextDecoder().decode(t)}buffer(){return consumeBody(this)}};async function consumeBody(t){if(t[_].disturbed)throw TypeError(`body used already for: ${t.url}`);if(t[_].disturbed=!0,t[_].error)throw t[_].error;let{body:r}=t;if(null===r||!(r instanceof s))return l.Buffer.alloc(0);let n=[],a=0;try{for await(let o of r){if(t.size>0&&a+o.length>t.size){let n=new FetchError(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw r.destroy(n),n}a+=o.length,n.push(o)}}catch(n){let r=n instanceof FetchBaseError?n:new FetchError(`Invalid response body while trying to fetch ${t.url}: ${n.message}`,"system",n);throw r}if(!0===r.readableEnded||!0===r._readableState.ended)try{if(n.every(t=>"string"==typeof t))return l.Buffer.from(n.join(""));return l.Buffer.concat(n,a)}catch(r){throw new FetchError(`Could not create Buffer from response body for ${t.url}: ${r.message}`,"system",r)}else throw new FetchError(`Premature close of server response while trying to fetch ${t.url}`)}Body.prototype.buffer=u.deprecate(Body.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer"),Object.defineProperties(Body.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:u.deprecate(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});let clone=(t,r)=>{let n,a;let{body:o}=t[_];if(t.bodyUsed)throw Error("cannot clone body after it is used");return o instanceof s&&"function"!=typeof o.getBoundary&&(n=new s.PassThrough({highWaterMark:r}),a=new s.PassThrough({highWaterMark:r}),o.pipe(n),o.pipe(a),t[_].stream=n,o=a),o},B=u.deprecate(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),extractContentType=(t,r)=>null===t?null:"string"==typeof t?"text/plain;charset=UTF-8":isURLSearchParameters(t)?"application/x-www-form-urlencoded;charset=UTF-8":isBlob(t)?t.type||null:l.Buffer.isBuffer(t)||u.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof E?`multipart/form-data; boundary=${r[_].boundary}`:t&&"function"==typeof t.getBoundary?`multipart/form-data;boundary=${B(t)}`:t instanceof s?null:"text/plain;charset=UTF-8",getTotalBytes=t=>{let{body:r}=t[_];return null===r?0:isBlob(r)?r.size:l.Buffer.isBuffer(r)?r.length:r&&"function"==typeof r.getLengthSync&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},writeToStream=async(t,{body:r})=>{null===r?t.end():await k(r,t)},R="function"==typeof a.validateHeaderName?a.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let r=TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},T="function"==typeof a.validateHeaderValue?a.validateHeaderValue:(t,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let r=TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};let Headers=class Headers extends URLSearchParams{constructor(t){let r=[];if(t instanceof Headers){let n=t.raw();for(let[t,a]of Object.entries(n))r.push(...a.map(r=>[t,r]))}else if(null==t);else if("object"!=typeof t||u.types.isBoxedPrimitive(t))throw TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");else{let n=t[Symbol.iterator];if(null==n)r.push(...Object.entries(t));else{if("function"!=typeof n)throw TypeError("Header pairs must be iterable");r=[...t].map(t=>{if("object"!=typeof t||u.types.isBoxedPrimitive(t))throw TypeError("Each header pair must be an iterable object");return[...t]}).map(t=>{if(2!==t.length)throw TypeError("Each header pair must be a name/value tuple");return[...t]})}}return super(r=r.length>0?r.map(([t,r])=>(R(t),T(t,String(r)),[String(t).toLowerCase(),String(r)])):void 0),new Proxy(this,{get(t,r,n){switch(r){case"append":case"set":return(n,a)=>(R(n),T(n,String(a)),URLSearchParams.prototype[r].call(t,String(n).toLowerCase(),String(a)));case"delete":case"has":case"getAll":return n=>(R(n),URLSearchParams.prototype[r].call(t,String(n).toLowerCase()));case"keys":return()=>(t.sort(),new Set(URLSearchParams.prototype.keys.call(t)).keys());default:return Reflect.get(t,r,n)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let r=this.getAll(t);if(0===r.length)return null;let n=r.join(", ");return/^content-encoding$/i.test(t)&&(n=n.toLowerCase()),n}forEach(t,r){for(let n of this.keys())Reflect.apply(t,r,[this.get(n),n,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,r)=>(t[r]=this.getAll(r),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,r)=>{let n=this.getAll(r);return"host"===r?t[r]=n[0]:t[r]=n.length>1?n:n[0],t},{})}};Object.defineProperties(Headers.prototype,["get","entries","forEach","values"].reduce((t,r)=>(t[r]={enumerable:!0},t),{}));let O=new Set([301,302,303,307,308]),isRedirect=t=>O.has(t),I=Symbol("Response internals");let Response=class Response extends Body{constructor(t=null,r={}){super(t,r);let n=null!=r.status?r.status:200,a=new Headers(r.headers);if(null!==t&&!a.has("Content-Type")){let r=extractContentType(t,this);r&&a.append("Content-Type",r)}this[I]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:a,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[I].type}get url(){return this[I].url||""}get status(){return this[I].status}get ok(){return this[I].status>=200&&this[I].status<300}get redirected(){return this[I].counter>0}get statusText(){return this[I].statusText}get headers(){return this[I].headers}get highWaterMark(){return this[I].highWaterMark}clone(){return new Response(clone(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,r=302){if(!isRedirect(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');return new Response(null,{headers:{location:new URL(t).toString()},status:r})}static error(){let t=new Response(null,{status:0,statusText:""});return t[I].type="error",t}static json(t,r={}){let n=JSON.stringify(t);if(void 0===n)throw TypeError("data is not JSON serializable");let a=new Headers(r&&r.headers);return a.has("content-type")||a.set("content-type","application/json"),new Response(n,{...r,headers:a})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(Response.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});let getSearch=t=>{if(t.search)return t.search;let r=t.href.length-1,n=t.hash||("#"===t.href[r]?"#":"");return"?"===t.href[r-n.length]?"?":""};function stripURLForUseAsAReferrer(t,r=!1){return null==t?"no-referrer":(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",r&&(t.pathname="",t.search=""),t)}let K=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]);function isUrlPotentiallyTrustworthy(t){return!!(/^about:(blank|srcdoc)$/.test(t)||"data:"===t.protocol||/^(blob|filesystem):$/.test(t.protocol))||function(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let r=t.host.replace(/(^\[)|(]$)/g,""),n=d.isIP(r);return!!(4===n&&/^127\./.test(r)||6===n&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r))||!("localhost"===t.host||t.host.endsWith(".localhost"))&&"file:"===t.protocol}(t)}let U=Symbol("Request internals"),isRequest=t=>"object"==typeof t&&"object"==typeof t[U],N=u.deprecate(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)");let Request=class Request extends Body{constructor(t,r={}){let n;if(isRequest(t)?n=new URL(t.url):(n=new URL(t),t={}),""!==n.username||""!==n.password)throw TypeError(`${n} is an url with embedded credentials.`);let a=r.method||t.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(a)&&(a=a.toUpperCase()),!isRequest(r)&&"data"in r&&N(),(null!=r.body||isRequest(t)&&null!==t.body)&&("GET"===a||"HEAD"===a))throw TypeError("Request with GET/HEAD method cannot have body");let o=r.body?r.body:isRequest(t)&&null!==t.body?clone(t):null;super(o,{size:r.size||t.size||0});let i=new Headers(r.headers||t.headers||{});if(null!==o&&!i.has("Content-Type")){let t=extractContentType(o,this);t&&i.set("Content-Type",t)}let s=isRequest(t)?t.signal:null;if("signal"in r&&(s=r.signal),null!=s&&!isAbortSignal(s))throw TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let l=null==r.referrer?t.referrer:r.referrer;if(""===l)l="no-referrer";else if(l){let t=new URL(l);l=/^about:(\/\/)?client$/.test(t)?"client":t}else l=void 0;this[U]={method:a,redirect:r.redirect||t.redirect||"follow",headers:i,parsedURL:n,signal:s,referrer:l},this.follow=void 0===r.follow?void 0===t.follow?20:t.follow:r.follow,this.compress=void 0===r.compress?void 0===t.compress||t.compress:r.compress,this.counter=r.counter||t.counter||0,this.agent=r.agent||t.agent,this.highWaterMark=r.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||t.referrerPolicy||""}get method(){return this[U].method}get url(){return c.format(this[U].parsedURL)}get headers(){return this[U].headers}get redirect(){return this[U].redirect}get signal(){return this[U].signal}get referrer(){return"no-referrer"===this[U].referrer?"":"client"===this[U].referrer?"about:client":this[U].referrer?this[U].referrer.toString():void 0}get referrerPolicy(){return this[U].referrerPolicy}set referrerPolicy(t){this[U].referrerPolicy=function(t){if(!K.has(t))throw TypeError(`Invalid referrerPolicy: ${t}`);return t}(t)}clone(){return new Request(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Request.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});let getNodeRequestOptions=t=>{let{parsedURL:r}=t[U],n=new Headers(t[U].headers);n.has("Accept")||n.set("Accept","*/*");let a=null;if(null===t.body&&/^(post|put)$/i.test(t.method)&&(a="0"),null!==t.body){let r=getTotalBytes(t);"number"!=typeof r||Number.isNaN(r)||(a=String(r))}a&&n.set("Content-Length",a),""===t.referrerPolicy&&(t.referrerPolicy="strict-origin-when-cross-origin"),t.referrer&&"no-referrer"!==t.referrer?t[U].referrer=function(t,{referrerURLCallback:r,referrerOriginCallback:n}={}){if("no-referrer"===t.referrer||""===t.referrerPolicy)return null;let a=t.referrerPolicy;if("about:client"===t.referrer)return"no-referrer";let o=t.referrer,i=stripURLForUseAsAReferrer(o),s=stripURLForUseAsAReferrer(o,!0);i.toString().length>4096&&(i=s),r&&(i=r(i)),n&&(s=n(s));let l=new URL(t.url);switch(a){case"no-referrer":return"no-referrer";case"origin":return s;case"unsafe-url":return i;case"strict-origin":if(isUrlPotentiallyTrustworthy(i)&&!isUrlPotentiallyTrustworthy(l))return"no-referrer";return s.toString();case"strict-origin-when-cross-origin":if(i.origin===l.origin)return i;if(isUrlPotentiallyTrustworthy(i)&&!isUrlPotentiallyTrustworthy(l))return"no-referrer";return s;case"same-origin":if(i.origin===l.origin)return i;return"no-referrer";case"origin-when-cross-origin":if(i.origin===l.origin)return i;return s;case"no-referrer-when-downgrade":if(isUrlPotentiallyTrustworthy(i)&&!isUrlPotentiallyTrustworthy(l))return"no-referrer";return i;default:throw TypeError(`Invalid referrerPolicy: ${a}`)}}(t):t[U].referrer="no-referrer",t[U].referrer instanceof URL&&n.set("Referer",t.referrer),n.has("User-Agent")||n.set("User-Agent","node-fetch"),t.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip, deflate, br");let{agent:o}=t;"function"==typeof o&&(o=o(r)),n.has("Connection")||o||n.set("Connection","close");let i=getSearch(r),s={path:r.pathname+i,method:t.method,headers:n[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:o};return{parsedURL:r,options:s}};let AbortError=class AbortError extends FetchBaseError{constructor(t,r="aborted"){super(t,r)}};/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */if(!globalThis.DOMException)try{let{MessageChannel:t}=n(1267),r=new t().port1,a=new ArrayBuffer;r.postMessage(a,[a,a])}catch(t){"DOMException"===t.constructor.name&&(globalThis.DOMException=t.constructor)}var L=globalThis.DOMException;let j=new Set(["data:","http:","https:"]);async function fetch(t,r){return new Promise((n,u)=>{let c=new Request(t,r),{parsedURL:d,options:h}=getNodeRequestOptions(c);if(!j.has(d.protocol))throw TypeError(`node-fetch cannot load ${t}. URL scheme "${d.protocol.replace(/:$/,"")}" is not supported.`);if("data:"===d.protocol){let t=function(t){if(!/^data:/i.test(t))throw TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let r=t.indexOf(",");if(-1===r||r<=4)throw TypeError("malformed data: URI");let n=t.substring(5,r).split(";"),a="",o=!1,i=n[0]||"text/plain",s=i;for(let t=1;t<n.length;t++)"base64"===n[t]?o=!0:(s+=`;${n[t]}`,0===n[t].indexOf("charset=")&&(a=n[t].substring(8)));n[0]||a.length||(s+=";charset=US-ASCII",a="US-ASCII");let l=o?"base64":"ascii",u=unescape(t.substring(r+1)),c=Buffer.from(u,l);return c.type=i,c.typeFull=s,c.charset=a,c}(c.url),r=new Response(t,{headers:{"Content-Type":t.typeFull}});n(r);return}let p=("https:"===d.protocol?o:a).request,{signal:y}=c,m=null,abort=()=>{let t=new AbortError("The operation was aborted.");u(t),c.body&&c.body instanceof s.Readable&&c.body.destroy(t),m&&m.body&&m.body.emit("error",t)};if(y&&y.aborted){abort();return}let abortAndFinalize=()=>{abort(),finalize()},g=p(d.toString(),h);y&&y.addEventListener("abort",abortAndFinalize);let finalize=()=>{g.abort(),y&&y.removeEventListener("abort",abortAndFinalize)};g.on("error",t=>{u(new FetchError(`request to ${c.url} failed, reason: ${t.message}`,"system",t)),finalize()}),function(t,r){let n;let a=l.Buffer.from("0\r\n\r\n"),o=!1,i=!1;t.on("response",t=>{let{headers:r}=t;o="chunked"===r["transfer-encoding"]&&!r["content-length"]}),t.on("socket",s=>{let onSocketClose=()=>{if(o&&!i){let t=Error("Premature close");t.code="ERR_STREAM_PREMATURE_CLOSE",r(t)}},onData=t=>{(i=0===l.Buffer.compare(t.slice(-5),a))||!n||(i=0===l.Buffer.compare(n.slice(-3),a.slice(0,3))&&0===l.Buffer.compare(t.slice(-2),a.slice(3))),n=t};s.prependListener("close",onSocketClose),s.on("data",onData),t.on("close",()=>{s.removeListener("close",onSocketClose),s.removeListener("data",onData)})})}(g,t=>{m&&m.body&&m.body.destroy(t)}),process.version<"v14"&&g.on("socket",t=>{let r;t.prependListener("end",()=>{r=t._eventsCount}),t.prependListener("close",n=>{if(m&&r<t._eventsCount&&!n){let t=Error("Premature close");t.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",t)}})}),g.on("response",t=>{g.setTimeout(0);let a=function(t=[]){return new Headers(t.reduce((t,r,n,a)=>(n%2==0&&t.push(a.slice(n,n+2)),t),[]).filter(([t,r])=>{try{return R(t),T(t,String(r)),!0}catch{return!1}}))}(t.rawHeaders);if(isRedirect(t.statusCode)){let o=a.get("Location"),i=null;try{i=null===o?null:new URL(o,c.url)}catch{if("manual"!==c.redirect){u(new FetchError(`uri requested responds with an invalid redirect URL: ${o}`,"invalid-redirect")),finalize();return}}switch(c.redirect){case"error":u(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${c.url}`,"no-redirect")),finalize();return;case"manual":break;case"follow":{if(null===i)break;if(c.counter>=c.follow){u(new FetchError(`maximum redirect reached at: ${c.url}`,"max-redirect")),finalize();return}let o={headers:new Headers(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:clone(c),signal:c.signal,size:c.size,referrer:c.referrer,referrerPolicy:c.referrerPolicy};if(!isDomainOrSubdomain(c.url,i)||!isSameProtocol(c.url,i))for(let t of["authorization","www-authenticate","cookie","cookie2"])o.headers.delete(t);if(303!==t.statusCode&&c.body&&r.body instanceof s.Readable){u(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect")),finalize();return}(303===t.statusCode||(301===t.statusCode||302===t.statusCode)&&"POST"===c.method)&&(o.method="GET",o.body=void 0,o.headers.delete("content-length"));let l=function(t){let r=(t.get("referrer-policy")||"").split(/[,\s]+/),n="";for(let t of r)t&&K.has(t)&&(n=t);return n}(a);l&&(o.referrerPolicy=l),n(fetch(new Request(i,o))),finalize();return}default:return u(TypeError(`Redirect option '${c.redirect}' is not a valid value of RequestRedirect`))}}y&&t.once("end",()=>{y.removeEventListener("abort",abortAndFinalize)});let o=s.pipeline(t,new s.PassThrough,t=>{t&&u(t)});process.version<"v12.10"&&t.on("aborted",abortAndFinalize);let l={url:c.url,status:t.statusCode,statusText:t.statusMessage,headers:a,size:c.size,counter:c.counter,highWaterMark:c.highWaterMark},d=a.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===d||204===t.statusCode||304===t.statusCode){n(m=new Response(o,l));return}let h={flush:i.Z_SYNC_FLUSH,finishFlush:i.Z_SYNC_FLUSH};if("gzip"===d||"x-gzip"===d){o=s.pipeline(o,i.createGunzip(h),t=>{t&&u(t)}),n(m=new Response(o,l));return}if("deflate"===d||"x-deflate"===d){let r=s.pipeline(t,new s.PassThrough,t=>{t&&u(t)});r.once("data",t=>{o=(15&t[0])==8?s.pipeline(o,i.createInflate(),t=>{t&&u(t)}):s.pipeline(o,i.createInflateRaw(),t=>{t&&u(t)}),n(m=new Response(o,l))}),r.once("end",()=>{m||n(m=new Response(o,l))});return}if("br"===d){o=s.pipeline(o,i.createBrotliDecompress(),t=>{t&&u(t)}),n(m=new Response(o,l));return}n(m=new Response(o,l))}),writeToStream(g,c).catch(u)})}/**
 * @author Toru Nagashima <https://github.com/mysticatea>
 * @copyright 2015 Toru Nagashima. All rights reserved.
 * See LICENSE file in root directory for full license.
 */let D=new WeakMap,q=new WeakMap;function pd(t){let r=D.get(t);return console.assert(null!=r,"'this' is expected an Event object, but got",t),r}function setCancelFlag(t){if(null!=t.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",t.passiveListener);return}t.event.cancelable&&(t.canceled=!0,"function"==typeof t.event.preventDefault&&t.event.preventDefault())}function Event(t,r){D.set(this,{eventTarget:t,event:r,eventPhase:2,currentTarget:t,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:r.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let n=Object.keys(r);for(let t=0;t<n.length;++t){let r=n[t];r in this||Object.defineProperty(this,r,defineRedirectDescriptor(r))}}function defineRedirectDescriptor(t){return{get(){return pd(this).event[t]},set(r){pd(this).event[t]=r},configurable:!0,enumerable:!0}}function setPassiveListener(t,r){pd(t).passiveListener=r}Event.prototype={get type(){return pd(this).event.type},get target(){return pd(this).eventTarget},get currentTarget(){return pd(this).currentTarget},composedPath(){let t=pd(this).currentTarget;return null==t?[]:[t]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return pd(this).eventPhase},stopPropagation(){let t=pd(this);t.stopped=!0,"function"==typeof t.event.stopPropagation&&t.event.stopPropagation()},stopImmediatePropagation(){let t=pd(this);t.stopped=!0,t.immediateStopped=!0,"function"==typeof t.event.stopImmediatePropagation&&t.event.stopImmediatePropagation()},get bubbles(){return!!pd(this).event.bubbles},get cancelable(){return!!pd(this).event.cancelable},preventDefault(){setCancelFlag(pd(this))},get defaultPrevented(){return pd(this).canceled},get composed(){return!!pd(this).event.composed},get timeStamp(){return pd(this).timeStamp},get srcElement(){return pd(this).eventTarget},get cancelBubble(){return pd(this).stopped},set cancelBubble(value){if(!value)return;let t=pd(this);t.stopped=!0,"boolean"==typeof t.event.cancelBubble&&(t.event.cancelBubble=!0)},get returnValue(){return!pd(this).canceled},set returnValue(value){value||setCancelFlag(pd(this))},initEvent(){}},Object.defineProperty(Event.prototype,"constructor",{value:Event,configurable:!0,writable:!0});let M=new WeakMap;function isObject(t){return null!==t&&"object"==typeof t}function getListeners(t){let r=M.get(t);if(null==r)throw TypeError("'this' is expected an EventTarget object, but got another value.");return r}function defineEventAttribute(t,r){Object.defineProperty(t,`on${r}`,{get(){let t=getListeners(this),n=t.get(r);for(;null!=n;){if(3===n.listenerType)return n.listener;n=n.next}return null},set(t){"function"==typeof t||isObject(t)||(t=null);let n=getListeners(this),a=null,o=n.get(r);for(;null!=o;)3===o.listenerType?null!==a?a.next=o.next:null!==o.next?n.set(r,o.next):n.delete(r):a=o,o=o.next;if(null!==t){let o={listener:t,listenerType:3,passive:!1,once:!1,next:null};null===a?n.set(r,o):a.next=o}},configurable:!0,enumerable:!0})}function defineCustomEventTarget(t){function CustomEventTarget(){EventTarget.call(this)}CustomEventTarget.prototype=Object.create(EventTarget.prototype,{constructor:{value:CustomEventTarget,configurable:!0,writable:!0}});for(let r=0;r<t.length;++r)defineEventAttribute(CustomEventTarget.prototype,t[r]);return CustomEventTarget}function EventTarget(){if(this instanceof EventTarget){M.set(this,new Map);return}if(1==arguments.length&&Array.isArray(arguments[0]))return defineCustomEventTarget(arguments[0]);if(arguments.length>0){let t=Array(arguments.length);for(let r=0;r<arguments.length;++r)t[r]=arguments[r];return defineCustomEventTarget(t)}throw TypeError("Cannot call a class as a function")}EventTarget.prototype={addEventListener(t,r,n){if(null==r)return;if("function"!=typeof r&&!isObject(r))throw TypeError("'listener' should be a function or an object.");let a=getListeners(this),o=isObject(n),i=o?!!n.capture:!!n,s=i?1:2,l={listener:r,listenerType:s,passive:o&&!!n.passive,once:o&&!!n.once,next:null},u=a.get(t);if(void 0===u){a.set(t,l);return}let c=null;for(;null!=u;){if(u.listener===r&&u.listenerType===s)return;c=u,u=u.next}c.next=l},removeEventListener(t,r,n){if(null==r)return;let a=getListeners(this),o=isObject(n)?!!n.capture:!!n,i=o?1:2,s=null,l=a.get(t);for(;null!=l;){if(l.listener===r&&l.listenerType===i){null!==s?s.next=l.next:null!==l.next?a.set(t,l.next):a.delete(t);return}s=l,l=l.next}},dispatchEvent(t){if(null==t||"string"!=typeof t.type)throw TypeError('"event.type" should be a string.');let r=getListeners(this),n=t.type,a=r.get(n);if(null==a)return!0;let o=function(t,r){let n=function getWrapper(t){if(null==t||t===Object.prototype)return Event;let r=q.get(t);return null==r&&(r=function(t,r){let n=Object.keys(r);if(0===n.length)return t;function CustomEvent(r,n){t.call(this,r,n)}CustomEvent.prototype=Object.create(t.prototype,{constructor:{value:CustomEvent,configurable:!0,writable:!0}});for(let a=0;a<n.length;++a){let o=n[a];if(!(o in t.prototype)){let t=Object.getOwnPropertyDescriptor(r,o),n="function"==typeof t.value;Object.defineProperty(CustomEvent.prototype,o,n?function(t){return{value(){let r=pd(this).event;return r[t].apply(r,arguments)},configurable:!0,enumerable:!0}}(o):defineRedirectDescriptor(o))}}return CustomEvent}(getWrapper(Object.getPrototypeOf(t)),t),q.set(t,r)),r}(Object.getPrototypeOf(r));return new n(t,r)}(this,t),i=null;for(;null!=a;){if(a.once?null!==i?i.next=a.next:null!==a.next?r.set(n,a.next):r.delete(n):i=a,setPassiveListener(o,a.passive?a.listener:null),"function"==typeof a.listener)try{a.listener.call(this,o)}catch(t){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(t)}else 3!==a.listenerType&&"function"==typeof a.listener.handleEvent&&a.listener.handleEvent(o);if(pd(o).immediateStopped)break;a=a.next}return setPassiveListener(o,null),pd(o).eventPhase=0,pd(o).currentTarget=null,!o.defaultPrevented}},Object.defineProperty(EventTarget.prototype,"constructor",{value:EventTarget,configurable:!0,writable:!0});let AbortSignal=class AbortSignal extends EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let t=W.get(this);if("boolean"!=typeof t)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return t}};defineEventAttribute(AbortSignal.prototype,"abort");let W=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});let AbortController$1=class AbortController$1{constructor(){H.set(this,function(){let t=Object.create(AbortSignal.prototype);return EventTarget.call(t),W.set(t,!1),t}())}get signal(){return getSignal(this)}abort(){var t;t=getSignal(this),!1===W.get(t)&&(W.set(t,!0),t.dispatchEvent({type:"abort"}))}};let H=new WeakMap;function getSignal(t){let r=H.get(t);if(null==r)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===t?"null":typeof t}`);return r}Object.defineProperties(AbortController$1.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortController$1.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),r.AbortController=AbortController$1,r.AbortError=AbortError,r.FetchError=FetchError,r.File=b,r.FormData=E,r.Headers=Headers,r.Request=Request,r.Response=Response,r._Blob=g,r.fetch=fetch,r.isRedirect=isRedirect,r.nodeDomexception=L},5960:(t,r,n)=>{let a=n(5276);function fetch(t,r){return a.fetch(t,r)}for(let t in a)fetch[t]=a[t];t.exports=fetch},7175:(t,r,n)=>{n.r(r),n.d(r,{__addDisposableResource:()=>__addDisposableResource,__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldIn:()=>__classPrivateFieldIn,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>a,__decorate:()=>__decorate,__disposeResources:()=>__disposeResources,__esDecorate:()=>__esDecorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__propKey:()=>__propKey,__read:()=>__read,__rest:()=>__rest,__runInitializers:()=>__runInitializers,__setFunctionName:()=>__setFunctionName,__spread:()=>__spread,__spreadArray:()=>__spreadArray,__spreadArrays:()=>__spreadArrays,__values:()=>__values,default:()=>s});var extendStatics=function(t,r){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])})(t,r)};function __extends(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++)for(var o in r=arguments[n])Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o]);return t}).apply(this,arguments)};function __rest(t,r){var n={};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&0>r.indexOf(a)&&(n[a]=t[a]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(t);o<a.length;o++)0>r.indexOf(a[o])&&Object.prototype.propertyIsEnumerable.call(t,a[o])&&(n[a[o]]=t[a[o]]);return n}function __decorate(t,r,n,a){var o,i=arguments.length,s=i<3?r:null===a?a=Object.getOwnPropertyDescriptor(r,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,r,n,a);else for(var l=t.length-1;l>=0;l--)(o=t[l])&&(s=(i<3?o(s):i>3?o(r,n,s):o(r,n))||s);return i>3&&s&&Object.defineProperty(r,n,s),s}function __param(t,r){return function(n,a){r(n,a,t)}}function __esDecorate(t,r,n,a,o,i){function accept(t){if(void 0!==t&&"function"!=typeof t)throw TypeError("Function expected");return t}for(var s,l=a.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!r&&t?a.static?t:t.prototype:null,d=r||(c?Object.getOwnPropertyDescriptor(c,a.name):{}),h=!1,p=n.length-1;p>=0;p--){var y={};for(var m in a)y[m]="access"===m?{}:a[m];for(var m in a.access)y.access[m]=a.access[m];y.addInitializer=function(t){if(h)throw TypeError("Cannot add initializers after decoration has completed");i.push(accept(t||null))};var g=(0,n[p])("accessor"===l?{get:d.get,set:d.set}:d[u],y);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw TypeError("Object expected");(s=accept(g.get))&&(d.get=s),(s=accept(g.set))&&(d.set=s),(s=accept(g.init))&&o.unshift(s)}else(s=accept(g))&&("field"===l?o.unshift(s):d[u]=s)}c&&Object.defineProperty(c,a.name,d),h=!0}function __runInitializers(t,r,n){for(var a=arguments.length>2,o=0;o<r.length;o++)n=a?r[o].call(t,n):r[o].call(t);return a?n:void 0}function __propKey(t){return"symbol"==typeof t?t:"".concat(t)}function __setFunctionName(t,r,n){return"symbol"==typeof r&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function __metadata(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)}function __awaiter(t,r,n,a){return new(n||(n=Promise))(function(o,i){function fulfilled(t){try{step(a.next(t))}catch(t){i(t)}}function rejected(t){try{step(a.throw(t))}catch(t){i(t)}}function step(t){var r;t.done?o(t.value):((r=t.value)instanceof n?r:new n(function(t){t(r)})).then(fulfilled,rejected)}step((a=a.apply(t,r||[])).next())})}function __generator(t,r){var n,a,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(l){return function(u){return function(l){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(s=0)),s;)try{if(n=1,a&&(o=2&l[0]?a.return:l[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,l[1])).done)return o;switch(a=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,a=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===l[0]||2===l[0])){s=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){s.label=l[1];break}if(6===l[0]&&s.label<o[1]){s.label=o[1],o=l;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(l);break}o[2]&&s.ops.pop(),s.trys.pop();continue}l=r.call(t,s)}catch(t){l=[6,t],a=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,u])}}}var a=Object.create?function(t,r,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(r,n);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(t,a,o)}:function(t,r,n,a){void 0===a&&(a=n),t[a]=r[n]};function __exportStar(t,r){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||a(r,t,n)}function __values(t){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&t[r],a=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,r){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var a,o,i=n.call(t),s=[];try{for(;(void 0===r||r-- >0)&&!(a=i.next()).done;)s.push(a.value)}catch(t){o={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function __spread(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(__read(arguments[r]));return t}function __spreadArrays(){for(var t=0,r=0,n=arguments.length;r<n;r++)t+=arguments[r].length;for(var a=Array(t),o=0,r=0;r<n;r++)for(var i=arguments[r],s=0,l=i.length;s<l;s++,o++)a[o]=i[s];return a}function __spreadArray(t,r,n){if(n||2==arguments.length)for(var a,o=0,i=r.length;o<i;o++)!a&&o in r||(a||(a=Array.prototype.slice.call(r,0,o)),a[o]=r[o]);return t.concat(a||Array.prototype.slice.call(r))}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,r,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var a,o=n.apply(t,r||[]),i=[];return a={},verb("next"),verb("throw"),verb("return"),a[Symbol.asyncIterator]=function(){return this},a;function verb(t){o[t]&&(a[t]=function(r){return new Promise(function(n,a){i.push([t,r,n,a])>1||resume(t,r)})})}function resume(t,r){try{var n;(n=o[t](r)).value instanceof __await?Promise.resolve(n.value.v).then(fulfill,reject):settle(i[0][2],n)}catch(t){settle(i[0][3],t)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,r){t(r),i.shift(),i.length&&resume(i[0][0],i[0][1])}}function __asyncDelegator(t){var r,n;return r={},verb("next"),verb("throw",function(t){throw t}),verb("return"),r[Symbol.iterator]=function(){return this},r;function verb(a,o){r[a]=t[a]?function(r){return(n=!n)?{value:__await(t[a](r)),done:!1}:o?o(r):r}:o}}function __asyncValues(t){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,n=t[Symbol.asyncIterator];return n?n.call(t):(t=__values(t),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(n){r[n]=t[n]&&function(r){return new Promise(function(a,o){(function(t,r,n,a){Promise.resolve(a).then(function(r){t({value:r,done:n})},r)})(a,o,(r=t[n](r)).done,r.value)})}}}function __makeTemplateObject(t,r){return Object.defineProperty?Object.defineProperty(t,"raw",{value:r}):t.raw=r,t}var o=Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r};function __importStar(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&a(r,t,n);return o(r,t),r}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,r,n,a){if("a"===n&&!a)throw TypeError("Private accessor was defined without a getter");if("function"==typeof r?t!==r||!a:!r.has(t))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?a:"a"===n?a.call(t):a?a.value:r.get(t)}function __classPrivateFieldSet(t,r,n,a,o){if("m"===a)throw TypeError("Private method is not writable");if("a"===a&&!o)throw TypeError("Private accessor was defined without a setter");if("function"==typeof r?t!==r||!o:!r.has(t))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===a?o.call(t,n):o?o.value=n:r.set(t,n),n}function __classPrivateFieldIn(t,r){if(null===r||"object"!=typeof r&&"function"!=typeof r)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?r===t:t.has(r)}function __addDisposableResource(t,r,n){if(null!=r){var a;if("object"!=typeof r&&"function"!=typeof r)throw TypeError("Object expected.");if(n){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");a=r[Symbol.asyncDispose]}if(void 0===a){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");a=r[Symbol.dispose]}if("function"!=typeof a)throw TypeError("Object not disposable.");t.stack.push({value:r,dispose:a,async:n})}else n&&t.stack.push({async:!0});return r}var i="function"==typeof SuppressedError?SuppressedError:function(t,r,n){var a=Error(n);return a.name="SuppressedError",a.error=t,a.suppressed=r,a};function __disposeResources(t){function fail(r){t.error=t.hasError?new i(r,t.error,"An error was suppressed during disposal."):r,t.hasError=!0}return function next(){for(;t.stack.length;){var r=t.stack.pop();try{var n=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(n).then(next,function(t){return fail(t),next()})}catch(t){fail(t)}}if(t.hasError)throw t.error}()}let s={__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding:a,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources}}};